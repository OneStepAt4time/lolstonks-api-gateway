
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Unified League of Legends API Gateway with caching, rate limiting, and comprehensive monitoring" name="description"/>
<link href="../../api/security/" rel="prev"/>
<link href="../system-overview/" rel="next"/>
<link href="../../assets/logo.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator"/>
<title>Overview - LOLStonks API Gateway</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#architecture-overview">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="LOLStonks API Gateway" class="md-header__button md-logo" data-md-component="logo" href="../.." title="LOLStonks API Gateway">
<img alt="logo" src="../../assets/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            LOLStonks API Gateway
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Overview
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/OneStepAt4time/lolstonks-api-gateway" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/installation/">
          
  
  
    
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/openapi-spec/">
          
  
  
    
  
  API Reference

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="./">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../operations/monitoring/">
          
  
  
    
  
  Operations

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../development/contributing/">
          
  
  
    
  
  Development

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="LOLStonks API Gateway" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="LOLStonks API Gateway">
<img alt="logo" src="../../assets/logo.png"/>
</a>
    LOLStonks API Gateway
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/OneStepAt4time/lolstonks-api-gateway" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/quick-start/">
<span class="md-ellipsis">
    Quick Start
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/deployment/">
<span class="md-ellipsis">
    Production Deployment
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/openapi-spec/">
<span class="md-ellipsis">
    OpenAPI Specification
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/providers/">
<span class="md-ellipsis">
    Providers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/riot-client/">
<span class="md-ellipsis">
    Riot Client
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/models/">
<span class="md-ellipsis">
    Models
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/routers/">
<span class="md-ellipsis">
    Routers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/cache/">
<span class="md-ellipsis">
    Cache
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Overview
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-navigation">
<span class="md-ellipsis">
      Architecture Navigation
    </span>
</a>
<nav aria-label="Architecture Navigation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-architecture-diagrams">
<span class="md-ellipsis">
      Core Architecture Diagrams
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interactive-features">
<span class="md-ellipsis">
      Interactive Features
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multi-source-architecture">
<span class="md-ellipsis">
      Multi-Source Architecture
    </span>
</a>
<nav aria-label="Multi-Source Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#supported-providers">
<span class="md-ellipsis">
      Supported Providers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provider-abstraction-layer">
<span class="md-ellipsis">
      Provider Abstraction Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provider-registry">
<span class="md-ellipsis">
      Provider Registry
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-level-architecture">
<span class="md-ellipsis">
      High-Level Architecture
    </span>
</a>
<nav aria-label="High-Level Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#comprehensive-multi-provider-architecture">
<span class="md-ellipsis">
      Comprehensive Multi-Provider Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#system-architecture-diagrams">
<span class="md-ellipsis">
      System Architecture Diagrams
    </span>
</a>
<nav aria-label="System Architecture Diagrams" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-1-client-and-gateway-layer">
<span class="md-ellipsis">
      Diagram 1: Client and Gateway Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-2-gateway-and-provider-layer">
<span class="md-ellipsis">
      Diagram 2: Gateway and Provider Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-3-provider-and-external-data-sources">
<span class="md-ellipsis">
      Diagram 3: Provider and External Data Sources
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#request-flow-patterns">
<span class="md-ellipsis">
      Request Flow Patterns
    </span>
</a>
<nav aria-label="Request Flow Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#simplified-request-flow">
<span class="md-ellipsis">
      Simplified Request Flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-components">
<span class="md-ellipsis">
      Core Components
    </span>
</a>
<nav aria-label="Core Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-fastapi-application-appmain">
<span class="md-ellipsis">
      1. FastAPI Application (app.main)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-provider-registry-appprovidersregistry">
<span class="md-ellipsis">
      2. Provider Registry (app.providers.registry)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-provider-abstraction-layer-appprovidersbase">
<span class="md-ellipsis">
      3. Provider Abstraction Layer (app.providers.base)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-specialized-providers-appproviders">
<span class="md-ellipsis">
      4. Specialized Providers (app.providers.*)
    </span>
</a>
<nav aria-label="4. Specialized Providers (app.providers.*)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#riot-api-provider">
<span class="md-ellipsis">
      Riot API Provider
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-dragon-provider">
<span class="md-ellipsis">
      Data Dragon Provider
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#community-dragon-provider">
<span class="md-ellipsis">
      Community Dragon Provider
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-rate-limiter-appriotrate_limiter">
<span class="md-ellipsis">
      3. Rate Limiter (app.riot.rate_limiter)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-redis-cache-appcacheredis_cache">
<span class="md-ellipsis">
      4. Redis Cache (app.cache.redis_cache)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-match-tracking-appcachetracking">
<span class="md-ellipsis">
      5. Match Tracking (app.cache.tracking)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#api-router-architecture">
<span class="md-ellipsis">
      API Router Architecture
    </span>
</a>
<nav aria-label="API Router Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#router-organization">
<span class="md-ellipsis">
      Router Organization
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#router-responsibilities">
<span class="md-ellipsis">
      Router Responsibilities
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-router-structure">
<span class="md-ellipsis">
      Example Router Structure
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-flow-architecture">
<span class="md-ellipsis">
      Data Flow Architecture
    </span>
</a>
<nav aria-label="Data Flow Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#request-processing-flow">
<span class="md-ellipsis">
      Request Processing Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#caching-strategy">
<span class="md-ellipsis">
      Caching Strategy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling-flow">
<span class="md-ellipsis">
      Error Handling Flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-architecture">
<span class="md-ellipsis">
      Configuration Architecture
    </span>
</a>
<nav aria-label="Configuration Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-hierarchy">
<span class="md-ellipsis">
      Configuration Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-management">
<span class="md-ellipsis">
      Configuration Management
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-architecture">
<span class="md-ellipsis">
      Performance Architecture
    </span>
</a>
<nav aria-label="Performance Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-optimizations">
<span class="md-ellipsis">
      Performance Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scalability-considerations">
<span class="md-ellipsis">
      Scalability Considerations
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#security-architecture">
<span class="md-ellipsis">
      Security Architecture
    </span>
</a>
<nav aria-label="Security Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#security-layers">
<span class="md-ellipsis">
      Security Layers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices">
<span class="md-ellipsis">
      Best Practices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring-and-observability">
<span class="md-ellipsis">
      Monitoring and Observability
    </span>
</a>
<nav aria-label="Monitoring and Observability" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#health-checks">
<span class="md-ellipsis">
      Health Checks
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#logging-strategy">
<span class="md-ellipsis">
      Logging Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-decisions">
<span class="md-ellipsis">
      Architecture Decisions
    </span>
</a>
<nav aria-label="Architecture Decisions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-1-three-provider-architecture">
<span class="md-ellipsis">
      Decision 1: Three-Provider Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-2-aiolimiter-library-for-rate-limiting">
<span class="md-ellipsis">
      Decision 2: aiolimiter Library for Rate Limiting
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-3-aiocache-library-for-caching">
<span class="md-ellipsis">
      Decision 3: aiocache Library for Caching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-4-pydantic-v2-for-input-validation">
<span class="md-ellipsis">
      Decision 4: Pydantic V2 for Input Validation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-5-stateless-design">
<span class="md-ellipsis">
      Decision 5: Stateless Design
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-6-direct-router-implementation-over-decorators">
<span class="md-ellipsis">
      Decision 6: Direct router implementation over decorators
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#design-principles">
<span class="md-ellipsis">
      Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-deployment">
<span class="md-ellipsis">
      Production Deployment
    </span>
</a>
<nav aria-label="Production Deployment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#deployment-architecture">
<span class="md-ellipsis">
      Deployment Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-requirements">
<span class="md-ellipsis">
      Production Requirements
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scaling-considerations">
<span class="md-ellipsis">
      Scaling Considerations
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../system-overview/">
<span class="md-ellipsis">
    System Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data-flow/">
<span class="md-ellipsis">
    Data Flow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../implementation-details/">
<span class="md-ellipsis">
    Implementation Details
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    Data Models
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Operations
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/monitoring/">
<span class="md-ellipsis">
    Monitoring
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Development
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/contributing/">
<span class="md-ellipsis">
    Contributing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/changelog-guide/">
<span class="md-ellipsis">
    Changelog Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/versioning/">
<span class="md-ellipsis">
    Versioning
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/releases/">
<span class="md-ellipsis">
    Releases
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/testing/">
<span class="md-ellipsis">
    Testing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/documentation/">
<span class="md-ellipsis">
    Documentation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-navigation">
<span class="md-ellipsis">
      Architecture Navigation
    </span>
</a>
<nav aria-label="Architecture Navigation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-architecture-diagrams">
<span class="md-ellipsis">
      Core Architecture Diagrams
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interactive-features">
<span class="md-ellipsis">
      Interactive Features
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multi-source-architecture">
<span class="md-ellipsis">
      Multi-Source Architecture
    </span>
</a>
<nav aria-label="Multi-Source Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#supported-providers">
<span class="md-ellipsis">
      Supported Providers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provider-abstraction-layer">
<span class="md-ellipsis">
      Provider Abstraction Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#provider-registry">
<span class="md-ellipsis">
      Provider Registry
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#high-level-architecture">
<span class="md-ellipsis">
      High-Level Architecture
    </span>
</a>
<nav aria-label="High-Level Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#comprehensive-multi-provider-architecture">
<span class="md-ellipsis">
      Comprehensive Multi-Provider Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#system-architecture-diagrams">
<span class="md-ellipsis">
      System Architecture Diagrams
    </span>
</a>
<nav aria-label="System Architecture Diagrams" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-1-client-and-gateway-layer">
<span class="md-ellipsis">
      Diagram 1: Client and Gateway Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-2-gateway-and-provider-layer">
<span class="md-ellipsis">
      Diagram 2: Gateway and Provider Layer
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#diagram-3-provider-and-external-data-sources">
<span class="md-ellipsis">
      Diagram 3: Provider and External Data Sources
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#request-flow-patterns">
<span class="md-ellipsis">
      Request Flow Patterns
    </span>
</a>
<nav aria-label="Request Flow Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#simplified-request-flow">
<span class="md-ellipsis">
      Simplified Request Flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#core-components">
<span class="md-ellipsis">
      Core Components
    </span>
</a>
<nav aria-label="Core Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-fastapi-application-appmain">
<span class="md-ellipsis">
      1. FastAPI Application (app.main)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-provider-registry-appprovidersregistry">
<span class="md-ellipsis">
      2. Provider Registry (app.providers.registry)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-provider-abstraction-layer-appprovidersbase">
<span class="md-ellipsis">
      3. Provider Abstraction Layer (app.providers.base)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-specialized-providers-appproviders">
<span class="md-ellipsis">
      4. Specialized Providers (app.providers.*)
    </span>
</a>
<nav aria-label="4. Specialized Providers (app.providers.*)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#riot-api-provider">
<span class="md-ellipsis">
      Riot API Provider
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-dragon-provider">
<span class="md-ellipsis">
      Data Dragon Provider
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#community-dragon-provider">
<span class="md-ellipsis">
      Community Dragon Provider
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-rate-limiter-appriotrate_limiter">
<span class="md-ellipsis">
      3. Rate Limiter (app.riot.rate_limiter)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-redis-cache-appcacheredis_cache">
<span class="md-ellipsis">
      4. Redis Cache (app.cache.redis_cache)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-match-tracking-appcachetracking">
<span class="md-ellipsis">
      5. Match Tracking (app.cache.tracking)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#api-router-architecture">
<span class="md-ellipsis">
      API Router Architecture
    </span>
</a>
<nav aria-label="API Router Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#router-organization">
<span class="md-ellipsis">
      Router Organization
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#router-responsibilities">
<span class="md-ellipsis">
      Router Responsibilities
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-router-structure">
<span class="md-ellipsis">
      Example Router Structure
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-flow-architecture">
<span class="md-ellipsis">
      Data Flow Architecture
    </span>
</a>
<nav aria-label="Data Flow Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#request-processing-flow">
<span class="md-ellipsis">
      Request Processing Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#caching-strategy">
<span class="md-ellipsis">
      Caching Strategy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling-flow">
<span class="md-ellipsis">
      Error Handling Flow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-architecture">
<span class="md-ellipsis">
      Configuration Architecture
    </span>
</a>
<nav aria-label="Configuration Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-hierarchy">
<span class="md-ellipsis">
      Configuration Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration-management">
<span class="md-ellipsis">
      Configuration Management
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-architecture">
<span class="md-ellipsis">
      Performance Architecture
    </span>
</a>
<nav aria-label="Performance Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-optimizations">
<span class="md-ellipsis">
      Performance Optimizations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scalability-considerations">
<span class="md-ellipsis">
      Scalability Considerations
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#security-architecture">
<span class="md-ellipsis">
      Security Architecture
    </span>
</a>
<nav aria-label="Security Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#security-layers">
<span class="md-ellipsis">
      Security Layers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices">
<span class="md-ellipsis">
      Best Practices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring-and-observability">
<span class="md-ellipsis">
      Monitoring and Observability
    </span>
</a>
<nav aria-label="Monitoring and Observability" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#health-checks">
<span class="md-ellipsis">
      Health Checks
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#logging-strategy">
<span class="md-ellipsis">
      Logging Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-decisions">
<span class="md-ellipsis">
      Architecture Decisions
    </span>
</a>
<nav aria-label="Architecture Decisions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-1-three-provider-architecture">
<span class="md-ellipsis">
      Decision 1: Three-Provider Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-2-aiolimiter-library-for-rate-limiting">
<span class="md-ellipsis">
      Decision 2: aiolimiter Library for Rate Limiting
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-3-aiocache-library-for-caching">
<span class="md-ellipsis">
      Decision 3: aiocache Library for Caching
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-4-pydantic-v2-for-input-validation">
<span class="md-ellipsis">
      Decision 4: Pydantic V2 for Input Validation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-5-stateless-design">
<span class="md-ellipsis">
      Decision 5: Stateless Design
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#decision-6-direct-router-implementation-over-decorators">
<span class="md-ellipsis">
      Decision 6: Direct router implementation over decorators
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#design-principles">
<span class="md-ellipsis">
      Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-deployment">
<span class="md-ellipsis">
      Production Deployment
    </span>
</a>
<nav aria-label="Production Deployment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#deployment-architecture">
<span class="md-ellipsis">
      Deployment Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-requirements">
<span class="md-ellipsis">
      Production Requirements
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scaling-considerations">
<span class="md-ellipsis">
      Scaling Considerations
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">¬∂</a></h1>
<p>This section provides a comprehensive overview of the LOLStonks API Gateway architecture, its components, and design principles.</p>
<h2 id="architecture-navigation">Architecture Navigation<a class="headerlink" href="#architecture-navigation" title="Permanent link">¬∂</a></h2>
<p>This overview has been restructured into <strong>focused, interactive diagrams</strong> for better readability and navigation:</p>
<h3 id="core-architecture-diagrams">Core Architecture Diagrams<a class="headerlink" href="#core-architecture-diagrams" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong><a href="../system-overview/">System Overview</a></strong> - High-level system architecture with all major components</li>
<li><strong><a href="../data-flow/">Data Flow Architecture</a></strong> - Detailed request processing and caching flow</li>
<li><strong><a href="providers.md">Provider Architecture</a></strong> - Multi-provider abstraction layer</li>
<li><strong><a href="../../operations/security/">Security &amp; Error Handling</a></strong> - Security layers and error recovery</li>
<li><strong><a href="../routing/">Router Architecture</a></strong> - API routing and regional management</li>
<li><strong><a href="production-deployment.md">Production Deployment</a></strong> - Production-ready deployment architecture</li>
</ol>
<h3 id="interactive-features">Interactive Features<a class="headerlink" href="#interactive-features" title="Permanent link">¬∂</a></h3>
<p>All diagrams now include:
- <strong>üîç Zoom and pan controls</strong> - Navigate large diagrams easily
- <strong>üñ±Ô∏è Click interactions</strong> - Click nodes for detailed information
- <strong>üì± Responsive design</strong> - Works on mobile and desktop
- <strong>‚õ∂ Fullscreen mode</strong> - Immersive diagram exploration
- <strong>‚ö° Performance annotations</strong> - Real-world timing and scaling data</p>
<hr/>
<h2 id="multi-source-architecture">Multi-Source Architecture<a class="headerlink" href="#multi-source-architecture" title="Permanent link">¬∂</a></h2>
<p>The LOLStonks API Gateway has evolved into a <strong>comprehensive data integration platform</strong> supporting three distinct data sources:</p>
<h3 id="supported-providers">Supported Providers<a class="headerlink" href="#supported-providers" title="Permanent link">¬∂</a></h3>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Type</th>
<th>Endpoints</th>
<th>Auth Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Riot API</strong></td>
<td>Live Data</td>
<td>40+</td>
<td>‚úÖ Yes</td>
<td>Real-time game data from Riot Developer Portal</td>
</tr>
<tr>
<td><strong>Data Dragon</strong></td>
<td>Static Data</td>
<td>14</td>
<td>‚ùå No</td>
<td>Static game assets from Riot's CDN</td>
</tr>
<tr>
<td><strong>Community Dragon</strong></td>
<td>Enhanced Static</td>
<td>22</td>
<td>‚ùå No</td>
<td>Community-maintained enhanced data</td>
</tr>
</tbody>
</table>
<p><strong>Total: 76+ endpoints with comprehensive API coverage</strong></p>
<h3 id="provider-abstraction-layer">Provider Abstraction Layer<a class="headerlink" href="#provider-abstraction-layer" title="Permanent link">¬∂</a></h3>
<p>All providers implement a common <code>BaseProvider</code> interface, enabling consistent interaction patterns:</p>
<pre><code class="language-python">class BaseProvider(ABC):
    @abstractmethod
    async def get(self, path: str, params: dict, headers: dict):
        """Make API request to the provider."""

    @abstractmethod
    async def health_check(self) -&gt; bool:
        """Check provider availability."""

    @property
    @abstractmethod
    def provider_type(self) -&gt; ProviderType:
        """Return the provider type."""
</code></pre>
<h3 id="provider-registry">Provider Registry<a class="headerlink" href="#provider-registry" title="Permanent link">¬∂</a></h3>
<p>The <code>ProviderRegistry</code> singleton manages all provider instances and enables dynamic provider lookup:</p>
<pre><code class="language-python">from app.providers.registry import get_provider
from app.providers.base import ProviderType

# Get specific provider
riot_provider = get_provider(ProviderType.RIOT_API)
ddragon_provider = get_provider(ProviderType.DATA_DRAGON)
</code></pre>
<h2 id="high-level-architecture">High-Level Architecture<a class="headerlink" href="#high-level-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="comprehensive-multi-provider-architecture">Comprehensive Multi-Provider Architecture<a class="headerlink" href="#comprehensive-multi-provider-architecture" title="Permanent link">¬∂</a></h3>
<p>The LOLStonks API Gateway v2.0 has evolved into a comprehensive data integration platform supporting three distinct data sources with unified access patterns.</p>
<h3 id="system-architecture-diagrams">System Architecture Diagrams<a class="headerlink" href="#system-architecture-diagrams" title="Permanent link">¬∂</a></h3>
<h4 id="diagram-1-client-and-gateway-layer">Diagram 1: Client and Gateway Layer<a class="headerlink" href="#diagram-1-client-and-gateway-layer" title="Permanent link">¬∂</a></h4>
<div class="mermaid">graph TB
    Client[Client Applications] --&gt; Gateway[FastAPI Gateway]
    Gateway --&gt; RateLimiter[Rate Limiter]
    Gateway --&gt; Cache[Redis Cache]
    Gateway --&gt; Routes[API Routes]
    Gateway --&gt; Health[Health Monitor]

    Cache --&gt; Redis[(Redis Server)]
    Health --&gt; Redis
</div>
<h4 id="diagram-2-gateway-and-provider-layer">Diagram 2: Gateway and Provider Layer<a class="headerlink" href="#diagram-2-gateway-and-provider-layer" title="Permanent link">¬∂</a></h4>
<div class="mermaid">graph TB
    Gateway[FastAPI Gateway] --&gt; Registry[Provider Registry]

    Registry --&gt; Riot[Riot API Provider&lt;br/&gt;40+ endpoints]
    Registry --&gt; DDragon[Data Dragon Provider&lt;br/&gt;14 endpoints]
    Registry --&gt; CDragon[Community Dragon Provider&lt;br/&gt;22 endpoints]

    Riot --&gt; Validation[Input Validation]
    DDragon --&gt; Validation
    CDragon --&gt; Validation
</div>
<h4 id="diagram-3-provider-and-external-data-sources">Diagram 3: Provider and External Data Sources<a class="headerlink" href="#diagram-3-provider-and-external-data-sources" title="Permanent link">¬∂</a></h4>
<div class="mermaid">graph TB
    Riot[Riot API Provider] --&gt; RiotAPI[Riot Developer API&lt;br/&gt;Live Game Data]
    DDragon[Data Dragon Provider] --&gt; DDragonCDN[Data Dragon CDN&lt;br/&gt;Static Game Data]
    CDragon[Community Dragon Provider] --&gt; CDragonAPI[Community Dragon API&lt;br/&gt;Enhanced Assets]

    RiotAPI --&gt; RateLimit[Rate Limited]
    DDragonCDN --&gt; Public[Public CDN]
    CDragonAPI --&gt; Public
</div>
<h3 id="request-flow-patterns">Request Flow Patterns<a class="headerlink" href="#request-flow-patterns" title="Permanent link">¬∂</a></h3>
<h4 id="simplified-request-flow">Simplified Request Flow<a class="headerlink" href="#simplified-request-flow" title="Permanent link">¬∂</a></h4>
<div class="mermaid">flowchart TD
    %% Request Phase
    subgraph RequestPhase["Request Phase"]
        Client["Client Application&lt;br/&gt;Web Mobile CLI"]
        Gateway["API Gateway&lt;br/&gt;Request Entry Point"]
    end

    %% Rate Limiting Phase
    subgraph RateLimitingPhase["Rate Limiting Phase"]
        RateLimiter["Rate Limiter&lt;br/&gt;Token Bucket Algorithm"]
        RateDecision{"Rate Limit Check"}
    end

    %% Caching Phase
    subgraph CachingPhase["Caching Phase"]
        Cache["Redis Cache&lt;br/&gt;Multi-layer Storage"]
        CacheDecision{"Cache Hit Miss"}
    end

    %% Data Processing Phase
    subgraph ProcessingPhase["Data Processing Phase"]
        ProviderRegistry["Provider Registry&lt;br/&gt;Dynamic Selection"]
        DataProvider["Data Provider&lt;br/&gt;Riot DDragon CDragon"]
        ExternalAPI["External API&lt;br/&gt;Data Source"]
    end

    %% Response Phase
    subgraph ResponsePhase["Response Phase"]
        StoreCache["Store in Cache&lt;br/&gt;TTL-based Storage"]
        Response["Formatted Response&lt;br/&gt;JSON API Format"]
        ClientResponse["Client Response&lt;br/&gt;HTTP 200 4xx 5xx"]
    end

    %% Error Handling Paths
    subgraph ErrorPaths["Error Handling"]
        RateLimitError["429 Too Many Requests&lt;br/&gt;Retry-After Header"]
        APIError["5xx API Error&lt;br/&gt;Service Unavailable"]
        ValidationError["4xx Validation Error&lt;br/&gt;Invalid Parameters"]
    end

    %% Primary Request Flow
    Client --&gt; |HTTPS Request| Gateway
    Gateway --&gt; |Rate Limit Validation| RateLimiter
    RateLimiter --&gt; |Check Available Tokens| RateDecision

    %% Rate Limit Decision
    RateDecision --&gt; |Within Limits| Gateway
    RateDecision --&gt; |Rate Limited| RateLimitError
    RateLimitError --&gt; |429 Response| ClientResponse

    %% Cache Flow
    Gateway --&gt; |Cache Check| Cache
    Cache --&gt; |Lookup by Key| CacheDecision

    %% Cache Decision
    CacheDecision --&gt; |Cache Hit| Response
    CacheDecision --&gt; |Cache Miss| Gateway

    %% Data Processing (Cache Miss Path)
    Gateway --&gt; |Provider Selection| ProviderRegistry
    ProviderRegistry --&gt; |Route to Provider| DataProvider
    DataProvider --&gt; |API Call| ExternalAPI
    ExternalAPI --&gt; |Raw Data Response| Gateway

    %% Error Handling from External API
    ExternalAPI -.-&gt; |API Failure| APIError
    APIError --&gt; |5xx Response| ClientResponse

    %% Validation Errors
    Gateway -.-&gt; |Invalid Request| ValidationError
    ValidationError --&gt; |4xx Response| ClientResponse

    %% Successful Response Path
    Gateway --&gt; |Store for Future| StoreCache
    StoreCache --&gt; |TTL-based Storage| Cache
    Gateway --&gt; |Transform and Format| Response
    Response --&gt; |Final Response| ClientResponse

    %% Direct Cache Hit Path
    CacheDecision --&gt; |Direct Response| Response

    %% Professional Styling
    classDef clientStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#0d47a1
    classDef gatewayStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#4a148c
    classDef processingStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#1b5e20
    classDef cacheStyle fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#e65100
    classDef errorStyle fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#b71c1c

    class Client,ClientResponse clientStyle
    class Gateway,Response gatewayStyle
    class RateLimiter,ProviderRegistry,DataProvider,ExternalAPI,StoreCache processingStyle
    class Cache cacheStyle
    class RateLimitError,APIError,ValidationError errorStyle
</div>
<h2 id="core-components">Core Components<a class="headerlink" href="#core-components" title="Permanent link">¬∂</a></h2>
<h3 id="1-fastapi-application-appmain">1. FastAPI Application (<code>app.main</code>)<a class="headerlink" href="#1-fastapi-application-appmain" title="Permanent link">¬∂</a></h3>
<p>The main entry point that provides:
- <strong>Async HTTP server</strong> with automatic documentation
- <strong>Request routing</strong> to appropriate API endpoints
- <strong>Middleware</strong> for request processing and error handling
- <strong>OpenAPI specification</strong> generation</p>
<p><strong>Key Features:</strong>
- Automatic request/response validation
- Interactive API documentation (Swagger UI, ReDoc)
- High performance async request handling
- Built-in support for CORS, middleware, and dependency injection</p>
<h3 id="2-provider-registry-appprovidersregistry">2. Provider Registry (<code>app.providers.registry</code>)<a class="headerlink" href="#2-provider-registry-appprovidersregistry" title="Permanent link">¬∂</a></h3>
<p>Central management system for all data source providers:</p>
<pre><code class="language-python">class ProviderRegistry:
    """
    Singleton registry for managing all data providers.

    Features:
    - Dynamic provider registration
    - Provider lifecycle management
    - Health monitoring for all providers
    - Unified interface for multi-provider support
    """
</code></pre>
<p><strong>Provider Types:</strong>
- <strong>Riot API Provider</strong>: Live game data, match history, summoner information
- <strong>Data Dragon Provider</strong>: Static game data (champions, items, runes)
- <strong>Community Dragon Provider</strong>: Enhanced static data with additional assets</p>
<h3 id="3-provider-abstraction-layer-appprovidersbase">3. Provider Abstraction Layer (<code>app.providers.base</code>)<a class="headerlink" href="#3-provider-abstraction-layer-appprovidersbase" title="Permanent link">¬∂</a></h3>
<p>Common interface for all data providers:</p>
<pre><code class="language-python">class BaseProvider(ABC):
    @abstractmethod
    async def get(self, path: str, params: dict, headers: dict):
        """Make API request to the provider."""

    @abstractmethod
    async def health_check(self) -&gt; ProviderHealth:
        """Check provider availability and performance."""

    @property
    @abstractmethod
    def provider_type(self) -&gt; ProviderType:
        """Return the provider type identifier."""
</code></pre>
<h3 id="4-specialized-providers-appproviders">4. Specialized Providers (<code>app.providers.*</code>)<a class="headerlink" href="#4-specialized-providers-appproviders" title="Permanent link">¬∂</a></h3>
<h4 id="riot-api-provider">Riot API Provider<a class="headerlink" href="#riot-api-provider" title="Permanent link">¬∂</a></h4>
<ul>
<li><strong>Authentication</strong>: API key management and rotation</li>
<li><strong>Rate Limiting</strong>: Token bucket algorithm compliant with Riot's limits</li>
<li><strong>Retry Logic</strong>: Exponential backoff for 429 responses</li>
<li><strong>Region Management</strong>: Dynamic routing to regional endpoints</li>
</ul>
<h4 id="data-dragon-provider">Data Dragon Provider<a class="headerlink" href="#data-dragon-provider" title="Permanent link">¬∂</a></h4>
<ul>
<li><strong>CDN Integration</strong>: Direct access to Riot's static asset CDN</li>
<li><strong>Version Management</strong>: Support for multiple game versions</li>
<li><strong>Language Support</strong>: Multi-language static data</li>
<li><strong>Cache Optimization</strong>: Long-term caching for immutable data</li>
</ul>
<h4 id="community-dragon-provider">Community Dragon Provider<a class="headerlink" href="#community-dragon-provider" title="Permanent link">¬∂</a></h4>
<ul>
<li><strong>Enhanced Assets</strong>: Access to community-maintained enhanced data</li>
<li><strong>TFT Support</strong>: Teamfight Tactics data and assets</li>
<li><strong>High-Quality Media</strong>: Superior image and audio assets</li>
<li><strong>Extended Information</strong>: Additional game metadata</li>
</ul>
<h3 id="3-rate-limiter-appriotrate_limiter">3. Rate Limiter (<code>app.riot.rate_limiter</code>)<a class="headerlink" href="#3-rate-limiter-appriotrate_limiter" title="Permanent link">¬∂</a></h3>
<p>Implements sophisticated rate limiting using the token bucket algorithm. For detailed rate limiting documentation, see <a href="../rate-limiting/">Rate Limiting Architecture</a>.</p>
<pre><code class="language-python">class RateLimiter:
    """
    Token bucket rate limiter for Riot API compliance.

    - Configurable requests per second (RPS)
    - Burst capacity handling
    - Automatic token refill
    """
</code></pre>
<p><strong>Algorithm:</strong>
- <strong>Tokens</strong>: Available request capacity
- <strong>Refill Rate</strong>: Tokens added per second
- <strong>Burst Capacity</strong>: Maximum token accumulation
- <strong>Wait Strategy</strong>: Queue requests when tokens exhausted</p>
<h3 id="4-redis-cache-appcacheredis_cache">4. Redis Cache (<code>app.cache.redis_cache</code>)<a class="headerlink" href="#4-redis-cache-appcacheredis_cache" title="Permanent link">¬∂</a></h3>
<p>High-performance caching layer. For detailed caching documentation, see <a href="../caching/">Caching Architecture</a>.</p>
<pre><code class="language-python">class RedisCache:
    """
    Redis-based caching with TTL support.

    - Automatic TTL management
    - Connection pooling
    - Error handling and fallbacks
    """
</code></pre>
<p><strong>Cache Strategy:</strong>
- <strong>TTL-based Expiration</strong>: Different TTLs per data type
- <strong>Intelligent Key Generation</strong>: Consistent cache key patterns
- <strong>Connection Pooling</strong>: Efficient Redis connection management
- <strong>Graceful Degradation</strong>: Continue operation when cache unavailable</p>
<h3 id="5-match-tracking-appcachetracking">5. Match Tracking (<code>app.cache.tracking</code>)<a class="headerlink" href="#5-match-tracking-appcachetracking" title="Permanent link">¬∂</a></h3>
<p>Prevents duplicate match processing:</p>
<pre><code class="language-python">class MatchTracker:
    """
    Match tracking service to prevent duplicate processing.

    - TTL cache for recent matches
    - Persistent set for all processed matches
    - Automatic cleanup of expired entries
    """
</code></pre>
<p><strong>Dual Storage Approach:</strong>
- <strong>TTL Cache</strong>: Fast lookup for recent matches (1 week)
- <strong>Persistent Set</strong>: Complete record of all processed matches
- <strong>Automatic Cleanup</strong>: Removal of expired TTL entries</p>
<h2 id="api-router-architecture">API Router Architecture<a class="headerlink" href="#api-router-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="router-organization">Router Organization<a class="headerlink" href="#router-organization" title="Permanent link">¬∂</a></h3>
<div class="mermaid">flowchart TD
    %% Gateway Entry
    subgraph GatewayEntry["API Gateway Entry"]
        FastAPI["FastAPI Core&lt;br/&gt;HTTP/2 Ready"]
        Middleware["Middleware Pipeline&lt;br/&gt;Auth CORS Logging"]
        RouterRegistry["Router Registry&lt;br/&gt;Dynamic Route Loading"]
    end

    %% API Route Categories
    subgraph RouteCategories["API Route Categories"]
        subgraph GameRoutes["Game-Specific Routes&lt;br/&gt;Riot Data Endpoints"]
            SummonerRouter["Summoner&lt;br/&gt;/summoner/v4/*&lt;br/&gt;6 endpoints"]
            MatchRouter["Match&lt;br/&gt;/match/v5/*&lt;br/&gt;8 endpoints"]
            LeagueRouter["League&lt;br/&gt;/league/v4/*&lt;br/&gt;5 endpoints"]
            MasteryRouter["Champion Mastery&lt;br/&gt;/champion-mastery/v4/*&lt;br/&gt;4 endpoints"]
            SpectatorRouter["Spectator&lt;br/&gt;/spectator/v5/*&lt;br/&gt;2 endpoints"]
        end

        subgraph AccountRoutes["Account Identity Routes&lt;br/&gt;Riot ID System"]
            AccountRouter["Account&lt;br/&gt;/account/v1/*&lt;br/&gt;3 endpoints"]
            ClashRouter["Clash&lt;br/&gt;/clash/v1/*&lt;br/&gt;2 endpoints"]
        end

        subgraph DataRoutes["Static Data Routes&lt;br/&gt;Champion Game Data"]
            ChampionRouter["Champion&lt;br/&gt;/champion/v3/*&lt;br/&gt;2 endpoints"]
            ChallengesRouter["Challenges&lt;br/&gt;/challenges/v1/*&lt;br/&gt;2 endpoints"]
        end

        subgraph SystemRoutes["System Utility Routes&lt;br/&gt;Gateway Management"]
            PlatformRouter["Platform&lt;br/&gt;/lol-status/v4/*&lt;br/&gt;1 endpoint"]
            HealthRouter["Health&lt;br/&gt;/health&lt;br/&gt;2 endpoints"]
            MetricsRouter["Metrics&lt;br/&gt;/metrics&lt;br/&gt;1 endpoint"]
        end
    end

    %% Request Processing Pipeline
    subgraph RequestPipeline["Request Processing Pipeline"]
        InputValidation["Input Validation&lt;br/&gt;Pydantic Models"]
        RateLimiting["Rate Limiting&lt;br/&gt;Per-endpoint Limits"]
        ResponseCaching["Response Caching&lt;br/&gt;TTL-based Storage"]
        ProviderSelection["Provider Selection&lt;br/&gt;Dynamic Routing"]
        ResponseFormatting["Response Formatting&lt;br/&gt;Standard JSON Format"]
    end

    %% Connections
    FastAPI --&gt; Middleware
    Middleware --&gt; RouterRegistry

    RouterRegistry --&gt; GameRoutes
    RouterRegistry --&gt; AccountRoutes
    RouterRegistry --&gt; DataRoutes
    RouterRegistry --&gt; SystemRoutes

    %% Individual Route Connections
    GameRoutes --&gt; SummonerRouter
    GameRoutes --&gt; MatchRouter
    GameRoutes --&gt; LeagueRouter
    GameRoutes --&gt; MasteryRouter
    GameRoutes --&gt; SpectatorRouter

    AccountRoutes --&gt; AccountRouter
    AccountRoutes --&gt; ClashRouter

    DataRoutes --&gt; ChampionRouter
    DataRoutes --&gt; ChallengesRouter

    SystemRoutes --&gt; PlatformRouter
    SystemRoutes --&gt; HealthRouter
    SystemRoutes --&gt; MetricsRouter

    %% Processing Pipeline
    Middleware --&gt; RequestPipeline
    RequestPipeline --&gt; InputValidation
    InputValidation --&gt; RateLimiting
    RateLimiting --&gt; ResponseCaching
    ResponseCaching --&gt; ProviderSelection
    ProviderSelection --&gt; ResponseFormatting

    %% Simplified Styling
    classDef gatewayStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#0d47a1
    classDef routeStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#4a148c
    classDef endpointStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#1b5e20
    classDef systemStyle fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#e65100
    classDef processingStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#880e4f

    class FastAPI,Middleware,RouterRegistry gatewayStyle
    class GameRoutes,AccountRoutes,DataRoutes,SystemRoutes routeStyle
    class SummonerRouter,MatchRouter,LeagueRouter,MasteryRouter,SpectatorRouter,AccountRouter,ClashRouter,ChampionRouter,ChallengesRouter,PlatformRouter,HealthRouter,MetricsRouter endpointStyle
    class InputValidation,RateLimiting,ResponseCaching,ProviderSelection,ResponseFormatting processingStyle
</div>
<h3 id="router-responsibilities">Router Responsibilities<a class="headerlink" href="#router-responsibilities" title="Permanent link">¬∂</a></h3>
<p>For detailed model documentation, see <a href="../models/">Data Models &amp; Validation</a>.</p>
<p>Each router handles:
- <strong>Path Parameter Validation</strong>: Pydantic models for route parameters
- <strong>Query Parameter Handling</strong>: Optional parameters and defaults
- <strong>Response Transformation</strong>: Standardized response format
- <strong>Error Handling</strong>: Consistent error responses
- <strong>Caching Integration</strong>: Automatic cache integration per endpoint</p>
<h3 id="example-router-structure">Example Router Structure<a class="headerlink" href="#example-router-structure" title="Permanent link">¬∂</a></h3>
<pre><code class="language-python"># app/routers/summoner.py
router = APIRouter(prefix="/summoner", tags=["summoner"])

@router.get("/by-name/{summonerName}")
async def get_summoner_by_name(
    summonerName: str,
    region: str = Query(default="euw1"),
    riot_client: RiotClient = Depends(),
    cache: RedisCache = Depends()
) -&gt; SummonerDto:
    """Get summoner by summoner name."""
    # Implementation with caching and error handling
</code></pre>
<h2 id="data-flow-architecture">Data Flow Architecture<a class="headerlink" href="#data-flow-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="request-processing-flow">Request Processing Flow<a class="headerlink" href="#request-processing-flow" title="Permanent link">¬∂</a></h3>
<div class="mermaid">sequenceDiagram
    participant Client as Client Application&lt;br/&gt;Web Mobile CLI
    participant Gateway as API Gateway&lt;br/&gt;FastAPI Core
    participant RateLimiter as Rate Limiter&lt;br/&gt;Token Bucket (20/s)
    participant Cache as Redis Cache&lt;br/&gt;TTL Storage
    participant Validation as Input Validator&lt;br/&gt;Pydantic Models
    participant Provider as Provider Registry&lt;br/&gt;Dynamic Selection
    participant RiotClient as Riot HTTP Client&lt;br/&gt;Authenticated API Calls
    participant RiotAPI as Riot Developer API&lt;br/&gt;Rate Limited: 20/s

    %% Initial Request Phase
    Client-&gt;&gt;+Gateway: HTTPS Request&lt;br/&gt;GET /summoner/v4/summoners/by-name/{name}
    Gateway-&gt;&gt;+Validation: Validate Input&lt;br/&gt;Parameters, Headers, Auth

    alt Validation Failed
        Validation--&gt;&gt;-Gateway: ValidationError&lt;br/&gt;400 Bad Request
        Gateway--&gt;&gt;-Client: HTTP 400&lt;br/&gt;Invalid Parameters
    else Validation Passed
        Validation--&gt;&gt;-Gateway: ValidationOK&lt;br/&gt;Sanitized Request
        Gateway-&gt;&gt;+RateLimiter: Check Rate Limits&lt;br/&gt;Token Bucket Check

        alt Rate Limit Exceeded
            RateLimiter--&gt;&gt;-Gateway: RateLimited&lt;br/&gt;429 Too Many Requests
            Gateway--&gt;&gt;-Client: HTTP 429&lt;br/&gt;Retry-After: X seconds
        else Rate Limit OK
            RateLimiter--&gt;&gt;-Gateway: RateLimitOK&lt;br/&gt;Token Consumed
            Gateway-&gt;&gt;+Cache: Check Cache&lt;br/&gt;lol:summoner:euw1:{name}

            alt Cache Hit
                Cache--&gt;&gt;-Gateway: CacheHit&lt;br/&gt;Cached Data (&lt;5ms)
                Gateway--&gt;&gt;-Client: HTTP 200&lt;br/&gt;Cached Response
                Note over Client,Cache: Fast Path: &lt;10ms total latency
            else Cache Miss
                Cache--&gt;&gt;Gateway: CacheMiss&lt;br/&gt;No Cached Data
                Gateway-&gt;&gt;+Provider: Select Provider&lt;br/&gt;Route to Riot Provider
                Provider--&gt;&gt;-Gateway: ProviderSelected&lt;br/&gt;Riot API Provider
                Gateway-&gt;&gt;+RiotClient: Make API Request&lt;br/&gt;With Authentication Headers
                RiotClient-&gt;&gt;+RiotAPI: HTTP GET Request&lt;br/&gt;Authenticated API Call

                alt API Success
                    RiotAPI--&gt;&gt;-RiotClient: HTTP 200 Response&lt;br/&gt;Summoner Data
                    RiotClient--&gt;&gt;-Gateway: ProcessResponse&lt;br/&gt;Transform and Validate
                    Gateway-&gt;&gt;Cache: Store in Cache&lt;br/&gt;TTL: 1 hour
                    Cache--&gt;&gt;-Gateway: StoredSuccessfully&lt;br/&gt;Future Cache Hits
                    Gateway--&gt;&gt;-Client: HTTP 200&lt;br/&gt;Fresh Data Response
                    Note over Client,RiotAPI: Slow Path: 50-200ms total latency
                else API Error
                    RiotAPI--&gt;&gt;-RiotClient: HTTP Error&lt;br/&gt;4xx/5xx Response

                    alt Rate Limited by Riot
                        RiotClient--&gt;&gt;-Gateway: RateLimitedError&lt;br/&gt;429 from Riot API
                        Gateway--&gt;&gt;-Client: HTTP 503&lt;br/&gt;Service Temporarily Unavailable
                        Note over Client,RiotAPI: Retry Logic: Exponential Backoff
                    else Server Error
                        RiotClient--&gt;&gt;-Gateway: ServerError&lt;br/&gt;5xx from Riot API
                        Gateway--&gt;&gt;-Client: HTTP 502&lt;br/&gt;Bad Gateway
                    else Client Error
                        RiotClient--&gt;&gt;-Gateway: ClientError&lt;br/&gt;4xx from Riot API
                        Gateway--&gt;&gt;-Client: HTTP 404&lt;br/&gt;Resource Not Found
                end
                end
            end
        end
    end

    %% Cleanup and Finalization
    Gateway-&gt;&gt;RateLimiter: End Request&lt;br/&gt;Release Resources
    RateLimiter--&gt;&gt;Gateway: Reset State&lt;br/&gt;Ready for Next Request

    %% Performance Notes
    Note over Client,RiotAPI: Performance Characteristics:
    Note over Client,RiotAPI: Cache Hit: &lt;10ms (95% of requests)
    Note over Client,RiotAPI: Cache Miss: 50-200ms (5% of requests)
    Note over Client,RiotAPI: Rate Limit Check: &lt;1ms (every request)
    Note over Client,RiotAPI: Validation: &lt;1ms (every request)
    Note over Client,RiotAPI: Error Rate: &lt;1% (monitoring alert at &gt;5%)
</div>
<h3 id="caching-strategy">Caching Strategy<a class="headerlink" href="#caching-strategy" title="Permanent link">¬∂</a></h3>
<p><strong>Cache Key Pattern:</strong></p>
<pre><code class="language-text">lolstonks:{endpoint}:{region}:{identifier}
</code></pre>
<p><strong>TTL Configuration:</strong>
- <strong>Summoner Data</strong>: 1 hour (relatively stable)
- <strong>Match Data</strong>: 24 hours (historical data)
- <strong>League Data</strong>: 30 minutes (competitive data)
- <strong>Champion Data</strong>: 1 week (static data)</p>
<h3 id="error-handling-flow">Error Handling Flow<a class="headerlink" href="#error-handling-flow" title="Permanent link">¬∂</a></h3>
<div class="mermaid">graph TD
    Request[Request] --&gt; Validate{Valid?}
    Validate --&gt;|No| Error400[400 Bad Request]
    Validate --&gt;|Yes| RateLimit{Rate OK?}

    RateLimit --&gt;|No| Error429[429 Too Many Requests]
    RateLimit --&gt;|Yes| Cache{Cached?}

    Cache --&gt;|Yes| Return[Return Response]
    Cache --&gt;|No| API[Call API]

    API --&gt;|Success| Return
    API --&gt;|Error| Retry[Retry/Error Response]
</div>
<p><strong>Error Handling Strategy:</strong>
- <strong>Validation Errors (400)</strong>: Invalid input parameters
- <strong>Rate Limit Errors (429)</strong>: Client or Riot API rate limits exceeded
- <strong>API Errors</strong>: Automatic retry with exponential backoff for transient failures
- <strong>Not Found (404)</strong>: Passed through from Riot API
- <strong>Timeouts</strong>: Configurable timeout with retry logic</p>
<h2 id="configuration-architecture">Configuration Architecture<a class="headerlink" href="#configuration-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="configuration-hierarchy">Configuration Hierarchy<a class="headerlink" href="#configuration-hierarchy" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Environment Variables</strong>: Primary configuration source</li>
<li><code>.env</code> File: Local development configuration</li>
<li><strong>Defaults</strong>: Built-in fallback values</li>
<li><strong>Runtime</strong>: Dynamic configuration updates</li>
</ol>
<h3 id="configuration-management">Configuration Management<a class="headerlink" href="#configuration-management" title="Permanent link">¬∂</a></h3>
<pre><code class="language-python"># app/config.py
class Settings(BaseSettings):
    """Configuration settings with environment variable support."""

    # Riot API Configuration
    riot_api_key: str
    riot_default_region: str = "euw1"

    # Server Configuration
    host: str = "0.0.0.0"
    port: int = 8080
    log_level: str = "INFO"

    # Redis Configuration
    redis_host: str = "localhost"
    redis_port: int = 6379

    class Config:
        env_file = ".env"
        case_sensitive = False
</code></pre>
<h2 id="performance-architecture">Performance Architecture<a class="headerlink" href="#performance-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="performance-optimizations">Performance Optimizations<a class="headerlink" href="#performance-optimizations" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Async Processing</strong>: Non-blocking I/O throughout the stack</li>
<li><strong>Connection Pooling</strong>: Efficient database and HTTP connections</li>
<li><strong>Intelligent Caching</strong>: Multi-layer caching strategy</li>
<li><strong>Rate Limiting</strong>: Protects against API abuse and ensures compliance</li>
<li><strong>Batch Operations</strong>: Support for concurrent requests</li>
</ol>
<h3 id="scalability-considerations">Scalability Considerations<a class="headerlink" href="#scalability-considerations" title="Permanent link">¬∂</a></h3>
<ul>
<li><strong>Horizontal Scaling</strong>: Stateless design allows multiple instances</li>
<li><strong>Redis Cluster</strong>: Support for distributed caching</li>
<li><strong>Load Balancing</strong>: Compatible with standard load balancers</li>
<li><strong>Monitoring</strong>: Built-in health checks and metrics</li>
</ul>
<h2 id="security-architecture">Security Architecture<a class="headerlink" href="#security-architecture" title="Permanent link">¬∂</a></h2>
<h3 id="security-layers">Security Layers<a class="headerlink" href="#security-layers" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>API Key Management</strong>: Secure storage and rotation of Riot API keys</li>
<li><strong>Input Validation</strong>: Comprehensive request validation using Pydantic</li>
<li><strong>Rate Limiting</strong>: Protection against abuse and DoS attacks</li>
<li><strong>Error Sanitization</strong>: Prevents information leakage in error messages</li>
<li><strong>CORS Configuration</strong>: Configurable cross-origin resource sharing</li>
</ol>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">¬∂</a></h3>
<ul>
<li><strong>Principle of Least Privilege</strong>: Minimal required permissions</li>
<li><strong>Defense in Depth</strong>: Multiple security layers</li>
<li><strong>Secure Defaults</strong>: Secure configuration out of the box</li>
<li><strong>Audit Logging</strong>: Comprehensive request and error logging</li>
</ul>
<h2 id="monitoring-and-observability">Monitoring and Observability<a class="headerlink" href="#monitoring-and-observability" title="Permanent link">¬∂</a></h2>
<h3 id="health-checks">Health Checks<a class="headerlink" href="#health-checks" title="Permanent link">¬∂</a></h3>
<pre><code class="language-python">@app.get("/health")
async def health_check():
    """Comprehensive health check endpoint."""
    return {
        "status": "ok",
        "timestamp": datetime.utcnow(),
        "version": "2.0.0",
        "dependencies": {
            "redis": await check_redis_health(),
            "riot_api": await check_riot_api_health()
        }
    }
</code></pre>
<h3 id="logging-strategy">Logging Strategy<a class="headerlink" href="#logging-strategy" title="Permanent link">¬∂</a></h3>
<ul>
<li><strong>Structured Logging</strong>: JSON-formatted logs for easy parsing</li>
<li><strong>Request Tracking</strong>: Unique request IDs for tracing</li>
<li><strong>Performance Metrics</strong>: Request timing and cache hit rates</li>
<li><strong>Error Tracking</strong>: Comprehensive error logging and alerting</li>
</ul>
<h2 id="architecture-decisions">Architecture Decisions<a class="headerlink" href="#architecture-decisions" title="Permanent link">¬∂</a></h2>
<p>This section documents key architectural decisions and their rationale.</p>
<h3 id="decision-1-three-provider-architecture">Decision 1: Three-Provider Architecture<a class="headerlink" href="#decision-1-three-provider-architecture" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: Support multiple data sources (Riot API, Data Dragon, Community Dragon) through a unified provider abstraction layer.</p>
<p><strong>Rationale</strong>:
- Riot API provides live data but has strict rate limits
- Data Dragon offers static data without rate limits
- Community Dragon provides enhanced assets not available elsewhere
- Provider abstraction allows adding new sources without changing core logic</p>
<p><strong>Trade-offs</strong>:
- Increased complexity vs. single-provider implementation
- Multiple external dependencies vs. simplified architecture
- <strong>Chosen approach</strong>: Complexity justified by comprehensive data access and reduced rate limit pressure</p>
<h3 id="decision-2-aiolimiter-library-for-rate-limiting">Decision 2: aiolimiter Library for Rate Limiting<a class="headerlink" href="#decision-2-aiolimiter-library-for-rate-limiting" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: Use aiolimiter library instead of custom rate limiter implementation.</p>
<p><strong>Rationale</strong>:
- Production-tested token bucket algorithm
- Handles edge cases (concurrent requests, token refill timing)
- Async/await native without threading complexity
- Reduces maintenance burden</p>
<p><strong>Alternatives Considered</strong>:
- Custom token bucket implementation: More control but higher maintenance
- No rate limiting: Unacceptable - would violate Riot API terms
- <strong>Chosen approach</strong>: aiolimiter provides optimal balance of simplicity and reliability</p>
<h3 id="decision-3-aiocache-library-for-caching">Decision 3: aiocache Library for Caching<a class="headerlink" href="#decision-3-aiocache-library-for-caching" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: Use aiocache with Redis backend instead of direct redis-py or custom cache layer.</p>
<p><strong>Rationale</strong>:
- Simple API reduces implementation complexity
- Built-in JSON serialization
- Connection pooling handled automatically
- Namespace support for key isolation</p>
<p><strong>Alternatives Considered</strong>:
- Direct redis-py: More control but requires manual connection pooling and serialization
- Custom cache decorator: Would duplicate aiocache functionality
- <strong>Chosen approach</strong>: aiocache sufficient for current requirements; extend only if needed</p>
<h3 id="decision-4-pydantic-v2-for-input-validation">Decision 4: Pydantic V2 for Input Validation<a class="headerlink" href="#decision-4-pydantic-v2-for-input-validation" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: Use Pydantic models for all endpoint input validation.</p>
<p><strong>Rationale</strong>:
- Type safety catches errors at development time
- Automatic OpenAPI schema generation
- Consistent validation across all endpoints
- Self-documenting API through model definitions</p>
<p><strong>Trade-offs</strong>:
- Additional model definition overhead vs. manual validation
- Learning curve for Pydantic syntax
- <strong>Chosen approach</strong>: Benefits far outweigh overhead; reduces runtime errors significantly</p>
<h3 id="decision-5-stateless-design">Decision 5: Stateless Design<a class="headerlink" href="#decision-5-stateless-design" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: No server-side session state; all state in Redis or external APIs.</p>
<p><strong>Rationale</strong>:
- Enables horizontal scaling without session affinity
- Simplifies deployment (no sticky sessions required)
- Improves fault tolerance (any instance can handle any request)</p>
<p><strong>Implications</strong>:
- All caching must be centralized (Redis)
- No in-memory state between requests
- Rate limiting coordinated through Redis for multi-instance deployments</p>
<h3 id="decision-6-direct-router-implementation-over-decorators">Decision 6: Direct router implementation over decorators<a class="headerlink" href="#decision-6-direct-router-implementation-over-decorators" title="Permanent link">¬∂</a></h3>
<p><strong>Decision</strong>: Use explicit cache.get()/cache.set() calls in routers instead of @cached decorators.</p>
<p><strong>Rationale</strong>:
- Code clarity: cache logic visible in endpoint
- Flexibility: different cache strategies per endpoint
- Debuggability: easier to trace cache behavior
- Simplicity: avoids decorator complexity</p>
<p><strong>Trade-offs</strong>:
- More verbose code vs. decorator magic
- <strong>Chosen approach</strong>: Explicit over implicit aligns with project philosophy</p>
<h2 id="design-principles">Design Principles<a class="headerlink" href="#design-principles" title="Permanent link">¬∂</a></h2>
<p>The LOLStonks API Gateway follows these design principles:</p>
<ol>
<li><strong>Performance First</strong>: Optimized for high throughput and low latency</li>
<li><strong>Developer Experience</strong>: Clear APIs and comprehensive documentation</li>
<li><strong>Reliability</strong>: Graceful degradation and error handling</li>
<li><strong>Observability</strong>: Built-in monitoring and debugging capabilities</li>
<li><strong>Security</strong>: Secure by design with defense in depth</li>
<li><strong>Scalability</strong>: Designed to scale horizontally and vertically</li>
</ol>
<h2 id="production-deployment">Production Deployment<a class="headerlink" href="#production-deployment" title="Permanent link">¬∂</a></h2>
<h3 id="deployment-architecture">Deployment Architecture<a class="headerlink" href="#deployment-architecture" title="Permanent link">¬∂</a></h3>
<p>For production deployments, the API Gateway should be run behind a reverse proxy with proper process management:</p>
<div class="mermaid">flowchart TB
    %% Internet and Edge Services
    subgraph InternetLayer["Internet and Edge Services"]
        Internet["Internet&lt;br/&gt;Global Users"]
        CDN["CDN Provider&lt;br/&gt;CloudFlare AWS"]
        DDoSProtection["DDoS Protection&lt;br/&gt;CloudFlare WAF"]
    end

    %% Load Balancer Layer
    subgraph LoadBalancerLayer["Load Balancer and Security"]
        PrimaryLB["Primary Load Balancer&lt;br/&gt;Nginx HAProxy&lt;br/&gt;Active"]
        BackupLB["Backup Load Balancer&lt;br/&gt;Failover Support&lt;br/&gt;Standby"]
        SSLTermination["SSL Termination&lt;br/&gt;TLS 1.3 Support"]
        WebApplicationFirewall["Web Application Firewall&lt;br/&gt;OWASP Rules"]
    end

    %% Application Cluster
    subgraph ApplicationCluster["API Gateway Cluster&lt;br/&gt;Auto-scaling Group"]
        subgraph InstanceGroup1["Instance Group 1&lt;br/&gt;Primary AZ"]
            Gateway1["Gateway Instance 1&lt;br/&gt;4 CPU, 8GB RAM"]
            Gateway2["Gateway Instance 2&lt;br/&gt;4 CPU, 8GB RAM"]
            Gateway3["Gateway Instance 3&lt;br/&gt;4 CPU, 8GB RAM"]
        end

        subgraph InstanceGroup2["Instance Group 2&lt;br/&gt;Secondary AZ"]
            Gateway4["Gateway Instance 4&lt;br/&gt;4 CPU, 8GB RAM"]
            Gateway5["Gateway Instance 5&lt;br/&gt;4 CPU, 8GB RAM"]
        end

        AutoScaler["Auto Scaler&lt;br/&gt;CPU Memory based&lt;br/&gt;Min: 5, Max: 20"]
        HealthChecker["Health Checker&lt;br/&gt;Grace Period: 30s"]
    end

    %% Data Layer
    subgraph DataLayer["Data and Storage Layer"]
        subgraph RedisCluster["Redis Cluster&lt;br/&gt;High Availability"]
            RedisMaster["Redis Master&lt;br/&gt;Write Operations"]
            RedisReplica1["Redis Replica 1&lt;br/&gt;Read Operations"]
            RedisReplica2["Redis Replica 2&lt;br/&gt;Read Operations"]
        end

        RedisSentinel["Redis Sentinel&lt;br/&gt;Failover Management"]
        CacheWarmer["Cache Warmer&lt;br/&gt;Background Process"]
    end

    %% External Services
    subgraph ExternalServices["External Data Sources"]
        RiotAPI["Riot API&lt;br/&gt;Rate Limited: 20/s&lt;br/&gt;api.riotgames.com"]
        DataDragonCDN["Data Dragon CDN&lt;br/&gt;Static Assets&lt;br/&gt;ddragon.leagueoflegends.com"]
        CommunityDragon["Community Dragon&lt;br/&gt;Enhanced Data&lt;br/&gt;communitydragon.org"]
    end

    %% Monitoring Stack
    subgraph MonitoringStack["Monitoring and Observability"]
        subgraph MetricsCollection["Metrics Collection"]
            Prometheus["Prometheus&lt;br/&gt;Time Series DB&lt;br/&gt;Retention: 30 days"]
            CustomExporter["Custom Exporter&lt;br/&gt;Gateway Metrics"]
        end

        subgraph Visualization["Visualization and Alerting"]
            Grafana["Grafana&lt;br/&gt;Real-time Dashboards"]
            AlertManager["Alert Manager&lt;br/&gt;Slack Email Alerts"]
        end

        subgraph Logging["Centralized Logging"]
            LogAggregator["ELK Stack&lt;br/&gt;Elasticsearch Kibana"]
            LogShipper["Log Shipper&lt;br/&gt;Filebeat Fluentd"]
        end
    end

    %% Connection Flow
    Internet --&gt; CDN
    CDN --&gt; DDoSProtection
    DDoSProtection --&gt; PrimaryLB
    PrimaryLB --&gt; |SSL Termination| SSLTermination
    PrimaryLB --&gt; |WAF Rules| WebApplicationFirewall

    %% Load Balancer to Application
    PrimaryLB --&gt; |Round Robin| InstanceGroup1
    PrimaryLB --&gt; |Round Robin| InstanceGroup2
    BackupLB -.-&gt; |Failover Only| InstanceGroup1
    BackupLB -.-&gt; |Failover Only| InstanceGroup2

    %% Application to Data Layer
    Gateway1 --&gt; |Redis Client| RedisMaster
    Gateway2 --&gt; |Redis Client| RedisMaster
    Gateway3 --&gt; |Redis Client| RedisMaster
    Gateway4 --&gt; |Redis Client| RedisMaster
    Gateway5 --&gt; |Redis Client| RedisMaster

    Gateway1 --&gt; |Read Operations| RedisReplica1
    Gateway2 --&gt; |Read Operations| RedisReplica1
    Gateway3 --&gt; |Read Operations| RedisReplica2
    Gateway4 --&gt; |Read Operations| RedisReplica2
    Gateway5 --&gt; |Read Operations| RedisReplica2

    %% Redis High Availability
    RedisMaster --&gt; |Replication| RedisReplica1
    RedisMaster --&gt; |Replication| RedisReplica2
    RedisSentinel --&gt; |Health Checks| RedisMaster
    RedisSentinel --&gt; |Health Checks| RedisReplica1
    RedisSentinel --&gt; |Health Checks| RedisReplica2

    %% External API Connections
    Gateway1 --&gt; |HTTP/2 Calls| RiotAPI
    Gateway2 --&gt; |HTTP/2 Calls| RiotAPI
    Gateway3 --&gt; |CDN Access| DataDragonCDN
    Gateway4 --&gt; |API Calls| CommunityDragon
    Gateway5 --&gt; |API Calls| CommunityDragon

    %% Monitoring Connections
    Gateway1 --&gt; |Metrics| CustomExporter
    Gateway2 --&gt; |Metrics| CustomExporter
    Gateway3 --&gt; |Metrics| CustomExporter
    Gateway4 --&gt; |Metrics| CustomExporter
    Gateway5 --&gt; |Metrics| CustomExporter
    CustomExporter --&gt; |Scrape| Prometheus

    Gateway1 --&gt; |Logs| LogShipper
    Gateway2 --&gt; |Logs| LogShipper
    Gateway3 --&gt; |Logs| LogShipper
    Gateway4 --&gt; |Logs| LogShipper
    Gateway5 --&gt; |Logs| LogShipper
    LogShipper --&gt; |Index| LogAggregator

    %% Monitoring Stack
    Prometheus --&gt; |Data Source| Grafana
    Prometheus --&gt; |Alert Rules| AlertManager
    LogAggregator --&gt; |Data Source| Grafana

    %% Auto Scaling
    AutoScaler --&gt; |Scale Events| InstanceGroup1
    AutoScaler --&gt; |Scale Events| InstanceGroup2
    HealthChecker --&gt; |Health Status| PrimaryLB
    HealthChecker --&gt; |Health Status| AutoScaler

    %% Professional Styling
    classDef internetStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#0d47a1
    classDef lbStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#4a148c
    classDef appStyle fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#1b5e20
    classDef dataStyle fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#e65100
    classDef externalStyle fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#b71c1c
    classDef monitorStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#4a148c

    class Internet,CDN,DDoSProtection internetStyle
    class PrimaryLB,BackupLB,SSLTermination,WebApplicationFirewall lbStyle
    class Gateway1,Gateway2,Gateway3,Gateway4,Gateway5,AutoScaler,HealthChecker appStyle
    class RedisMaster,RedisReplica1,RedisReplica2,RedisSentinel,CacheWarmer dataStyle
    class RiotAPI,DataDragonCDN,CommunityDragon externalStyle
    class Prometheus,CustomExporter,Grafana,AlertManager,LogAggregator,LogShipper monitorStyle

    %% Performance Annotations
    PrimaryLB -.-&gt; |&lt;1ms routing| InstanceGroup1
    PrimaryLB -.-&gt; |&lt;1ms routing| InstanceGroup2
    RedisMaster -.-&gt; |&lt;2ms operations| Gateway1
    Prometheus -.-&gt; |30s scrape interval| CustomExporter
</div>
<h3 id="production-requirements">Production Requirements<a class="headerlink" href="#production-requirements" title="Permanent link">¬∂</a></h3>
<ol>
<li><strong>Process Management</strong>: Use systemd, supervisor, or similar process manager</li>
<li><strong>Reverse Proxy</strong>: Nginx or similar for SSL termination and load balancing</li>
<li><strong>Environment Variables</strong>: Secure configuration management for API keys</li>
<li><strong>Monitoring</strong>: Health checks, metrics collection, and alerting</li>
<li><strong>Logging</strong>: Centralized log aggregation and analysis</li>
<li><strong>Security</strong>: Firewall, rate limiting, and access controls</li>
</ol>
<h3 id="scaling-considerations">Scaling Considerations<a class="headerlink" href="#scaling-considerations" title="Permanent link">¬∂</a></h3>
<ul>
<li><strong>Horizontal Scaling</strong>: Stateless design enables multiple instances</li>
<li><strong>Redis Cluster</strong>: Distributed caching for high availability</li>
<li><strong>Database Connection Pooling</strong>: Efficient resource utilization</li>
<li><strong>Circuit Breakers</strong>: Fault tolerance for external dependencies</li>
</ul>
<p>This architecture provides a solid foundation for a production-ready API Gateway that can handle high traffic while maintaining reliability and performance.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script>
        // Enhanced Mermaid Interactivity for LOLStonks Documentation
        (function() {
            'use strict';

            console.log('Initializing Mermaid interactivity...');

            // Wait for DOM to be ready and Mermaid diagrams to render
            const waitForMermaid = () => {
                const mermaidElements = document.querySelectorAll('.mermaid');
                console.log('Found Mermaid elements:', mermaidElements.length);

                if (mermaidElements.length === 0) {
                    console.log('No Mermaid elements found, retrying in 2 seconds...');
                    setTimeout(waitForMermaid, 2000);
                    return;
                }

                mermaidElements.forEach((element, index) => {
                    const id = element.id || 'mermaid-diagram-' + index;
                    element.setAttribute('id', id);

                    // Wait for the diagram to be rendered as SVG
                    const waitForSVG = () => {
                        const svg = element.querySelector('svg');
                        if (svg) {
                            console.log('SVG found for element:', id);
                            addInteractivityToDiagram(element, id);
                        } else {
                            console.log('SVG not found yet for element:', id, 'retrying...');
                            setTimeout(waitForSVG, 500);
                        }
                    };

                    waitForSVG();
                });
            };

            const addInteractivityToDiagram = (element, id) => {
                // Add interactive controls container
                if (!element.previousSibling) {
                    const controls = createInteractiveControls(id, element);
                    element.parentNode.insertBefore(controls, element);
                }

                // Add zoom controls
                addZoomControls(element, id);

                // Add click handlers
                addClickHandlers(element);

                // Add tooltips
                addTooltips(element);

                // Make responsive
                makeResponsive(element);

                // Add pan and zoom
                addPanAndZoom(element, id);
            };

            const createInteractiveControls = (id, element) => {
                const controls = document.createElement('div');
                controls.className = 'mermaid-controls';
                controls.style.cssText = `
                    margin: 10px 0;
                    padding: 10px;
                    background: #f5f5f5;
                    border-radius: 5px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    flex-wrap: wrap;
                    gap: 10px;
                    font-size: 14px;
                    font-family: Arial, sans-serif;
                `;

                // Zoom controls
                const zoomControls = document.createElement('div');
                zoomControls.innerHTML = `
                    <span style="font-weight: bold;">üîç Zoom:</span>
                    <button onclick="zoomDiagram('${id}', 1.2)" style="margin: 0 2px; padding: 4px 8px; background: #1976d2; color: white; border: none; border-radius: 3px; cursor: pointer;">+</button>
                    <button onclick="zoomDiagram('${id}', 0.8)" style="margin: 0 2px; padding: 4px 8px; background: #1976d2; color: white; border: none; border-radius: 3px; cursor: pointer;">‚àí</button>
                    <button onclick="resetZoom('${id}')" style="margin: 0 2px; padding: 4px 8px; background: #666; color: white; border: none; border-radius: 3px; cursor: pointer;">Reset</button>
                `;

                // Navigation info
                const navInfo = document.createElement('div');
                navInfo.innerHTML = `<span style="color: #666;">üñ±Ô∏è Click nodes for details ‚Ä¢ Scroll to zoom ‚Ä¢ Drag to pan</span>`;

                // Fullscreen button
                const fullscreenBtn = document.createElement('button');
                fullscreenBtn.textContent = '‚õ∂ Fullscreen';
                fullscreenBtn.style.cssText = `
                    padding: 4px 12px;
                    background: #388e3c;
                    color: white;
                    border: none;
                    border-radius: 3px;
                    cursor: pointer;
                `;
                fullscreenBtn.onclick = () => toggleFullscreen(id, element);

                // Download button
                const downloadBtn = document.createElement('button');
                downloadBtn.textContent = 'üì• Download';
                downloadBtn.style.cssText = `
                    padding: 4px 12px;
                    background: #ff9800;
                    color: white;
                    border: none;
                    border-radius: 3px;
                    cursor: pointer;
                `;
                downloadBtn.onclick = () => downloadDiagram(id, element);

                controls.appendChild(zoomControls);
                controls.appendChild(navInfo);
                controls.appendChild(fullscreenBtn);
                controls.appendChild(downloadBtn);

                return controls;
            };

            const addZoomControls = (element, id) => {
                element.style.transform = 'scale(1)';
                element.style.transformOrigin = 'center top';
                element.style.transition = 'transform 0.3s ease';
                element.dataset.originalTransform = 'scale(1)';
                element.dataset.currentZoom = '1';
            };

            const addPanAndZoom = (element, id) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                let isPanning = false;
                let startX = 0, startY = 0, translateX = 0, translateY = 0;

                // Mouse wheel zoom
                element.addEventListener('wheel', function(e) {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        const delta = e.deltaY > 0 ? 0.9 : 1.1;
                        zoomDiagram(id, delta);
                    }
                });

                // Pan functionality
                svg.style.cursor = 'grab';
                svg.addEventListener('mousedown', function(e) {
                    if (e.button === 0 && !e.shiftKey) {
                        isPanning = true;
                        startX = e.clientX - translateX;
                        startY = e.clientY - translateY;
                        svg.style.cursor = 'grabbing';
                        e.preventDefault();
                    }
                });

                document.addEventListener('mousemove', function(e) {
                    if (isPanning) {
                        translateX = e.clientX - startX;
                        translateY = e.clientY - startY;
                        const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                        svg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
                    }
                });

                document.addEventListener('mouseup', function() {
                    isPanning = false;
                    svg.style.cursor = 'grab';
                });

                // Touch support for mobile
                let touchStartDistance = 0;
                let touchStartZoom = 1;

                element.addEventListener('touchstart', function(e) {
                    if (e.touches.length === 2) {
                        const dx = e.touches[0].clientX - e.touches[1].clientX;
                        const dy = e.touches[0].clientY - e.touches[1].clientY;
                        touchStartDistance = Math.sqrt(dx * dx + dy * dy);
                        touchStartZoom = parseFloat(element.dataset.currentZoom || 1);
                    }
                });

                element.addEventListener('touchmove', function(e) {
                    if (e.touches.length === 2) {
                        const dx = e.touches[0].clientX - e.touches[1].clientX;
                        const dy = e.touches[0].clientY - e.touches[1].clientY;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const scale = Math.max(0.5, Math.min(3, touchStartZoom * (distance / touchStartDistance)));
                        element.dataset.currentZoom = scale;
                        const svg = element.querySelector('svg');
                        const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                        svg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
                    }
                });
            };

            const addClickHandlers = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const clickableElements = svg.querySelectorAll('g.node, g.edgePath, .cluster');
                clickableElements.forEach(el => {
                    el.style.cursor = 'pointer';
                    el.addEventListener('click', function(e) {
                        if (!e.shiftKey && !e.ctrlKey) {
                            e.preventDefault();
                            showNodeDetails(el, element);
                        }
                    });
                });
            };

            const addTooltips = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const nodes = svg.querySelectorAll('g.node');
                nodes.forEach(node => {
                    const rect = node.querySelector('rect');
                    const text = node.querySelector('text');
                    if (rect && text) {
                        node.title = text.textContent + ' - Click for more information';

                        node.addEventListener('mouseenter', function() {
                            rect.style.filter = 'brightness(1.2)';
                            rect.style.transition = 'filter 0.2s ease';
                        });

                        node.addEventListener('mouseleave', function() {
                            rect.style.filter = 'brightness(1)';
                        });
                    }
                });
            };

            const makeResponsive = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                svg.style.maxWidth = '100%';
                svg.style.height = 'auto';
                svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

                const resizeObserver = new ResizeObserver(() => {
                    adjustDiagramSize(element);
                });
                resizeObserver.observe(element);
            };

            const adjustDiagramSize = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const container = element.parentElement;
                const containerWidth = container.clientWidth;

                if (containerWidth < 800) {
                    const mobileZoom = Math.max(0.5, containerWidth / 800);
                    element.dataset.currentZoom = mobileZoom;
                    const translateMatch = svg.style.transform.match(/translate\(([^)]+)px/);
                    const translate = translateMatch ? translateMatch[1] : '0px, 0px';
                    svg.style.transform = `translate(${translate}) scale(${mobileZoom})`;
                }
            };

            const showNodeDetails = (nodeElement, diagramElement) => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 1000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                `;

                const content = document.createElement('div');
                content.style.cssText = `
                    background: white;
                    padding: 20px;
                    border-radius: 8px;
                    max-width: 600px;
                    max-height: 80%;
                    overflow-y: auto;
                `;

                const text = nodeElement.querySelector('text');
                const title = text ? text.textContent : 'Node Details';

                content.innerHTML = `
                    <h3>${title}</h3>
                    <p><strong>Diagram:</strong> ${diagramElement.closest('h1, h2, h3, h4, h5, h6')?.textContent || 'Architecture Diagram'}</p>
                    <p><strong>Component Type:</strong> ${getNodeInfo(nodeElement).type}</p>
                    <p>${getNodeInfo(nodeElement).description}</p>
                    <button onclick="this.closest('div[style*=fixed]').remove()" style="
                        margin-top: 15px;
                        padding: 8px 16px;
                        background: #1976d2;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                    ">Close</button>
                `;

                modal.appendChild(content);
                modal.appendChild(document.createElement('button'));
                modal.onclick = (e) => {
                    if (e.target === modal) modal.remove();
                };

                document.body.appendChild(modal);
            };

            const getNodeInfo = (nodeElement) => {
                const text = nodeElement.querySelector('text')?.textContent?.toLowerCase() || '';

                if (text.includes('api') || text.includes('gateway')) {
                    return {
                        type: 'API Component',
                        description: 'This component handles API requests, routing, and response processing in the LOLStonks Gateway.'
                    };
                } else if (text.includes('cache') || text.includes('redis')) {
                    return {
                        type: 'Cache Layer',
                        description: 'This component provides caching functionality to improve API response times and reduce external API calls.'
                    };
                } else if (text.includes('rate') || text.includes('limit')) {
                    return {
                        type: 'Rate Limiter',
                        description: 'This component enforces rate limits to prevent API abuse and ensure fair usage across all clients.'
                    };
                } else if (text.includes('auth') || text.includes('security')) {
                    return {
                        type: 'Security Component',
                        description: 'This component handles authentication, authorization, and security validation for API requests.'
                    };
                } else if (text.includes('provider') || text.includes('riot')) {
                    return {
                        type: 'External Provider',
                        description: 'This component interfaces with external APIs (like Riot Games API) to fetch game data.'
                    };
                } else {
                    return {
                        type: 'System Component',
                        description: 'This component is part of the LOLStonks API Gateway architecture. Click on different components to explore the system design.'
                    };
                }
            };

            // Global functions for button controls
            window.zoomDiagram = function(id, factor) {
                const element = document.getElementById(id);
                if (!element) return;

                const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                const newZoom = Math.max(0.1, Math.min(3, currentZoom * factor));

                const svg = element.querySelector('svg');
                const currentTransform = svg.style.transform || '';
                const translateMatch = currentTransform.match(/translate\(([^)]+)px/);
                const translate = translateMatch ? translateMatch[1] : '0px, 0px';

                svg.style.transform = `translate(${translate}) scale(${newZoom})`;
                element.dataset.currentZoom = newZoom;
            };

            window.resetZoom = function(id) {
                const element = document.getElementById(id);
                if (!element) return;

                const svg = element.querySelector('svg');
                svg.style.transform = 'translate(0px, 0px) scale(1)';
                element.dataset.currentZoom = '1';
            };

            window.toggleFullscreen = function(id, element) {
                if (element.style.position === 'fixed') {
                    // Exit fullscreen
                    element.style.position = '';
                    element.style.top = '';
                    element.style.left = '';
                    element.style.width = '';
                    element.style.height = '';
                    element.style.zIndex = '';
                    element.style.backgroundColor = '';
                    element.style.padding = '';
                    element.style.overflow = '';
                    resetZoom(id);
                } else {
                    // Enter fullscreen
                    element.style.position = 'fixed';
                    element.style.top = '0';
                    element.style.left = '0';
                    element.style.width = '100vw';
                    element.style.height = '100vh';
                    element.style.zIndex = '999';
                    element.style.backgroundColor = 'white';
                    element.style.padding = '20px';
                    element.style.overflow = 'auto';
                    zoomDiagram(id, 1.5);
                }
            };

            window.downloadDiagram = function(id, element) {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const svgData = new XMLSerializer().serializeToString(svg);
                const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
                const svgUrl = URL.createObjectURL(svgBlob);

                const downloadLink = document.createElement('a');
                downloadLink.href = svgUrl;
                downloadLink.download = `${id || 'diagram'}-${Date.now()}.svg`;
                downloadLink.click();

                URL.revokeObjectURL(svgUrl);
            };

            // Initialize everything
            waitForMermaid();

        })();
    </script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.9.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>