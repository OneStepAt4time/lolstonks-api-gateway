
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Unified League of Legends API Gateway with caching, rate limiting, and comprehensive monitoring" name="description"/>
<link href="../models/" rel="prev"/>
<link href="../cache/" rel="next"/>
<link href="../../assets/logo.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator"/>
<title>Routers - LOLStonks API Gateway</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#api-routers">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="LOLStonks API Gateway" class="md-header__button md-logo" data-md-component="logo" href="../.." title="LOLStonks API Gateway">
<img alt="logo" src="../../assets/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            LOLStonks API Gateway
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Routers
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/OneStepAt4time/lolstonks-api-gateway" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/installation/">
          
  
  
    
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../openapi-spec/">
          
  
  
    
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../architecture/overview/">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../operations/monitoring/">
          
  
  
    
  
  Operations

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../development/contributing/">
          
  
  
    
  
  Development

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="LOLStonks API Gateway" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="LOLStonks API Gateway">
<img alt="logo" src="../../assets/logo.png"/>
</a>
    LOLStonks API Gateway
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/OneStepAt4time/lolstonks-api-gateway" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/quick-start/">
<span class="md-ellipsis">
    Quick Start
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/deployment/">
<span class="md-ellipsis">
    Production Deployment
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../openapi-spec/">
<span class="md-ellipsis">
    OpenAPI Specification
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../providers/">
<span class="md-ellipsis">
    Providers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../riot-client/">
<span class="md-ellipsis">
    Riot Client
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/">
<span class="md-ellipsis">
    Models
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Routers
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Routers
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-routers">
<span class="md-ellipsis">
      Core Routers
    </span>
</a>
<nav aria-label="Core Routers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#health-check">
<span class="md-ellipsis">
      Health Check
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health">
<span class="md-ellipsis">
      health
    </span>
</a>
<nav aria-label="health" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.get_error_monitoring">
<span class="md-ellipsis">
      get_error_monitoring
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.health_check">
<span class="md-ellipsis">
      health_check
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.detailed_health_check">
<span class="md-ellipsis">
      detailed_health_check
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.provider_health_details">
<span class="md-ellipsis">
      provider_health_details
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summoner-router">
<span class="md-ellipsis">
      Summoner Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner">
<span class="md-ellipsis">
      summoner
    </span>
</a>
<nav aria-label="summoner" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_name">
<span class="md-ellipsis">
      get_summoner_by_name
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_puuid">
<span class="md-ellipsis">
      get_summoner_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_id">
<span class="md-ellipsis">
      get_summoner_by_id
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#match-router">
<span class="md-ellipsis">
      Match Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match">
<span class="md-ellipsis">
      match
    </span>
</a>
<nav aria-label="match" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match_ids_by_puuid">
<span class="md-ellipsis">
      get_match_ids_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match">
<span class="md-ellipsis">
      get_match
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match_timeline">
<span class="md-ellipsis">
      get_match_timeline
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#league-router">
<span class="md-ellipsis">
      League Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league">
<span class="md-ellipsis">
      league
    </span>
</a>
<nav aria-label="league" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_challenger_league">
<span class="md-ellipsis">
      get_challenger_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_grandmaster_league">
<span class="md-ellipsis">
      get_grandmaster_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_master_league">
<span class="md-ellipsis">
      get_master_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_league_entries_by_summoner">
<span class="md-ellipsis">
      get_league_entries_by_summoner
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_league_entries">
<span class="md-ellipsis">
      get_league_entries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#league-exp-router">
<span class="md-ellipsis">
      League EXP Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league_exp">
<span class="md-ellipsis">
      league_exp
    </span>
</a>
<nav aria-label="league_exp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league_exp.get_league_exp_entries">
<span class="md-ellipsis">
      get_league_exp_entries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#champion-router">
<span class="md-ellipsis">
      Champion Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion">
<span class="md-ellipsis">
      champion
    </span>
</a>
<nav aria-label="champion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion.get_champion_rotations">
<span class="md-ellipsis">
      get_champion_rotations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#champion-mastery-router">
<span class="md-ellipsis">
      Champion Mastery Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery">
<span class="md-ellipsis">
      champion_mastery
    </span>
</a>
<nav aria-label="champion_mastery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_all_champion_masteries">
<span class="md-ellipsis">
      get_all_champion_masteries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_champion_mastery">
<span class="md-ellipsis">
      get_champion_mastery
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_top_champion_masteries">
<span class="md-ellipsis">
      get_top_champion_masteries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_mastery_score">
<span class="md-ellipsis">
      get_mastery_score
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spectator-router">
<span class="md-ellipsis">
      Spectator Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator">
<span class="md-ellipsis">
      spectator
    </span>
</a>
<nav aria-label="spectator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator.get_active_game">
<span class="md-ellipsis">
      get_active_game
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator.get_featured_games">
<span class="md-ellipsis">
      get_featured_games
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#platform-router">
<span class="md-ellipsis">
      Platform Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.platform">
<span class="md-ellipsis">
      platform
    </span>
</a>
<nav aria-label="platform" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.platform.get_platform_status">
<span class="md-ellipsis">
      get_platform_status
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#account-router">
<span class="md-ellipsis">
      Account Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account">
<span class="md-ellipsis">
      account
    </span>
</a>
<nav aria-label="account" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_account_by_puuid">
<span class="md-ellipsis">
      get_account_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_account_by_riot_id">
<span class="md-ellipsis">
      get_account_by_riot_id
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_active_shard">
<span class="md-ellipsis">
      get_active_shard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clash-router">
<span class="md-ellipsis">
      Clash Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash">
<span class="md-ellipsis">
      clash
    </span>
</a>
<nav aria-label="clash" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_player">
<span class="md-ellipsis">
      get_clash_player
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_team">
<span class="md-ellipsis">
      get_clash_team
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournaments">
<span class="md-ellipsis">
      get_clash_tournaments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournament">
<span class="md-ellipsis">
      get_clash_tournament
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournament_by_team">
<span class="md-ellipsis">
      get_clash_tournament_by_team
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#challenges-router">
<span class="md-ellipsis">
      Challenges Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges">
<span class="md-ellipsis">
      challenges
    </span>
</a>
<nav aria-label="challenges" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_all_challenges_config">
<span class="md-ellipsis">
      get_all_challenges_config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_config">
<span class="md-ellipsis">
      get_challenge_config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_leaderboard">
<span class="md-ellipsis">
      get_challenge_leaderboard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_percentiles">
<span class="md-ellipsis">
      get_challenge_percentiles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_player_challenges">
<span class="md-ellipsis">
      get_player_challenges
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../cache/">
<span class="md-ellipsis">
    Cache
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/diagram-guide/">
<span class="md-ellipsis">
    Diagram Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/system-overview/">
<span class="md-ellipsis">
    System Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/data-flow/">
<span class="md-ellipsis">
    Data Flow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/implementation-details/">
<span class="md-ellipsis">
    Implementation Details
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/models/">
<span class="md-ellipsis">
    Data Models
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Operations
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/monitoring/">
<span class="md-ellipsis">
    Monitoring
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Development
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/contributing/">
<span class="md-ellipsis">
    Contributing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/changelog-guide/">
<span class="md-ellipsis">
    Changelog Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/versioning/">
<span class="md-ellipsis">
    Versioning
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/releases/">
<span class="md-ellipsis">
    Releases
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/testing/">
<span class="md-ellipsis">
    Testing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../development/documentation/">
<span class="md-ellipsis">
    Documentation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-routers">
<span class="md-ellipsis">
      Core Routers
    </span>
</a>
<nav aria-label="Core Routers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#health-check">
<span class="md-ellipsis">
      Health Check
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health">
<span class="md-ellipsis">
      health
    </span>
</a>
<nav aria-label="health" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.get_error_monitoring">
<span class="md-ellipsis">
      get_error_monitoring
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.health_check">
<span class="md-ellipsis">
      health_check
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.detailed_health_check">
<span class="md-ellipsis">
      detailed_health_check
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.health.provider_health_details">
<span class="md-ellipsis">
      provider_health_details
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summoner-router">
<span class="md-ellipsis">
      Summoner Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner">
<span class="md-ellipsis">
      summoner
    </span>
</a>
<nav aria-label="summoner" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_name">
<span class="md-ellipsis">
      get_summoner_by_name
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_puuid">
<span class="md-ellipsis">
      get_summoner_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.summoner.get_summoner_by_id">
<span class="md-ellipsis">
      get_summoner_by_id
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#match-router">
<span class="md-ellipsis">
      Match Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match">
<span class="md-ellipsis">
      match
    </span>
</a>
<nav aria-label="match" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match_ids_by_puuid">
<span class="md-ellipsis">
      get_match_ids_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match">
<span class="md-ellipsis">
      get_match
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.match.get_match_timeline">
<span class="md-ellipsis">
      get_match_timeline
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#league-router">
<span class="md-ellipsis">
      League Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league">
<span class="md-ellipsis">
      league
    </span>
</a>
<nav aria-label="league" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_challenger_league">
<span class="md-ellipsis">
      get_challenger_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_grandmaster_league">
<span class="md-ellipsis">
      get_grandmaster_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_master_league">
<span class="md-ellipsis">
      get_master_league
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_league_entries_by_summoner">
<span class="md-ellipsis">
      get_league_entries_by_summoner
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league.get_league_entries">
<span class="md-ellipsis">
      get_league_entries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#league-exp-router">
<span class="md-ellipsis">
      League EXP Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league_exp">
<span class="md-ellipsis">
      league_exp
    </span>
</a>
<nav aria-label="league_exp" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.league_exp.get_league_exp_entries">
<span class="md-ellipsis">
      get_league_exp_entries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#champion-router">
<span class="md-ellipsis">
      Champion Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion">
<span class="md-ellipsis">
      champion
    </span>
</a>
<nav aria-label="champion" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion.get_champion_rotations">
<span class="md-ellipsis">
      get_champion_rotations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#champion-mastery-router">
<span class="md-ellipsis">
      Champion Mastery Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery">
<span class="md-ellipsis">
      champion_mastery
    </span>
</a>
<nav aria-label="champion_mastery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_all_champion_masteries">
<span class="md-ellipsis">
      get_all_champion_masteries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_champion_mastery">
<span class="md-ellipsis">
      get_champion_mastery
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_top_champion_masteries">
<span class="md-ellipsis">
      get_top_champion_masteries
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.champion_mastery.get_mastery_score">
<span class="md-ellipsis">
      get_mastery_score
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spectator-router">
<span class="md-ellipsis">
      Spectator Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator">
<span class="md-ellipsis">
      spectator
    </span>
</a>
<nav aria-label="spectator" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator.get_active_game">
<span class="md-ellipsis">
      get_active_game
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.spectator.get_featured_games">
<span class="md-ellipsis">
      get_featured_games
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#platform-router">
<span class="md-ellipsis">
      Platform Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.platform">
<span class="md-ellipsis">
      platform
    </span>
</a>
<nav aria-label="platform" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.platform.get_platform_status">
<span class="md-ellipsis">
      get_platform_status
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#account-router">
<span class="md-ellipsis">
      Account Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account">
<span class="md-ellipsis">
      account
    </span>
</a>
<nav aria-label="account" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_account_by_puuid">
<span class="md-ellipsis">
      get_account_by_puuid
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_account_by_riot_id">
<span class="md-ellipsis">
      get_account_by_riot_id
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.account.get_active_shard">
<span class="md-ellipsis">
      get_active_shard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#clash-router">
<span class="md-ellipsis">
      Clash Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash">
<span class="md-ellipsis">
      clash
    </span>
</a>
<nav aria-label="clash" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_player">
<span class="md-ellipsis">
      get_clash_player
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_team">
<span class="md-ellipsis">
      get_clash_team
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournaments">
<span class="md-ellipsis">
      get_clash_tournaments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournament">
<span class="md-ellipsis">
      get_clash_tournament
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.clash.get_clash_tournament_by_team">
<span class="md-ellipsis">
      get_clash_tournament_by_team
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#challenges-router">
<span class="md-ellipsis">
      Challenges Router
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges">
<span class="md-ellipsis">
      challenges
    </span>
</a>
<nav aria-label="challenges" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_all_challenges_config">
<span class="md-ellipsis">
      get_all_challenges_config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_config">
<span class="md-ellipsis">
      get_challenge_config
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_leaderboard">
<span class="md-ellipsis">
      get_challenge_leaderboard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_challenge_percentiles">
<span class="md-ellipsis">
      get_challenge_percentiles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#app.routers.challenges.get_player_challenges">
<span class="md-ellipsis">
      get_player_challenges
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="api-routers">API Routers<a class="headerlink" href="#api-routers" title="Permanent link">¶</a></h1>
<p>This section contains all the FastAPI routers that define the REST API endpoints for the LOLStonks API Gateway.</p>
<h2 id="core-routers">Core Routers<a class="headerlink" href="#core-routers" title="Permanent link">¶</a></h2>
<h3 id="health-check">Health Check<a class="headerlink" href="#health-check" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.health">
<code>app.routers.health</code>
<a class="headerlink" href="#app.routers.health" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Unified health monitoring for LOL API Gateway.</p>
<p>This module provides both basic and detailed health checks in a single, clean router.
Endpoints:
- GET /health (basic health check for load balancers)
- GET /health/detailed (comprehensive health with provider status)
- GET /health/providers (detailed provider-specific status)</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.health.get_error_monitoring">
<code class="highlight language-python"><span class="n">get_error_monitoring</span><span class="p">()</span></code>
<a class="headerlink" href="#app.routers.health.get_error_monitoring" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Get the error monitoring middleware instance.</p>
<details class="quote">
<summary>Source code in <code>app/routers/health.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_error_monitoring</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Get the error monitoring middleware instance."""</span>
    <span class="k">return</span> <span class="n">get_global_error_monitor</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.health.health_check">
<code class="highlight language-python"><span class="n">health_check</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.health.health_check" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Basic health check for load balancers and simple monitoring.</p>
<p>Returns a minimal response indicating the service is running.
This endpoint is optimized for Kubernetes readiness/liveness probes.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
<code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>{"status": "ok"}</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p _ok_='"ok"' _status_:='"status":'>curl "http://127.0.0.1:8080/health"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/health.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/health"</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="s2">"Basic Health Check"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Basic health check for load balancers and simple monitoring.</span>

<span class="sd">    Returns a minimal response indicating the service is running.</span>
<span class="sd">    This endpoint is optimized for Kubernetes readiness/liveness probes.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: {"status": "ok"}</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/health"</span>
<span class="sd">        {"status": "ok"}</span>
<span class="sd">    """</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Basic health check requested"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"ok"</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.health.detailed_health_check">
<code class="highlight language-python"><span class="n">detailed_health_check</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.health.detailed_health_check" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Comprehensive health check with system and provider status.</p>
<p>Returns detailed information about:
- Overall gateway status
- Individual provider health
- Error monitoring metrics
- System status indicators</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
<code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Detailed health information including provider status</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/health/detailed"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/health.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/health/detailed"</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="s2">"Detailed Health Check"</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">detailed_health_check</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Comprehensive health check with system and provider status.</span>

<span class="sd">    Returns detailed information about:</span>
<span class="sd">    - Overall gateway status</span>
<span class="sd">    - Individual provider health</span>
<span class="sd">    - Error monitoring metrics</span>
<span class="sd">    - System status indicators</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Detailed health information including provider status</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/health/detailed"</span>
<span class="sd">    """</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Detailed health check requested"</span><span class="p">)</span>

    <span class="c1"># Get provider registry</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="n">get_registry</span><span class="p">()</span>
    <span class="n">providers</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_all_providers</span><span class="p">()</span>
    <span class="n">error_monitoring</span> <span class="o">=</span> <span class="n">get_error_monitoring</span><span class="p">()</span>

    <span class="c1"># Basic health status</span>
    <span class="n">health_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"healthy"</span><span class="p">,</span>
        <span class="s2">"timestamp"</span><span class="p">:</span> <span class="s2">"2025-01-23T00:00:00Z"</span><span class="p">,</span>  <span class="c1"># Would use real timestamp</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"1.0.0"</span><span class="p">,</span>  <span class="c1"># Would get from app settings</span>
        <span class="s2">"providers"</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">"errors"</span><span class="p">:</span> <span class="p">{},</span>
    <span class="p">}</span>

    <span class="c1"># Check provider health</span>
    <span class="n">provider_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">healthy_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">:</span>
        <span class="n">provider_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">is_healthy</span> <span class="o">=</span> <span class="k">await</span> <span class="n">provider</span><span class="o">.</span><span class="n">health_check</span><span class="p">()</span>
            <span class="n">provider_health</span> <span class="o">=</span> <span class="s2">"healthy"</span> <span class="k">if</span> <span class="n">is_healthy</span> <span class="k">else</span> <span class="s2">"unhealthy"</span>

            <span class="k">if</span> <span class="n">is_healthy</span><span class="p">:</span>
                <span class="n">healthy_count</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">health_data</span><span class="p">[</span><span class="s2">"providers"</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">"name"</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">"status"</span><span class="p">:</span> <span class="n">provider_health</span><span class="p">,</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Failed to get health status for </span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">health_data</span><span class="p">[</span><span class="s2">"providers"</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">"name"</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                    <span class="s2">"error"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
                <span class="p">}</span>
            <span class="p">)</span>

    <span class="c1"># Determine overall health</span>
    <span class="k">if</span> <span class="n">provider_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">health_data</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"degraded"</span>
    <span class="k">elif</span> <span class="n">healthy_count</span> <span class="o">==</span> <span class="n">provider_count</span><span class="p">:</span>
        <span class="n">health_data</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"healthy"</span>
    <span class="k">elif</span> <span class="n">healthy_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">health_data</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"degraded"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">health_data</span><span class="p">[</span><span class="s2">"status"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"unhealthy"</span>

    <span class="c1"># Add error metrics if available</span>
    <span class="k">if</span> <span class="n">error_monitoring</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">error_metrics</span> <span class="o">=</span> <span class="n">error_monitoring</span><span class="o">.</span><span class="n">get_error_metrics</span><span class="p">()</span>
            <span class="n">health_data</span><span class="p">[</span><span class="s2">"errors"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">"total_errors"</span><span class="p">:</span> <span class="n">error_metrics</span><span class="o">.</span><span class="n">total_errors</span><span class="p">,</span>
                <span class="s2">"error_rate_24h"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>  <span class="c1"># Would calculate from metrics</span>
                <span class="s2">"errors_by_provider"</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">error_metrics</span><span class="o">.</span><span class="n">error_rates_by_provider</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Failed to get error metrics: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">health_data</span><span class="p">[</span><span class="s2">"errors"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"unavailable"</span><span class="p">}</span>

    <span class="k">return</span> <span class="n">health_data</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.health.provider_health_details">
<code class="highlight language-python"><span class="n">provider_health_details</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ProviderHealthStatus</span><span class="p">]</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.health.provider_health_details" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Get detailed health status for all providers.</p>
<p>Returns comprehensive health metrics for each registered provider
including response times, error rates, and consecutive failures.</p>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
<code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" href="../models/#app.models.common.ProviderHealthStatus" title="ProviderHealthStatus (app.models.common.ProviderHealthStatus)">ProviderHealthStatus</a>]</code>
</td>
<td>
<div class="doc-md-description">
<p>Provider name as key, ProviderHealthStatus as value</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/health/providers"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/health.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">"/health/providers"</span><span class="p">,</span>
    <span class="n">summary</span><span class="o">=</span><span class="s2">"Provider Health Details"</span><span class="p">,</span>
    <span class="n">response_model</span><span class="o">=</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ProviderHealthStatus</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">provider_health_details</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ProviderHealthStatus</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Get detailed health status for all providers.</span>

<span class="sd">    Returns comprehensive health metrics for each registered provider</span>
<span class="sd">    including response times, error rates, and consecutive failures.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Provider name as key, ProviderHealthStatus as value</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/health/providers"</span>
<span class="sd">    """</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Provider health details requested"</span><span class="p">)</span>

    <span class="n">registry</span> <span class="o">=</span> <span class="n">get_registry</span><span class="p">()</span>
    <span class="n">providers</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_all_providers</span><span class="p">()</span>
    <span class="n">error_monitoring</span> <span class="o">=</span> <span class="n">get_error_monitoring</span><span class="p">()</span>

    <span class="n">provider_statuses</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ProviderHealthStatus</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">providers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">health_status</span> <span class="o">=</span> <span class="k">await</span> <span class="n">provider</span><span class="o">.</span><span class="n">health_check</span><span class="p">()</span>
            <span class="n">response_time</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Would be calculated in real implementation</span>

            <span class="c1"># Get error metrics for this provider (currently unused but kept for future metrics)</span>
            <span class="k">if</span> <span class="n">error_monitoring</span><span class="p">:</span>
                <span class="n">metrics</span> <span class="o">=</span> <span class="n">error_monitoring</span><span class="o">.</span><span class="n">get_error_metrics</span><span class="p">()</span>
                <span class="n">_</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">error_rates_by_provider</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="c1"># Determine status based on health check</span>
            <span class="n">status</span> <span class="o">=</span> <span class="s2">"healthy"</span> <span class="k">if</span> <span class="n">health_status</span> <span class="k">else</span> <span class="s2">"unhealthy"</span>

            <span class="n">provider_statuses</span><span class="p">[</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">ProviderHealthStatus</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">provider_type</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
                <span class="n">response_time</span><span class="o">=</span><span class="n">response_time</span><span class="p">,</span>
                <span class="n">last_check</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">last_success</span><span class="o">=</span><span class="mf">0.0</span> <span class="k">if</span> <span class="n">health_status</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="n">consecutive_failures</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">total_requests</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>  <span class="c1"># Baseline</span>
                <span class="n">error_rate</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">error_details</span><span class="o">=</span><span class="kc">None</span> <span class="k">if</span> <span class="n">health_status</span> <span class="k">else</span> <span class="s2">"Health check failed"</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Failed to get health status for </span><span class="si">{</span><span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">provider_statuses</span><span class="p">[</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">ProviderHealthStatus</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">provider_type</span><span class="o">=</span><span class="n">provider</span><span class="o">.</span><span class="n">provider_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">status</span><span class="o">=</span><span class="s2">"unhealthy"</span><span class="p">,</span>
                <span class="n">response_time</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">last_check</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">last_success</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">consecutive_failures</span><span class="o">=</span><span class="mi">999</span><span class="p">,</span>
                <span class="n">total_requests</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">error_rate</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
                <span class="n">error_details</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">provider_statuses</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="summoner-router">Summoner Router<a class="headerlink" href="#summoner-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.summoner">
<code>app.routers.summoner</code>
<a class="headerlink" href="#app.routers.summoner" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Summoner-V4 API router for summoner profile information.</p>
<p>This module provides FastAPI endpoints for retrieving League of Legends summoner
data, including lookups by summoner name, PUUID, and summoner ID. Summoner data
includes account level, profile icon, and encrypted identifiers needed for other
API endpoints.</p>
<p>The Summoner-V4 API is foundational for:
- Player profile applications showing level and icons
- Account verification and identity resolution
- Obtaining encrypted IDs for league and mastery queries
- Legacy summoner name lookups (before Riot ID migration)</p>
<details class="summoner-identifiers" open="">
<summary>Summoner Identifiers</summary>
<p>Three types of summoner identifiers exist:</p>
<ol>
<li>
<p>Summoner Name (Legacy):</p>
<ul>
<li>Display name visible in game</li>
<li>Region-specific and not unique across regions</li>
<li>Deprecated in favor of Riot IDs for new accounts</li>
<li>Still supported but being phased out</li>
</ul>
</li>
<li>
<p>PUUID (Player Universally Unique Identifier):</p>
<ul>
<li>Global unique identifier across all Riot games</li>
<li>78 characters, encrypted format</li>
<li>Persistent even when summoner name changes</li>
<li>Primary identifier for Match-V5 and Account-V1 APIs</li>
<li>Preferred for long-term player tracking</li>
</ul>
</li>
<li>
<p>Encrypted Summoner ID:</p>
<ul>
<li>Region-specific encrypted identifier</li>
<li>Required for League-V4 (rank) and Champion-Mastery-V4 APIs</li>
<li>Changes if account transfers regions</li>
<li>Legacy identifier being replaced by PUUID</li>
</ul>
</li>
</ol>
</details>
<details class="regional-behavior" open="">
<summary>Regional Behavior</summary>
<ul>
<li>Summoner data is region-specific (na1, euw1, kr, etc.)</li>
<li>Each region maintains its own summoner database</li>
<li>Account transfers create new summoner IDs in target region</li>
<li>PUUID remains constant across all regions</li>
</ul>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>Long TTL (1 hour default) for summoner data</li>
<li>Data rarely changes except for level and icon updates</li>
<li>Cache key includes region and lookup method</li>
<li>Force refresh available for updated data</li>
</ul>
</details>
<details class="migration-note" open="">
<summary>Migration Note</summary>
<p>Riot is transitioning from summoner names to Riot IDs (Account-V1 API).
For new integrations, prefer using Account-V1 API for lookups, then use
PUUID with Summoner-V4 to get encrypted summoner ID.</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#summoner-v4</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.routers.account: Modern Riot ID lookup endpoints
app.models.summoner: Request/response models for summoner endpoints
app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.summoner.get_summoner_by_name">
<code class="highlight language-python"><span class="n">get_summoner_by_name</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByNameParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByNameQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.summoner.get_summoner_by_name" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a summoner by their summoner name.</p>
<p>This endpoint is the primary method for looking up a player by their in-game
name. It is a foundational part of the API, providing the necessary IDs for
further queries.</p>
<p>API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getBySummonerName</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByNameParams" title="SummonerByNameParams (app.models.summoner.SummonerByNameParams)">SummonerByNameParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the summoner name.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByNameQuery" title="SummonerByNameQuery (app.models.summoner.SummonerByNameQuery)">SummonerByNameQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the summoner's information.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/by-name/Faker?region=kr"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/summoner.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/summoners/by-name/</span><span class="si">{summonerName}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_summoner_by_name</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByNameParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByNameQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a summoner by their summoner name.</span>

<span class="sd">    This endpoint is the primary method for looking up a player by their in-game</span>
<span class="sd">    name. It is a foundational part of the API, providing the necessary IDs for</span>
<span class="sd">    further queries.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getBySummonerName</span>

<span class="sd">    Args:</span>
<span class="sd">        params (SummonerByNameParams): The path parameters, containing the summoner name.</span>
<span class="sd">        query (SummonerByNameQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the summoner's information.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/by-name/Faker?region=kr"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"summoner:name:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">summonerName</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Summoner"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/summoner/v4/summoners/by-name/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">summonerName</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_summoner</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"summoner"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">summonerName</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.summoner.get_summoner_by_puuid">
<code class="highlight language-python"><span class="n">get_summoner_by_puuid</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.summoner.get_summoner_by_puuid" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a summoner by their PUUID.</p>
<p>This endpoint fetches summoner information using a player's unique PUUID,
which is a persistent and globally unique identifier.</p>
<p>API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getByPUUID</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByPuuidParams" title="SummonerByPuuidParams (app.models.summoner.SummonerByPuuidParams)">SummonerByPuuidParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the encrypted PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByPuuidQuery" title="SummonerByPuuidQuery (app.models.summoner.SummonerByPuuidQuery)">SummonerByPuuidQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the summoner's information.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/by-puuid/{encryptedPUUID}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/summoner.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/summoners/by-puuid/</span><span class="si">{encryptedPUUID}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_summoner_by_puuid</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a summoner by their PUUID.</span>

<span class="sd">    This endpoint fetches summoner information using a player's unique PUUID,</span>
<span class="sd">    which is a persistent and globally unique identifier.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getByPUUID</span>

<span class="sd">    Args:</span>
<span class="sd">        params (SummonerByPuuidParams): The path parameters, containing the encrypted PUUID.</span>
<span class="sd">        query (SummonerByPuuidQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the summoner's information.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/by-puuid/{encryptedPUUID}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"summoner:puuid:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Summoner"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/summoner/v4/summoners/by-puuid/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_summoner</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.summoner.get_summoner_by_id">
<code class="highlight language-python"><span class="n">get_summoner_by_id</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByIdParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByIdQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.summoner.get_summoner_by_id" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a summoner by their summoner ID.</p>
<p>This endpoint fetches summoner information using a player's encrypted
summoner ID, which is a region-specific identifier.</p>
<p>API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getBySummonerId</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByIdParams" title="SummonerByIdParams (app.models.summoner.SummonerByIdParams)">SummonerByIdParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the encrypted summoner ID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.summoner.SummonerByIdQuery" title="SummonerByIdQuery (app.models.summoner.SummonerByIdQuery)">SummonerByIdQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the summoner's information.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/{encryptedSummonerId}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/summoner.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/summoners/</span><span class="si">{encryptedSummonerId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_summoner_by_id</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByIdParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SummonerByIdQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a summoner by their summoner ID.</span>

<span class="sd">    This endpoint fetches summoner information using a player's encrypted</span>
<span class="sd">    summoner ID, which is a region-specific identifier.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#summoner-v4/GET_getBySummonerId</span>

<span class="sd">    Args:</span>
<span class="sd">        params (SummonerByIdParams): The path parameters, containing the encrypted summoner ID.</span>
<span class="sd">        query (SummonerByIdQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the summoner's information.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/summoner/v4/summoners/{encryptedSummonerId}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"summoner:id:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Summoner"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/summoner/v4/summoners/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_summoner</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"summoner_id"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="match-router">Match Router<a class="headerlink" href="#match-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.match">
<code>app.routers.match</code>
<a class="headerlink" href="#app.routers.match" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Match-V5 API router for match history and detailed match data.</p>
<p>This module provides FastAPI endpoints for retrieving League of Legends match
data, including match history lookups by PUUID, detailed match information, and
match timelines with frame-by-frame event data.</p>
<p>The Match-V5 API is essential for:
- Match history and profile applications
- Post-game analytics and statistics
- Player performance tracking systems
- Data analysis and machine learning applications
- Competitive match review tools</p>
<details class="match-data-architecture" open="">
<summary>Match Data Architecture</summary>
<p>Match IDs:
    - Format: {platform}_{gameId} (e.g., "NA1_4567890123")
    - Globally unique across all regions and games
    - Permanent and immutable once game completes
    - Required for fetching detailed match data</p>
<p>Regional Routing:
    - Americas: NA, BR, LAN, LAS, OCE
    - Europe: EUW, EUNE, TR, RU
    - Asia: KR, JP
    - SEA: PH, SG, TH, TW, VN</p>
<p>Match History:
    - Paginated by start/count parameters (max 100 per request)
    - Filterable by time range, queue type, and champion
    - Ordered newest to oldest by default
    - Can include matches from multiple game modes</p>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>Match IDs: Not cached (lightweight, varies per query)</li>
<li>Match details: Long TTL + permanent tracking (matches never change)</li>
<li>Timelines: Long TTL (timeline data is immutable)</li>
<li>Dual-layer cache: Response cache + processed tracking</li>
<li>Force refresh available but rarely needed</li>
</ul>
</details>
<details class="performance-optimization" open="">
<summary>Performance Optimization</summary>
<p>This module implements a sophisticated caching strategy:
1. Response cache: Standard Redis cache with TTL
2. Processed tracking: Permanent Redis set tracking fetched matches
3. First fetch: Bypasses cache, marks as processed
4. Subsequent fetches: Served from cache
5. Force refresh: Bypasses both cache layers</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#match-v5</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.models.match: Request/response models for match endpoints
app.cache.tracking: Processed match tracking system
app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.match.get_match_ids_by_puuid">
<code class="highlight language-python"><span class="n">get_match_ids_by_puuid</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchIdsByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchIdsByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.match.get_match_ids_by_puuid" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a list of match IDs for a summoner.</p>
<p>This endpoint fetches a list of match IDs based on a player's PUUID, with
options for pagination and filtering by time, queue, and match type.</p>
<p>API Reference: https://developer.riotgames.com/apis#match-v5/GET_getMatchIdsByPUUID</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchIdsByPuuidParams" title="MatchIdsByPuuidParams (app.models.match.MatchIdsByPuuidParams)">MatchIdsByPuuidParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchIdsByPuuidQuery" title="MatchIdsByPuuidQuery (app.models.match.MatchIdsByPuuidQuery)">MatchIdsByPuuidQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, for pagination and filtering.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of match IDs.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/match/v5/matches/by-puuid/{puuid}/ids?region=americas&amp;count=20"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/match.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/matches/by-puuid/</span><span class="si">{puuid}</span><span class="s2">/ids"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_match_ids_by_puuid</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchIdsByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchIdsByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a list of match IDs for a summoner.</span>

<span class="sd">    This endpoint fetches a list of match IDs based on a player's PUUID, with</span>
<span class="sd">    options for pagination and filtering by time, queue, and match type.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#match-v5/GET_getMatchIdsByPUUID</span>

<span class="sd">    Args:</span>
<span class="sd">        params (MatchIdsByPuuidParams): The path parameters, containing the PUUID.</span>
<span class="sd">        query (MatchIdsByPuuidQuery): The query parameters, for pagination and filtering.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of match IDs.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/match/v5/matches/by-puuid/{puuid}/ids?region=americas&amp;count=20"</span>
<span class="sd">    """</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">"Fetching match IDs"</span><span class="p">,</span>
        <span class="n">puuid</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span>
        <span class="n">region</span><span class="o">=</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="n">query</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
        <span class="n">count</span><span class="o">=</span><span class="n">query</span><span class="o">.</span><span class="n">count</span><span class="p">,</span>
        <span class="n">filters</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"startTime"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">startTime</span><span class="p">,</span>
            <span class="s2">"endTime"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">endTime</span><span class="p">,</span>
            <span class="s2">"queue"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>

    <span class="c1"># Build query parameters</span>
    <span class="n">query_params</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">"start=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"count=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">startTime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"startTime=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">startTime</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">endTime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"endTime=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">endTime</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">queue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"queue=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query_params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"type=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># Build path with query parameters</span>
    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/lol/match/v5/matches/by-puuid/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="si">}</span><span class="s2">/ids?</span><span class="si">{</span><span class="s1">'&amp;'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">match_ids</span> <span class="o">=</span> <span class="k">await</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="n">is_platform_endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="s2">"Match IDs fetched"</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">match_ids</span><span class="p">),</span> <span class="n">region</span><span class="o">=</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">match_ids</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.match.get_match">
<code class="highlight language-python"><span class="n">get_match</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.match.get_match" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves match details by match ID.</p>
<p>This endpoint fetches the core data for a specific match. It employs a
dual-layer caching strategy, with a response cache and permanent tracking,
to minimize redundant API calls.</p>
<p>API Reference: https://developer.riotgames.com/apis#match-v5/GET_getMatch</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchParams" title="MatchParams (app.models.match.MatchParams)">MatchParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the match ID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchQuery" title="MatchQuery (app.models.match.MatchQuery)">MatchQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region and an
               optional force refresh flag.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the match details.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/match/v5/matches/EUW1_123456789?region=americas"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/match.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/matches/</span><span class="si">{matchId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_match</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves match details by match ID.</span>

<span class="sd">    This endpoint fetches the core data for a specific match. It employs a</span>
<span class="sd">    dual-layer caching strategy, with a response cache and permanent tracking,</span>
<span class="sd">    to minimize redundant API calls.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#match-v5/GET_getMatch</span>

<span class="sd">    Args:</span>
<span class="sd">        params (MatchParams): The path parameters, containing the match ID.</span>
<span class="sd">        query (MatchQuery): The query parameters, specifying the region and an</span>
<span class="sd">                           optional force refresh flag.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the match details.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/match/v5/matches/EUW1_123456789?region=americas"</span>
<span class="sd">    """</span>
    <span class="c1"># Check if match was already processed (if not forcing refresh)</span>
    <span class="n">is_processed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">force</span><span class="p">:</span>
        <span class="n">is_processed</span> <span class="o">=</span> <span class="k">await</span> <span class="n">tracker</span><span class="o">.</span><span class="n">is_processed</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="p">)</span>

    <span class="c1"># Use helper with force_refresh flag based on force parameter and processed status</span>
    <span class="c1"># If force=True OR not processed yet, skip cache check</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"match:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Match data"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/match/v5/matches/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_match</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"match_id"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
        <span class="n">force_refresh</span><span class="o">=</span><span class="n">query</span><span class="o">.</span><span class="n">force</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_processed</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Mark as processed after successful fetch (if not already processed)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_processed</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">tracker</span><span class="o">.</span><span class="n">mark_processed</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.match.get_match_timeline">
<code class="highlight language-python"><span class="n">get_match_timeline</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchTimelineParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchTimelineQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.match.get_match_timeline" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the timeline for a specific match.</p>
<p>This endpoint fetches a detailed timeline of events for a given match,
providing in-depth data for analysis.</p>
<p>API Reference: https://developer.riotgames.com/apis#match-v5/GET_getTimeline</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchTimelineParams" title="MatchTimelineParams (app.models.match.MatchTimelineParams)">MatchTimelineParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the match ID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.match.MatchTimelineQuery" title="MatchTimelineQuery (app.models.match.MatchTimelineQuery)">MatchTimelineQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the match timeline data.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/match/v5/matches/EUW1_123456789/timeline?region=americas"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/match.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/matches/</span><span class="si">{matchId}</span><span class="s2">/timeline"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_match_timeline</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchTimelineParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">MatchTimelineQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the timeline for a specific match.</span>

<span class="sd">    This endpoint fetches a detailed timeline of events for a given match,</span>
<span class="sd">    providing in-depth data for analysis.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#match-v5/GET_getTimeline</span>

<span class="sd">    Args:</span>
<span class="sd">        params (MatchTimelineParams): The path parameters, containing the match ID.</span>
<span class="sd">        query (MatchTimelineQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the match timeline data.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/match/v5/matches/EUW1_123456789/timeline?region=americas"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"match:timeline:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Match timeline"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/match/v5/matches/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="si">}</span><span class="s2">/timeline"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_timeline</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"match_id"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">matchId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="league-router">League Router<a class="headerlink" href="#league-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.league">
<code>app.routers.league</code>
<a class="headerlink" href="#app.routers.league" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>League-V4 API router for ranked ladder and league information.</p>
<p>This module provides FastAPI endpoints for retrieving ranked ladder data in
League of Legends, including Challenger, Grandmaster, and Master tier leagues,
as well as league entries for individual summoners and paginated rank queries.</p>
<p>The League-V4 API is fundamental for:
- Leaderboard applications tracking high-ELO players
- Analytics systems analyzing ranked distribution
- Player profile applications showing rank and LP
- Tournament qualification systems</p>
<details class="ranked-system-overview" open="">
<summary>Ranked System Overview</summary>
<p>Tiers (Highest to Lowest):
    - Challenger: Top 200-300 players per region
    - Grandmaster: Top 500-700 players per region
    - Master: Top tier with no player cap
    - Diamond, Emerald, Platinum, Gold, Silver, Bronze, Iron</p>
<p>Divisions:
    - Challenger, Grandmaster, Master: No divisions (single tier)
    - Others: I (highest), II, III, IV (lowest)</p>
<p>Queue Types:
    - RANKED_SOLO_5x5: Solo/Duo ranked queue
    - RANKED_FLEX_SR: Flex 5v5 ranked queue
    - RANKED_FLEX_TT: Twisted Treeline (deprecated but may appear in old data)</p>
</details>
<details class="regional-behavior" open="">
<summary>Regional Behavior</summary>
<ul>
<li>Each region maintains separate ranked ladders</li>
<li>Challenger/Grandmaster/Master lists are updated frequently</li>
<li>Entry pages are cached but can become stale during active play</li>
</ul>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>League data: Medium TTL (typically 5-10 minutes)</li>
<li>High-tier leagues: Shorter TTL due to frequent LP changes</li>
<li>Summoner entries: Cached to reduce redundant lookups</li>
<li>Paginated entries: Each page cached independently</li>
</ul>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#league-v4</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.models.league: Request/response models for league endpoints
app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league.get_challenger_league">
<code class="highlight language-python"><span class="n">get_challenger_league</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league.get_challenger_league" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the complete Challenger tier league for a specific ranked queue.</p>
<p>This endpoint returns the full list of all players currently in Challenger rank
for the specified queue and region. Challenger is the highest tier in League of
Legends ranked play, typically limited to the top 200-300 players per region.</p>
<p>The data includes each player's summoner information, League Points (LP), win/loss
record, and current position in the ladder. This is commonly used for leaderboard
applications, rank tracking systems, and competitive analytics.</p>
<p>Challenger leagues are highly dynamic with frequent LP changes as players compete
for top positions. The cache TTL is set accordingly to balance freshness with
API efficiency.</p>
<p>HTTP Method: GET
Rate Limit: Standard Riot API rate limits apply (varies by API key tier)
Cache TTL: Configurable via settings.cache_ttl_league (default: 5-10 minutes)</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueParams" title="LeagueByQueueParams (app.models.league.LeagueByQueueParams)">LeagueByQueueParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Path parameters containing:
- queue (str): The ranked queue type. Valid values:
    * "RANKED_SOLO_5x5" - Solo/Duo ranked queue
    * "RANKED_FLEX_SR" - Flex 5v5 ranked queue</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueQuery" title="LeagueByQueueQuery (app.models.league.LeagueByQueueQuery)">LeagueByQueueQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Query parameters containing:
- region (str): Platform region code (na1, euw1, kr, etc.)</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>Challenger league object containing:
- tier (str): Always "CHALLENGER"
- leagueId (str): Unique identifier for this league
- queue (str): Queue type (same as input)
- name (str): League name (e.g., "Teemo's Scouts")
- entries (list[dict]): Array of summoner entries, each containing:
    * summonerId (str): Encrypted summoner ID
    * summonerName (str): Summoner display name
    * leaguePoints (int): Current LP in Challenger
    * rank (str): Always "I" for Challenger
    * wins (int): Number of ranked wins
    * losses (int): Number of ranked losses
    * veteran (bool): Long-time ranked player flag
    * inactive (bool): Inactivity flag
    * freshBlood (bool): Recently promoted flag
    * hotStreak (bool): Win streak flag</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="HTTPException">HTTPException</span></code>
</td>
<td>
<div class="doc-md-description">
<p>With status code:
- 400: Invalid queue type or region code
- 404: No Challenger league exists for this queue/region combination
- 429: Rate limit exceeded
- 500: Riot API error or internal server error
- 503: Riot API service unavailable</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<p>Fetch NA Challenger Solo/Duo ladder:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/lol/league/v4/challengerleagues/by-queue/RANKED_SOLO_5x5?region=na1"
</code></pre>
<p>Fetch EUW Challenger Flex ladder:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/lol/league/v4/challengerleagues/by-queue/RANKED_FLEX_SR?region=euw1"
</code></pre>
</details>
<details class="note" open="">
<summary>Note</summary>
<ul>
<li>Challenger league size varies by region (typically 200-300 players)</li>
<li>LP values change frequently as players compete; consider cache staleness</li>
<li>The entries array is not necessarily sorted; sort by leaguePoints if needed</li>
<li>Use force=true query parameter to bypass cache for real-time data</li>
<li>Some regions may have fewer than 200 players in Challenger</li>
</ul>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>get_grandmaster_league: Next tier down from Challenger
get_master_league: Third highest tier
get_league_entries_by_summoner: Get rank info for specific summoner</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#league-v4/GET_getChallengerLeague</p>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/challengerleagues/by-queue/</span><span class="si">{queue}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_challenger_league</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""Retrieves the complete Challenger tier league for a specific ranked queue.</span>

<span class="sd">    This endpoint returns the full list of all players currently in Challenger rank</span>
<span class="sd">    for the specified queue and region. Challenger is the highest tier in League of</span>
<span class="sd">    Legends ranked play, typically limited to the top 200-300 players per region.</span>

<span class="sd">    The data includes each player's summoner information, League Points (LP), win/loss</span>
<span class="sd">    record, and current position in the ladder. This is commonly used for leaderboard</span>
<span class="sd">    applications, rank tracking systems, and competitive analytics.</span>

<span class="sd">    Challenger leagues are highly dynamic with frequent LP changes as players compete</span>
<span class="sd">    for top positions. The cache TTL is set accordingly to balance freshness with</span>
<span class="sd">    API efficiency.</span>

<span class="sd">    HTTP Method: GET</span>
<span class="sd">    Rate Limit: Standard Riot API rate limits apply (varies by API key tier)</span>
<span class="sd">    Cache TTL: Configurable via settings.cache_ttl_league (default: 5-10 minutes)</span>

<span class="sd">    Args:</span>
<span class="sd">        params: Path parameters containing:</span>
<span class="sd">            - queue (str): The ranked queue type. Valid values:</span>
<span class="sd">                * "RANKED_SOLO_5x5" - Solo/Duo ranked queue</span>
<span class="sd">                * "RANKED_FLEX_SR" - Flex 5v5 ranked queue</span>
<span class="sd">        query: Query parameters containing:</span>
<span class="sd">            - region (str): Platform region code (na1, euw1, kr, etc.)</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Challenger league object containing:</span>
<span class="sd">            - tier (str): Always "CHALLENGER"</span>
<span class="sd">            - leagueId (str): Unique identifier for this league</span>
<span class="sd">            - queue (str): Queue type (same as input)</span>
<span class="sd">            - name (str): League name (e.g., "Teemo's Scouts")</span>
<span class="sd">            - entries (list[dict]): Array of summoner entries, each containing:</span>
<span class="sd">                * summonerId (str): Encrypted summoner ID</span>
<span class="sd">                * summonerName (str): Summoner display name</span>
<span class="sd">                * leaguePoints (int): Current LP in Challenger</span>
<span class="sd">                * rank (str): Always "I" for Challenger</span>
<span class="sd">                * wins (int): Number of ranked wins</span>
<span class="sd">                * losses (int): Number of ranked losses</span>
<span class="sd">                * veteran (bool): Long-time ranked player flag</span>
<span class="sd">                * inactive (bool): Inactivity flag</span>
<span class="sd">                * freshBlood (bool): Recently promoted flag</span>
<span class="sd">                * hotStreak (bool): Win streak flag</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: With status code:</span>
<span class="sd">            - 400: Invalid queue type or region code</span>
<span class="sd">            - 404: No Challenger league exists for this queue/region combination</span>
<span class="sd">            - 429: Rate limit exceeded</span>
<span class="sd">            - 500: Riot API error or internal server error</span>
<span class="sd">            - 503: Riot API service unavailable</span>

<span class="sd">    Example:</span>
<span class="sd">        Fetch NA Challenger Solo/Duo ladder:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/lol/league/v4/challengerleagues/by-queue/RANKED_SOLO_5x5?region=na1"</span>
<span class="sd">        ```</span>

<span class="sd">        Fetch EUW Challenger Flex ladder:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/lol/league/v4/challengerleagues/by-queue/RANKED_FLEX_SR?region=euw1"</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        - Challenger league size varies by region (typically 200-300 players)</span>
<span class="sd">        - LP values change frequently as players compete; consider cache staleness</span>
<span class="sd">        - The entries array is not necessarily sorted; sort by leaguePoints if needed</span>
<span class="sd">        - Use force=true query parameter to bypass cache for real-time data</span>
<span class="sd">        - Some regions may have fewer than 200 players in Challenger</span>

<span class="sd">    See Also:</span>
<span class="sd">        get_grandmaster_league: Next tier down from Challenger</span>
<span class="sd">        get_master_league: Third highest tier</span>
<span class="sd">        get_league_entries_by_summoner: Get rank info for specific summoner</span>

<span class="sd">    API Reference:</span>
<span class="sd">        https://developer.riotgames.com/apis#league-v4/GET_getChallengerLeague</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league:challenger:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Challenger league"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/league/v4/challengerleagues/by-queue/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"queue"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league.get_grandmaster_league">
<code class="highlight language-python"><span class="n">get_grandmaster_league</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league.get_grandmaster_league" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the Grandmaster league for a specific queue.</p>
<p>This endpoint fetches a list of all players in the Grandmaster league for a
given queue, providing a snapshot of the top-ranked players in a region.</p>
<p>API Reference: https://developer.riotgames.com/apis#league-v4/GET_getGrandmasterLeague</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueParams" title="LeagueByQueueParams (app.models.league.LeagueByQueueParams)">LeagueByQueueParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the queue type.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueQuery" title="LeagueByQueueQuery (app.models.league.LeagueByQueueQuery)">LeagueByQueueQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A league object containing an array of summoner entries.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/league/v4/grandmasterleagues/by-queue/RANKED_SOLO_5x5?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/grandmasterleagues/by-queue/</span><span class="si">{queue}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_grandmaster_league</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the Grandmaster league for a specific queue.</span>

<span class="sd">    This endpoint fetches a list of all players in the Grandmaster league for a</span>
<span class="sd">    given queue, providing a snapshot of the top-ranked players in a region.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#league-v4/GET_getGrandmasterLeague</span>

<span class="sd">    Args:</span>
<span class="sd">        params (LeagueByQueueParams): The path parameters, containing the queue type.</span>
<span class="sd">        query (LeagueByQueueQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A league object containing an array of summoner entries.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/league/v4/grandmasterleagues/by-queue/RANKED_SOLO_5x5?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league:grandmaster:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Grandmaster league"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/league/v4/grandmasterleagues/by-queue/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"queue"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league.get_master_league">
<code class="highlight language-python"><span class="n">get_master_league</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league.get_master_league" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the Master league for a specific queue.</p>
<p>This endpoint fetches a list of all players in the Master league for a
given queue, providing a snapshot of the top-ranked players in a region.</p>
<p>API Reference: https://developer.riotgames.com/apis#league-v4/GET_getMasterLeague</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueParams" title="LeagueByQueueParams (app.models.league.LeagueByQueueParams)">LeagueByQueueParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the queue type.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueByQueueQuery" title="LeagueByQueueQuery (app.models.league.LeagueByQueueQuery)">LeagueByQueueQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A league object containing an array of summoner entries.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/league/v4/masterleagues/by-queue/RANKED_SOLO_5x5?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/masterleagues/by-queue/</span><span class="si">{queue}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_master_league</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueByQueueParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueByQueueQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the Master league for a specific queue.</span>

<span class="sd">    This endpoint fetches a list of all players in the Master league for a</span>
<span class="sd">    given queue, providing a snapshot of the top-ranked players in a region.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#league-v4/GET_getMasterLeague</span>

<span class="sd">    Args:</span>
<span class="sd">        params (LeagueByQueueParams): The path parameters, containing the queue type.</span>
<span class="sd">        query (LeagueByQueueQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A league object containing an array of summoner entries.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/league/v4/masterleagues/by-queue/RANKED_SOLO_5x5?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league:master:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Master league"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/league/v4/masterleagues/by-queue/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"queue"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league.get_league_entries_by_summoner">
<code class="highlight language-python"><span class="n">get_league_entries_by_summoner</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueEntriesBySummonerParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueEntriesBySummonerQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league.get_league_entries_by_summoner" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the league entries for a summoner across all queues.</p>
<p>This endpoint fetches a list of a summoner's league entries, providing
details about their rank in each queue they participate in.</p>
<p>API Reference: https://developer.riotgames.com/apis#league-v4/GET_getLeagueEntriesForSummoner</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueEntriesBySummonerParams" title="LeagueEntriesBySummonerParams (app.models.league.LeagueEntriesBySummonerParams)">LeagueEntriesBySummonerParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the encrypted summoner ID.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueEntriesBySummonerQuery" title="LeagueEntriesBySummonerQuery (app.models.league.LeagueEntriesBySummonerQuery)">LeagueEntriesBySummonerQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of league entry objects.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/league/v4/entries/by-summoner/{encryptedSummonerId}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/entries/by-summoner/</span><span class="si">{encryptedSummonerId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_league_entries_by_summoner</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueEntriesBySummonerParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueEntriesBySummonerQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the league entries for a summoner across all queues.</span>

<span class="sd">    This endpoint fetches a list of a summoner's league entries, providing</span>
<span class="sd">    details about their rank in each queue they participate in.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#league-v4/GET_getLeagueEntriesForSummoner</span>

<span class="sd">    Args:</span>
<span class="sd">        params (LeagueEntriesBySummonerParams): The path parameters, containing the encrypted summoner ID.</span>
<span class="sd">        query (LeagueEntriesBySummonerQuery): The query parameters, specifying the region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of league entry objects.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/league/v4/entries/by-summoner/{encryptedSummonerId}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league:entries:summoner:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"League entries"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/league/v4/entries/by-summoner/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"summoner_id"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">encryptedSummonerId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league.get_league_entries">
<code class="highlight language-python"><span class="n">get_league_entries</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueEntriesParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueEntriesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league.get_league_entries" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves league entries by queue, tier, and division.</p>
<p>This endpoint provides paginated access to league entries for a specific
rank, allowing for the retrieval of large sets of ranked players.</p>
<p>API Reference: https://developer.riotgames.com/apis#league-v4/GET_getLeagueEntries</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueEntriesParams" title="LeagueEntriesParams (app.models.league.LeagueEntriesParams)">LeagueEntriesParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the queue, tier, and division.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league.LeagueEntriesQuery" title="LeagueEntriesQuery (app.models.league.LeagueEntriesQuery)">LeagueEntriesQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region and page number.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of league entry objects, including summoner info, LP, and win/loss stats.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/league/v4/entries/RANKED_SOLO_5x5/DIAMOND/I?region=euw1&amp;page=1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/entries/</span><span class="si">{queue}</span><span class="s2">/</span><span class="si">{tier}</span><span class="s2">/</span><span class="si">{division}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_league_entries</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueEntriesParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueEntriesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves league entries by queue, tier, and division.</span>

<span class="sd">    This endpoint provides paginated access to league entries for a specific</span>
<span class="sd">    rank, allowing for the retrieval of large sets of ranked players.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#league-v4/GET_getLeagueEntries</span>

<span class="sd">    Args:</span>
<span class="sd">        params (LeagueEntriesParams): The path parameters, containing the queue, tier, and division.</span>
<span class="sd">        query (LeagueEntriesQuery): The query parameters, specifying the region and page number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of league entry objects, including summoner info, LP, and win/loss stats.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/league/v4/entries/RANKED_SOLO_5x5/DIAMOND/I?region=euw1&amp;page=1"</span>
<span class="sd">    """</span>
    <span class="c1"># Build path with page parameter if not default</span>
    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/lol/league/v4/entries/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">"?page=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="si">}</span><span class="s2">"</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league:entries:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"League entries"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"queue"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span>
            <span class="s2">"tier"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="p">,</span>
            <span class="s2">"division"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="p">,</span>
            <span class="s2">"page"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
            <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="league-exp-router">League EXP Router<a class="headerlink" href="#league-exp-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.league_exp">
<code>app.routers.league_exp</code>
<a class="headerlink" href="#app.routers.league_exp" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>League-EXP-V4 API endpoints (Experimental) - Priority 5.</p>
<p>Riot Developer Portal API Reference:
https://developer.riotgames.com/apis#league-exp-v4</p>
<p>Note: This is an experimental API providing paginated league entries.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.league_exp.get_league_exp_entries">
<code class="highlight language-python"><span class="n">get_league_exp_entries</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">LeagueExpEntriesParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">LeagueExpEntriesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.league_exp.get_league_exp_entries" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves league entries from the experimental endpoint.</p>
<p>This endpoint provides paginated access to league entries for a specific
rank, allowing for the retrieval of large sets of ranked players.</p>
<p>API Reference: https://developer.riotgames.com/apis#league-exp-v4/GET_getLeagueEntries</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league_exp.LeagueExpEntriesParams" title="LeagueExpEntriesParams (app.models.league_exp.LeagueExpEntriesParams)">LeagueExpEntriesParams</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The path parameters, containing the queue, tier, and division.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><a class="autorefs autorefs-internal" href="../models/#app.models.league_exp.LeagueExpEntriesQuery" title="LeagueExpEntriesQuery (app.models.league_exp.LeagueExpEntriesQuery)">LeagueExpEntriesQuery</a></code>
</td>
<td>
<div class="doc-md-description">
<p>The query parameters, specifying the region and page number.</p>
</div>
</td>
<td>
<code><span title="fastapi.Depends">Depends</span>()</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of league entry objects, including summoner info, LP, and win/loss stats.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/league-exp/v4/entries/RANKED_SOLO_5x5/DIAMOND/I?region=euw1&amp;page=1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/league_exp.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/entries/</span><span class="si">{queue}</span><span class="s2">/</span><span class="si">{tier}</span><span class="s2">/</span><span class="si">{division}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_league_exp_entries</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">LeagueExpEntriesParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">LeagueExpEntriesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves league entries from the experimental endpoint.</span>

<span class="sd">    This endpoint provides paginated access to league entries for a specific</span>
<span class="sd">    rank, allowing for the retrieval of large sets of ranked players.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#league-exp-v4/GET_getLeagueEntries</span>

<span class="sd">    Args:</span>
<span class="sd">        params (LeagueExpEntriesParams): The path parameters, containing the queue, tier, and division.</span>
<span class="sd">        query (LeagueExpEntriesQuery): The query parameters, specifying the region and page number.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of league entry objects, including summoner info, LP, and win/loss stats.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/league-exp/v4/entries/RANKED_SOLO_5x5/DIAMOND/I?region=euw1&amp;page=1"</span>
<span class="sd">    """</span>
    <span class="c1"># Build path with page parameter if not default</span>
    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/lol/league-exp/v4/entries/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">if</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">"?page=</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="si">}</span><span class="s2">"</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"league-exp:entries:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"League exp entries"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_league</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"queue"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">queue</span><span class="p">,</span>
            <span class="s2">"tier"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">tier</span><span class="p">,</span>
            <span class="s2">"division"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">division</span><span class="p">,</span>
            <span class="s2">"page"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
            <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="champion-router">Champion Router<a class="headerlink" href="#champion-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.champion">
<code>app.routers.champion</code>
<a class="headerlink" href="#app.routers.champion" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Champion-V3 API router for champion rotation data.</p>
<p>This module provides FastAPI endpoints for retrieving the current free-to-play
champion rotation in League of Legends. The champion rotation changes weekly,
typically on Tuesday mornings (Pacific Time), and consists of:
- Free champions available to all players (typically 14-16 champions)
- Additional free champions for new players (level 1-10, typically 10 champions)</p>
<p>The data is region-specific and heavily cached since it only changes weekly.
This endpoint is commonly used by:
- Client applications showing available free champions
- Analytics tools tracking rotation patterns
- New player onboarding systems</p>
<details class="regional-behavior" open="">
<summary>Regional Behavior</summary>
<ul>
<li>Each region (na1, euw1, kr, etc.) has the same rotation globally</li>
<li>Rotation changes happen simultaneously across all regions</li>
<li>Cache TTL is set to 24 hours since rotation is stable for a week</li>
</ul>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>Long TTL (24 hours) due to weekly rotation cycle</li>
<li>Force refresh available via query parameter</li>
<li>Minimal API calls due to infrequent data changes</li>
</ul>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#champion-v3</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.champion.get_champion_rotations">
<code class="highlight language-python"><span class="n">get_champion_rotations</span><span class="p">(</span><span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.champion.get_champion_rotations" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the current free-to-play champion rotation.</p>
<p>This endpoint returns the list of champions that are currently available to play
for free in League of Legends. The rotation includes two sets:
1. Standard free rotation: Available to all players (typically 14-16 champions)
2. New player rotation: Available only to players below a certain level (typically
   level 10, includes 10 champions)</p>
<p>Champion rotations reset weekly on Tuesday mornings (Pacific Time). The rotation
is identical across all regions globally, though this endpoint requires a region
parameter for API routing purposes.</p>
<p>This data is heavily cached (24-hour TTL) since rotations only change weekly,
significantly reducing API calls and improving response times.</p>
<p>HTTP Method: GET
Rate Limit: Standard Riot API rate limits apply (varies by API key tier)
Cache TTL: Configurable via settings.cache_ttl_champion_rotation (default: 24 hours)</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The platform region code. Valid values include: na1, euw1, euw, kr,
br1, jp1, la1, la2, oc1, ph2, ru, sg2, th2, tr1, tw2, vn2. Defaults to
the value configured in settings.riot_default_region.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>Champion rotation data containing:
- freeChampionIds (list[int]): List of champion IDs in the standard free
  rotation (available to all players). Each ID corresponds to a champion's
  numeric identifier (e.g., 1 = Annie, 157 = Yasuo).
- freeChampionIdsForNewPlayers (list[int]): List of champion IDs in the
  new player rotation (available only to low-level accounts).
- maxNewPlayerLevel (int): Maximum account level to qualify for the new
  player rotation (typically 10).</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="HTTPException">HTTPException</span></code>
</td>
<td>
<div class="doc-md-description">
<p>With status code:
- 400: Invalid region code provided
- 429: Rate limit exceeded
- 500: Riot API error or internal server error
- 503: Riot API service unavailable</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<p>Fetch current rotation for EUW:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/lol/platform/v3/champion-rotations?region=euw1"
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
    "freeChampionIds": [1, 3, 11, 17, 18, 22, 25, 30, 33, 40, 45, 51, 53, 63],
    "freeChampionIdsForNewPlayers": [222, 254, 427, 82, 131, 147, 54, 17, 18, 37],
    "maxNewPlayerLevel": 10
}
</code></pre>
</details>
<details class="note" open="">
<summary>Note</summary>
<ul>
<li>Champion IDs must be mapped to champion names using Data Dragon or other resources</li>
<li>The rotation is the same globally; region parameter only affects API routing</li>
<li>New player rotation is a separate, stable set designed for beginner-friendly champions</li>
<li>Cache TTL is 24 hours but data only changes weekly, so most requests hit cache</li>
<li>Use force=true query parameter to bypass cache if needed (not shown in signature)</li>
</ul>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>Data Dragon: For mapping champion IDs to names and details
app.cache.helpers.fetch_with_cache: Caching implementation details</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#champion-v3/GET_getChampionInfo</p>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/champion.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/champion-rotations"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_champion_rotations</span><span class="p">(</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""Retrieves the current free-to-play champion rotation.</span>

<span class="sd">    This endpoint returns the list of champions that are currently available to play</span>
<span class="sd">    for free in League of Legends. The rotation includes two sets:</span>
<span class="sd">    1. Standard free rotation: Available to all players (typically 14-16 champions)</span>
<span class="sd">    2. New player rotation: Available only to players below a certain level (typically</span>
<span class="sd">       level 10, includes 10 champions)</span>

<span class="sd">    Champion rotations reset weekly on Tuesday mornings (Pacific Time). The rotation</span>
<span class="sd">    is identical across all regions globally, though this endpoint requires a region</span>
<span class="sd">    parameter for API routing purposes.</span>

<span class="sd">    This data is heavily cached (24-hour TTL) since rotations only change weekly,</span>
<span class="sd">    significantly reducing API calls and improving response times.</span>

<span class="sd">    HTTP Method: GET</span>
<span class="sd">    Rate Limit: Standard Riot API rate limits apply (varies by API key tier)</span>
<span class="sd">    Cache TTL: Configurable via settings.cache_ttl_champion_rotation (default: 24 hours)</span>

<span class="sd">    Args:</span>
<span class="sd">        region: The platform region code. Valid values include: na1, euw1, euw, kr,</span>
<span class="sd">            br1, jp1, la1, la2, oc1, ph2, ru, sg2, th2, tr1, tw2, vn2. Defaults to</span>
<span class="sd">            the value configured in settings.riot_default_region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Champion rotation data containing:</span>
<span class="sd">            - freeChampionIds (list[int]): List of champion IDs in the standard free</span>
<span class="sd">              rotation (available to all players). Each ID corresponds to a champion's</span>
<span class="sd">              numeric identifier (e.g., 1 = Annie, 157 = Yasuo).</span>
<span class="sd">            - freeChampionIdsForNewPlayers (list[int]): List of champion IDs in the</span>
<span class="sd">              new player rotation (available only to low-level accounts).</span>
<span class="sd">            - maxNewPlayerLevel (int): Maximum account level to qualify for the new</span>
<span class="sd">              player rotation (typically 10).</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: With status code:</span>
<span class="sd">            - 400: Invalid region code provided</span>
<span class="sd">            - 429: Rate limit exceeded</span>
<span class="sd">            - 500: Riot API error or internal server error</span>
<span class="sd">            - 503: Riot API service unavailable</span>

<span class="sd">    Example:</span>
<span class="sd">        Fetch current rotation for EUW:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/lol/platform/v3/champion-rotations?region=euw1"</span>
<span class="sd">        ```</span>

<span class="sd">        Response:</span>

<span class="sd">        ```json</span>
<span class="sd">        {</span>
<span class="sd">            "freeChampionIds": [1, 3, 11, 17, 18, 22, 25, 30, 33, 40, 45, 51, 53, 63],</span>
<span class="sd">            "freeChampionIdsForNewPlayers": [222, 254, 427, 82, 131, 147, 54, 17, 18, 37],</span>
<span class="sd">            "maxNewPlayerLevel": 10</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        - Champion IDs must be mapped to champion names using Data Dragon or other resources</span>
<span class="sd">        - The rotation is the same globally; region parameter only affects API routing</span>
<span class="sd">        - New player rotation is a separate, stable set designed for beginner-friendly champions</span>
<span class="sd">        - Cache TTL is 24 hours but data only changes weekly, so most requests hit cache</span>
<span class="sd">        - Use force=true query parameter to bypass cache if needed (not shown in signature)</span>

<span class="sd">    See Also:</span>
<span class="sd">        Data Dragon: For mapping champion IDs to names and details</span>
<span class="sd">        app.cache.helpers.fetch_with_cache: Caching implementation details</span>

<span class="sd">    API Reference:</span>
<span class="sd">        https://developer.riotgames.com/apis#champion-v3/GET_getChampionInfo</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"champion:rotation:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Champion rotation"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/lol/platform/v3/champion-rotations"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_champion_rotation</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="champion-mastery-router">Champion Mastery Router<a class="headerlink" href="#champion-mastery-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.champion_mastery">
<code>app.routers.champion_mastery</code>
<a class="headerlink" href="#app.routers.champion_mastery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Champion-Mastery-V4 API endpoints.</p>
<p>Riot Developer Portal API Reference:
https://developer.riotgames.com/apis#champion-mastery-v4</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.champion_mastery.get_all_champion_masteries">
<code class="highlight language-python"><span class="n">get_all_champion_masteries</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.champion_mastery.get_all_champion_masteries" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves all champion mastery entries for a summoner.</p>
<p>This endpoint fetches a list of all champion mastery objects for a given
player, sorted by champion level in descending order. The results are
cached to optimize performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getAllChampionMasteries</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the champion mastery data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of champion mastery objects.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/champion_mastery.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/champion-masteries/by-puuid/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_all_champion_masteries</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves all champion mastery entries for a summoner.</span>

<span class="sd">    This endpoint fetches a list of all champion mastery objects for a given</span>
<span class="sd">    player, sorted by champion level in descending order. The results are</span>
<span class="sd">    cached to optimize performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getAllChampionMasteries</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        region (str): The region to fetch the champion mastery data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of champion mastery objects.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"mastery:all:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Champion masteries"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/champion-mastery/v4/champion-masteries/by-puuid/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_mastery</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.champion_mastery.get_champion_mastery">
<code class="highlight language-python"><span class="n">get_champion_mastery</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">championId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.champion_mastery.get_champion_mastery" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the champion mastery entry for a specific champion.</p>
<p>This endpoint fetches a single champion mastery object, which includes
details like level, points, and tokens. The results are cached for
improved performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getChampionMastery</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>championId</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the champion.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the mastery data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the champion mastery information.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}/by-champion/1?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/champion_mastery.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/champion-masteries/by-puuid/</span><span class="si">{puuid}</span><span class="s2">/by-champion/</span><span class="si">{championId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_champion_mastery</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">championId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the champion mastery entry for a specific champion.</span>

<span class="sd">    This endpoint fetches a single champion mastery object, which includes</span>
<span class="sd">    details like level, points, and tokens. The results are cached for</span>
<span class="sd">    improved performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getChampionMastery</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        championId (int): The ID of the champion.</span>
<span class="sd">        region (str): The region to fetch the mastery data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the champion mastery information.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}/by-champion/1?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"mastery:champion:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">championId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Champion mastery"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/champion-mastery/v4/champion-masteries/by-puuid/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">/by-champion/</span><span class="si">{</span><span class="n">championId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">region</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_mastery</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"championId"</span><span class="p">:</span> <span class="n">championId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.champion_mastery.get_top_champion_masteries">
<code class="highlight language-python"><span class="n">get_top_champion_masteries</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">),</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Number of top champions'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.champion_mastery.get_top_champion_masteries" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the top N champion mastery entries for a summoner.</p>
<p>This endpoint fetches a list of the highest-scoring champion mastery
objects for a player. The number of champions to return can be specified
with the <code>count</code> parameter.</p>
<p>API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getTopChampionMasteries</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the mastery data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>count</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The number of top champions to retrieve (1-20, default 3).</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=3, <span title="fastapi.Query(ge)">ge</span>=1, <span title="fastapi.Query(le)">le</span>=20, <span title="fastapi.Query(description)">description</span>='Number of top champions')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of the top champion mastery objects.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}/top?region=euw1&amp;count=5"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/champion_mastery.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/champion-masteries/by-puuid/</span><span class="si">{puuid}</span><span class="s2">/top"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_top_champion_masteries</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Number of top champions"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the top N champion mastery entries for a summoner.</span>

<span class="sd">    This endpoint fetches a list of the highest-scoring champion mastery</span>
<span class="sd">    objects for a player. The number of champions to return can be specified</span>
<span class="sd">    with the `count` parameter.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getTopChampionMasteries</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        region (str): The region to fetch the mastery data from.</span>
<span class="sd">        count (int): The number of top champions to retrieve (1-20, default 3).</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of the top champion mastery objects.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/champion-mastery/v4/champion-masteries/by-puuid/{puuid}/top?region=euw1&amp;count=5"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"mastery:top:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Top champion masteries"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/champion-mastery/v4/champion-masteries/by-puuid/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">/top"</span><span class="p">,</span>
            <span class="n">region</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">"count"</span><span class="p">:</span> <span class="n">count</span><span class="p">},</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_mastery</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"count"</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.champion_mastery.get_mastery_score">
<code class="highlight language-python"><span class="n">get_mastery_score</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.champion_mastery.get_mastery_score" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the total mastery score for a summoner.</p>
<p>This endpoint calculates and returns the total mastery score, which is the
sum of all individual champion mastery levels.</p>
<p>API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getChampionMasteryScore</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the mastery score from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>int</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>The total mastery score for the summoner.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/champion-mastery/v4/scores/by-puuid/{puuid}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/champion_mastery.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/scores/by-puuid/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_mastery_score</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the total mastery score for a summoner.</span>

<span class="sd">    This endpoint calculates and returns the total mastery score, which is the</span>
<span class="sd">    sum of all individual champion mastery levels.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#champion-mastery-v4/GET_getChampionMasteryScore</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        region (str): The region to fetch the mastery score from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The total mastery score for the summoner.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/champion-mastery/v4/scores/by-puuid/{puuid}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"mastery:score:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Mastery score"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/champion-mastery/v4/scores/by-puuid/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_mastery</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="spectator-router">Spectator Router<a class="headerlink" href="#spectator-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.spectator">
<code>app.routers.spectator</code>
<a class="headerlink" href="#app.routers.spectator" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Spectator-V5 API router for live game and featured games data.</p>
<p>This module provides FastAPI endpoints for retrieving information about games
currently in progress in League of Legends. This includes looking up active games
for specific players by PUUID, and fetching the list of featured games promoted
by Riot in the client.</p>
<p>The Spectator-V5 API is essential for:
- Live game tracking and spectator applications
- Streaming overlays showing current game info
- Tournament and esports live viewing tools
- Featured games discovery for high-profile matches
- Real-time player activity monitoring</p>
<details class="live-game-data" open="">
<summary>Live Game Data</summary>
<p>Active Game Information:
    - Game mode, map, and queue type
    - All 10 participants with summoner IDs and champion picks
    - Banned champions for each team
    - Game start time and current duration
    - Summoner spell selections
    - Rune/masteryIds (deprecated but may appear)</p>
<p>Featured Games:
    - Curated list of high-profile ongoing matches
    - Similar data structure to active games
    - Includes professional players, streamers, high-ELO games
    - Client refresh interval for polling frequency
    - Updated periodically by Riot's selection algorithm</p>
</details>
<details class="regional-behavior" open="">
<summary>Regional Behavior</summary>
<ul>
<li>Active games are region-specific (player must be in-game on that server)</li>
<li>Featured games list is region-specific</li>
<li>Returns 404 if player is not currently in a game</li>
<li>Game data becomes available shortly after game starts (champion select delay)</li>
</ul>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>Active games: Very short TTL (30 seconds default)</li>
<li>Game state changes rapidly</li>
<li>Player may finish game and start new one</li>
<li>
<p>Cache mostly useful for burst requests</p>
</li>
<li>
<p>Featured games: Short TTL (2-5 minutes)</p>
</li>
<li>List changes as games end and new ones start</li>
<li>Balances freshness with API efficiency</li>
<li>Riot provides recommended refresh interval in response</li>
</ul>
</details>
<details class="error-handling" open="">
<summary>Error Handling</summary>
<ul>
<li>404 for active games is normal (player not in game)</li>
<li>Applications should handle 404 gracefully, not as an error</li>
<li>Featured games should always return data unless API issues</li>
</ul>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#spectator-v5</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.models.spectator: Request/response models for spectator endpoints
app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.spectator.get_active_game">
<code class="highlight language-python"><span class="n">get_active_game</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">ActiveGameParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span> <span class="n">query</span><span class="p">:</span> <span class="n">ActiveGameQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.spectator.get_active_game" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the active game for a summoner.</p>
<p>This endpoint fetches the current game information for a player, if they
are currently in a game. It returns a 404 error if the player is not in a
game.</p>
<p>API Reference: https://developer.riotgames.com/apis#spectator-v5/GET_getCurrentGameInfoByPuuid</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params.encryptedPUUID</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's encrypted PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query.region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the game data from.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the active game information, including
  game mode, start time, participants, and banned champions.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/spectator/v5/active-games/by-summoner/{encryptedPUUID}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/spectator.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/active-games/by-summoner/</span><span class="si">{encryptedPUUID}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_active_game</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">ActiveGameParams</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">ActiveGameQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the active game for a summoner.</span>

<span class="sd">    This endpoint fetches the current game information for a player, if they</span>
<span class="sd">    are currently in a game. It returns a 404 error if the player is not in a</span>
<span class="sd">    game.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#spectator-v5/GET_getCurrentGameInfoByPuuid</span>

<span class="sd">    Args:</span>
<span class="sd">        params.encryptedPUUID (str): The player's encrypted PUUID.</span>
<span class="sd">        query.region (str): The region to fetch the game data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the active game information, including</span>
<span class="sd">              game mode, start time, participants, and banned champions.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/spectator/v5/active-games/by-summoner/{encryptedPUUID}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"spectator:active:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Active game"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/spectator/v5/active-games/by-summoner/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_spectator_active</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"encryptedPUUID"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">encryptedPUUID</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.spectator.get_featured_games">
<code class="highlight language-python"><span class="n">get_featured_games</span><span class="p">(</span><span class="n">query</span><span class="p">:</span> <span class="n">FeaturedGamesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">())</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.spectator.get_featured_games" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a list of featured games.</p>
<p>This endpoint fetches a list of high-profile matches that are currently
featured in the League of Legends client.</p>
<p>API Reference: https://developer.riotgames.com/apis#spectator-v5/GET_getFeaturedGames</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>query.region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the featured games from.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the list of featured games and the
  client refresh interval.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/spectator/v5/featured-games?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/spectator.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/featured-games"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_featured_games</span><span class="p">(</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">FeaturedGamesQuery</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a list of featured games.</span>

<span class="sd">    This endpoint fetches a list of high-profile matches that are currently</span>
<span class="sd">    featured in the League of Legends client.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#spectator-v5/GET_getFeaturedGames</span>

<span class="sd">    Args:</span>
<span class="sd">        query.region (str): The region to fetch the featured games from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the list of featured games and the</span>
<span class="sd">              client refresh interval.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/spectator/v5/featured-games?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"spectator:featured:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Featured games"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/lol/spectator/v5/featured-games"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_spectator_featured</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="platform-router">Platform Router<a class="headerlink" href="#platform-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.platform">
<code>app.routers.platform</code>
<a class="headerlink" href="#app.routers.platform" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Platform-V4 / LOL-STATUS-V4 API endpoints.</p>
<p>Riot Developer Portal API Reference:
https://developer.riotgames.com/apis#lol-status-v4</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.platform.get_platform_status">
<code class="highlight language-python"><span class="n">get_platform_status</span><span class="p">(</span><span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.platform.get_platform_status" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the platform status for a specific region.</p>
<p>This endpoint fetches the current status of the League of Legends platform,
including any ongoing maintenance or incidents.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-status-v4/GET_getPlatformData</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the platform status for.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the platform status, including region ID,
  name, locales, maintenances, and incidents.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/status/v4/platform-data?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/platform.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/platform-data"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_platform_status</span><span class="p">(</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the platform status for a specific region.</span>

<span class="sd">    This endpoint fetches the current status of the League of Legends platform,</span>
<span class="sd">    including any ongoing maintenance or incidents.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-status-v4/GET_getPlatformData</span>

<span class="sd">    Args:</span>
<span class="sd">        region (str): The region to fetch the platform status for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the platform status, including region ID,</span>
<span class="sd">              name, locales, maintenances, and incidents.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/status/v4/platform-data?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"platform:status:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Platform status"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/lol/status/v4/platform-data"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_platform_status</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="account-router">Account Router<a class="headerlink" href="#account-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.account">
<code>app.routers.account</code>
<a class="headerlink" href="#app.routers.account" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Account-V1 API router for Riot Games account operations.</p>
<p>This module provides FastAPI endpoints for retrieving account information using
Riot's Account-V1 API. It supports lookups by PUUID (Player Universally Unique
Identifier) and Riot ID (gameName + tagLine), as well as active shard queries
for cross-game functionality.</p>
<p>All endpoints implement regional routing and Redis caching to minimize API calls
and improve response times. Cache TTLs are configurable via application settings.</p>
<details class="regional-routing" open="">
<summary>Regional Routing</summary>
<ul>
<li>Account endpoints use regional routing (americas, europe, asia, esports)</li>
<li>PUUIDs are globally unique across all Riot games and regions</li>
<li>Active shard endpoints determine which game server a player is currently on</li>
</ul>
</details>
<details class="caching-strategy" open="">
<summary>Caching Strategy</summary>
<ul>
<li>Account lookups: Long TTL (account data rarely changes)</li>
<li>Active shards: Short TTL (server data can change frequently)</li>
<li>All caches support force refresh via query parameter</li>
</ul>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#account-v1</p>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>app.models.account: Request/response models for account endpoints
app.riot.client: HTTP client for Riot API communication
app.cache.helpers: Caching utilities and decorators</p>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.account.get_account_by_puuid">
<code class="highlight language-python"><span class="n">get_account_by_puuid</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.account.get_account_by_puuid" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves account information by Player Universally Unique Identifier (PUUID).</p>
<p>This endpoint performs a reverse lookup from PUUID to Riot ID, returning the
account's current gameName and tagLine. PUUIDs are persistent identifiers that
remain constant even when players change their Riot IDs, making them ideal for
long-term player tracking across all Riot games.</p>
<p>The response is cached with a long TTL since account data changes infrequently.
Regional routing is required as PUUIDs are globally unique but account data is
stored regionally.</p>
<p>HTTP Method: GET
Rate Limit: Standard Riot API rate limits apply (varies by API key tier)
Cache TTL: Configurable via settings.cache_ttl_account (default: 1 hour)</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.AccountByPuuidParams" title="AccountByPuuidParams (app.models.account.AccountByPuuidParams)">AccountByPuuidParams</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Path parameters containing:
- puuid (str): The player's PUUID. Must be a valid 78-character encrypted
  identifier obtained from previous API calls.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.AccountByPuuidQuery" title="AccountByPuuidQuery (app.models.account.AccountByPuuidQuery)">AccountByPuuidQuery</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Query parameters containing:
- region (str): Regional routing value. Must be one of: americas, europe,
  asia, esports. This determines which regional server to query.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>Account information containing:
- puuid (str): The player's PUUID (same as input)
- gameName (str): Current display name (without tag)
- tagLine (str): Current tag/discriminator (e.g., "NA1", "EUW")</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="HTTPException">HTTPException</span></code>
</td>
<td>
<div class="doc-md-description">
<p>With status code:
- 404: PUUID not found (invalid or non-existent account)
- 429: Rate limit exceeded
- 500: Riot API error or internal server error
- 503: Riot API service unavailable</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<p>Basic lookup:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-puuid/abc123.../def456...?region=americas"
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
    "puuid": "abc123...def456...",
    "gameName": "Faker",
    "tagLine": "KR1"
}
</code></pre>
</details>
<details class="note" open="">
<summary>Note</summary>
<ul>
<li>PUUIDs are case-sensitive and must be passed exactly as received</li>
<li>The region parameter affects routing but PUUID is globally unique</li>
<li>Cache can be bypassed using force=true query parameter (not shown in signature)</li>
</ul>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>get_account_by_riot_id: Lookup PUUID from gameName/tagLine
app.models.account.AccountByPuuidParams: Path parameter validation
app.models.account.AccountByPuuidQuery: Query parameter validation</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#account-v1/GET_getByPuuid</p>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/account.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/accounts/by-puuid/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_account_by_puuid</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByPuuidParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByPuuidQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""Retrieves account information by Player Universally Unique Identifier (PUUID).</span>

<span class="sd">    This endpoint performs a reverse lookup from PUUID to Riot ID, returning the</span>
<span class="sd">    account's current gameName and tagLine. PUUIDs are persistent identifiers that</span>
<span class="sd">    remain constant even when players change their Riot IDs, making them ideal for</span>
<span class="sd">    long-term player tracking across all Riot games.</span>

<span class="sd">    The response is cached with a long TTL since account data changes infrequently.</span>
<span class="sd">    Regional routing is required as PUUIDs are globally unique but account data is</span>
<span class="sd">    stored regionally.</span>

<span class="sd">    HTTP Method: GET</span>
<span class="sd">    Rate Limit: Standard Riot API rate limits apply (varies by API key tier)</span>
<span class="sd">    Cache TTL: Configurable via settings.cache_ttl_account (default: 1 hour)</span>

<span class="sd">    Args:</span>
<span class="sd">        params: Path parameters containing:</span>
<span class="sd">            - puuid (str): The player's PUUID. Must be a valid 78-character encrypted</span>
<span class="sd">              identifier obtained from previous API calls.</span>
<span class="sd">        query: Query parameters containing:</span>
<span class="sd">            - region (str): Regional routing value. Must be one of: americas, europe,</span>
<span class="sd">              asia, esports. This determines which regional server to query.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Account information containing:</span>
<span class="sd">            - puuid (str): The player's PUUID (same as input)</span>
<span class="sd">            - gameName (str): Current display name (without tag)</span>
<span class="sd">            - tagLine (str): Current tag/discriminator (e.g., "NA1", "EUW")</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: With status code:</span>
<span class="sd">            - 404: PUUID not found (invalid or non-existent account)</span>
<span class="sd">            - 429: Rate limit exceeded</span>
<span class="sd">            - 500: Riot API error or internal server error</span>
<span class="sd">            - 503: Riot API service unavailable</span>

<span class="sd">    Example:</span>
<span class="sd">        Basic lookup:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-puuid/abc123.../def456...?region=americas"</span>
<span class="sd">        ```</span>

<span class="sd">        Response:</span>

<span class="sd">        ```json</span>
<span class="sd">        {</span>
<span class="sd">            "puuid": "abc123...def456...",</span>
<span class="sd">            "gameName": "Faker",</span>
<span class="sd">            "tagLine": "KR1"</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        - PUUIDs are case-sensitive and must be passed exactly as received</span>
<span class="sd">        - The region parameter affects routing but PUUID is globally unique</span>
<span class="sd">        - Cache can be bypassed using force=true query parameter (not shown in signature)</span>

<span class="sd">    See Also:</span>
<span class="sd">        get_account_by_riot_id: Lookup PUUID from gameName/tagLine</span>
<span class="sd">        app.models.account.AccountByPuuidParams: Path parameter validation</span>
<span class="sd">        app.models.account.AccountByPuuidQuery: Query parameter validation</span>

<span class="sd">    API Reference:</span>
<span class="sd">        https://developer.riotgames.com/apis#account-v1/GET_getByPuuid</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"account:puuid:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Account"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/riot/account/v1/accounts/by-puuid/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_account</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.account.get_account_by_riot_id">
<code class="highlight language-python"><span class="n">get_account_by_riot_id</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByRiotIdParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByRiotIdQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.account.get_account_by_riot_id" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves account information by Riot ID (gameName and tagLine).</p>
<p>This endpoint is the primary method for looking up accounts using their
publicly visible Riot ID. It returns the account's PUUID, which can then be
used for subsequent API calls. Riot IDs are the modern replacement for summoner
names and work across all Riot games.</p>
<p>The Riot ID format is "gameName#tagLine" (e.g., "Faker#KR1"), where:
- gameName: The display name chosen by the player (3-16 characters)
- tagLine: A unique discriminator assigned by Riot (3-5 characters)</p>
<p>This endpoint is heavily cached as it's the entry point for most player lookups.</p>
<p>HTTP Method: GET
Rate Limit: Standard Riot API rate limits apply (varies by API key tier)
Cache TTL: Configurable via settings.cache_ttl_account (default: 1 hour)</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.AccountByRiotIdParams" title="AccountByRiotIdParams (app.models.account.AccountByRiotIdParams)">AccountByRiotIdParams</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Path parameters containing:
- gameName (str): The player's display name (case-insensitive). Spaces
  and special characters should be URL-encoded.
- tagLine (str): The player's unique tag/discriminator (case-insensitive).
  Examples: "NA1", "EUW", "KR1", "0001".</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.AccountByRiotIdQuery" title="AccountByRiotIdQuery (app.models.account.AccountByRiotIdQuery)">AccountByRiotIdQuery</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Query parameters containing:
- region (str): Regional routing value. Must be one of: americas, europe,
  asia, esports. Choose based on account's home region.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>Account information containing:
- puuid (str): The player's globally unique PUUID (78 characters)
- gameName (str): Current display name (canonical case)
- tagLine (str): Current tag (canonical case)</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="HTTPException">HTTPException</span></code>
</td>
<td>
<div class="doc-md-description">
<p>With status code:
- 404: Riot ID not found (account doesn't exist or wrong region)
- 400: Invalid gameName or tagLine format
- 429: Rate limit exceeded
- 500: Riot API error or internal server error
- 503: Riot API service unavailable</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<p>Looking up a professional player:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-riot-id/Faker/KR1?region=asia"
</code></pre>
<p>Looking up with spaces (URL-encoded):</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-riot-id/Doublelift/NA1?region=americas"
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
    "puuid": "abc123...def456...",
    "gameName": "Faker",
    "tagLine": "KR1"
}
</code></pre>
</details>
<details class="note" open="">
<summary>Note</summary>
<ul>
<li>gameName and tagLine are case-insensitive for lookup but returned in canonical case</li>
<li>Special characters in gameName must be URL-encoded (e.g., spaces as %20)</li>
<li>If lookup fails with 404, verify the region parameter matches the account's home region</li>
<li>The returned PUUID should be used for all subsequent API calls for this player</li>
<li>Region parameter does not always match game server (e.g., "europe" for both EUW and EUNE)</li>
</ul>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>get_account_by_puuid: Reverse lookup from PUUID to Riot ID
app.models.account.AccountByRiotIdParams: Path parameter validation
app.models.account.AccountByRiotIdQuery: Query parameter validation</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#account-v1/GET_getByRiotId</p>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/account.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/accounts/by-riot-id/</span><span class="si">{gameName}</span><span class="s2">/</span><span class="si">{tagLine}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_account_by_riot_id</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByRiotIdParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">AccountByRiotIdQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""Retrieves account information by Riot ID (gameName and tagLine).</span>

<span class="sd">    This endpoint is the primary method for looking up accounts using their</span>
<span class="sd">    publicly visible Riot ID. It returns the account's PUUID, which can then be</span>
<span class="sd">    used for subsequent API calls. Riot IDs are the modern replacement for summoner</span>
<span class="sd">    names and work across all Riot games.</span>

<span class="sd">    The Riot ID format is "gameName#tagLine" (e.g., "Faker#KR1"), where:</span>
<span class="sd">    - gameName: The display name chosen by the player (3-16 characters)</span>
<span class="sd">    - tagLine: A unique discriminator assigned by Riot (3-5 characters)</span>

<span class="sd">    This endpoint is heavily cached as it's the entry point for most player lookups.</span>

<span class="sd">    HTTP Method: GET</span>
<span class="sd">    Rate Limit: Standard Riot API rate limits apply (varies by API key tier)</span>
<span class="sd">    Cache TTL: Configurable via settings.cache_ttl_account (default: 1 hour)</span>

<span class="sd">    Args:</span>
<span class="sd">        params: Path parameters containing:</span>
<span class="sd">            - gameName (str): The player's display name (case-insensitive). Spaces</span>
<span class="sd">              and special characters should be URL-encoded.</span>
<span class="sd">            - tagLine (str): The player's unique tag/discriminator (case-insensitive).</span>
<span class="sd">              Examples: "NA1", "EUW", "KR1", "0001".</span>
<span class="sd">        query: Query parameters containing:</span>
<span class="sd">            - region (str): Regional routing value. Must be one of: americas, europe,</span>
<span class="sd">              asia, esports. Choose based on account's home region.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Account information containing:</span>
<span class="sd">            - puuid (str): The player's globally unique PUUID (78 characters)</span>
<span class="sd">            - gameName (str): Current display name (canonical case)</span>
<span class="sd">            - tagLine (str): Current tag (canonical case)</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: With status code:</span>
<span class="sd">            - 404: Riot ID not found (account doesn't exist or wrong region)</span>
<span class="sd">            - 400: Invalid gameName or tagLine format</span>
<span class="sd">            - 429: Rate limit exceeded</span>
<span class="sd">            - 500: Riot API error or internal server error</span>
<span class="sd">            - 503: Riot API service unavailable</span>

<span class="sd">    Example:</span>
<span class="sd">        Looking up a professional player:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-riot-id/Faker/KR1?region=asia"</span>
<span class="sd">        ```</span>

<span class="sd">        Looking up with spaces (URL-encoded):</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/riot/account/v1/accounts/by-riot-id/Doublelift/NA1?region=americas"</span>
<span class="sd">        ```</span>

<span class="sd">        Response:</span>

<span class="sd">        ```json</span>
<span class="sd">        {</span>
<span class="sd">            "puuid": "abc123...def456...",</span>
<span class="sd">            "gameName": "Faker",</span>
<span class="sd">            "tagLine": "KR1"</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        - gameName and tagLine are case-insensitive for lookup but returned in canonical case</span>
<span class="sd">        - Special characters in gameName must be URL-encoded (e.g., spaces as %20)</span>
<span class="sd">        - If lookup fails with 404, verify the region parameter matches the account's home region</span>
<span class="sd">        - The returned PUUID should be used for all subsequent API calls for this player</span>
<span class="sd">        - Region parameter does not always match game server (e.g., "europe" for both EUW and EUNE)</span>

<span class="sd">    See Also:</span>
<span class="sd">        get_account_by_puuid: Reverse lookup from PUUID to Riot ID</span>
<span class="sd">        app.models.account.AccountByRiotIdParams: Path parameter validation</span>
<span class="sd">        app.models.account.AccountByRiotIdQuery: Query parameter validation</span>

<span class="sd">    API Reference:</span>
<span class="sd">        https://developer.riotgames.com/apis#account-v1/GET_getByRiotId</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"account:riotid:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">gameName</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tagLine</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Account"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/riot/account/v1/accounts/by-riot-id/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">gameName</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">tagLine</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_account</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"gameName"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">gameName</span><span class="p">,</span> <span class="s2">"tagLine"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">tagLine</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.account.get_active_shard">
<code class="highlight language-python"><span class="n">get_active_shard</span><span class="p">(</span><span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">ActiveShardParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span> <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">ActiveShardQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()])</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.account.get_active_shard" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the active game shard (server) where a player is currently active.</p>
<p>This endpoint determines which game-specific server a player is actively playing
on or was last active on. It's primarily used for cross-game functionality and
spectator features, allowing applications to route game-specific API calls to
the correct regional shard.</p>
<p>A "shard" represents a game-specific regional server. For example, a player with
a PUUID might have:
- League of Legends: Active on "na1" shard
- Valorant: Active on "na" shard
- Teamfight Tactics: Active on "na1" shard</p>
<p>This endpoint uses a shorter cache TTL than account lookups since active shard
data can change as players move between servers or games.</p>
<p>HTTP Method: GET
Rate Limit: Standard Riot API rate limits apply (varies by API key tier)
Cache TTL: Configurable via settings.cache_ttl_account_shard (default: 5 minutes)</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>params</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.ActiveShardParams" title="ActiveShardParams (app.models.account.ActiveShardParams)">ActiveShardParams</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Path parameters containing:
- game (str): The game identifier. Valid values include:
    * "val" - Valorant
    * "lor" - Legends of Runeterra
    * "lol" - League of Legends (less commonly used for this endpoint)
- puuid (str): The player's PUUID (78-character encrypted identifier)</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>query</code>
</td>
<td>
<code><span title="typing.Annotated">Annotated</span>[<a class="autorefs autorefs-internal" href="../models/#app.models.account.ActiveShardQuery" title="ActiveShardQuery (app.models.account.ActiveShardQuery)">ActiveShardQuery</a>, <span title="fastapi.Depends">Depends</span>()]</code>
</td>
<td>
<div class="doc-md-description">
<p>Query parameters containing:
- region (str): Regional routing value. Must be one of: americas, europe,
  asia, esports.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>Active shard information containing:
- puuid (str): The player's PUUID (same as input)
- game (str): The game identifier (same as input)
- activeShard (str): The specific game server/region where the player
  is currently active (e.g., "na1", "euw1", "kr")</p>
</div>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Raises:</span></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code><span title="HTTPException">HTTPException</span></code>
</td>
<td>
<div class="doc-md-description">
<p>With status code:
- 404: Player has no active shard for this game (never played or inactive)
- 400: Invalid game identifier
- 429: Rate limit exceeded
- 500: Riot API error or internal server error
- 503: Riot API service unavailable</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<p>Check Valorant active shard:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/riot/account/v1/active-shards/by-game/val/by-puuid/abc123.../def456...?region=americas"
</code></pre>
<p>Check Legends of Runeterra active shard:</p>
<pre><code class="language-bash">curl "http://127.0.0.1:8080/riot/account/v1/active-shards/by-game/lor/by-puuid/abc123.../def456...?region=europe"
</code></pre>
<p>Response:</p>
<pre><code class="language-json">{
    "puuid": "abc123...def456...",
    "game": "val",
    "activeShard": "na"
}
</code></pre>
</details>
<details class="note" open="">
<summary>Note</summary>
<ul>
<li>A 404 response means the player has never played the specified game or has been
  inactive long enough for shard data to expire</li>
<li>The activeShard value is game-specific and may not match League of Legends region codes</li>
<li>Use this endpoint before making game-specific API calls to ensure correct routing</li>
<li>Cache TTL is intentionally short to handle players switching regions or servers</li>
<li>For League of Legends specifically, the summoner endpoint is usually preferred</li>
</ul>
</details>
<details class="see-also" open="">
<summary>See Also</summary>
<p>get_account_by_puuid: Get account information from PUUID
get_account_by_riot_id: Get PUUID from Riot ID
app.models.account.ActiveShardParams: Path parameter validation
app.models.account.ActiveShardQuery: Query parameter validation</p>
</details>
<details class="api-reference" open="">
<summary>API Reference</summary>
<p>https://developer.riotgames.com/apis#account-v1/GET_getActiveShard</p>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/account.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/active-shards/by-game/</span><span class="si">{game}</span><span class="s2">/by-puuid/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_active_shard</span><span class="p">(</span>
    <span class="n">params</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">ActiveShardParams</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
    <span class="n">query</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">ActiveShardQuery</span><span class="p">,</span> <span class="n">Depends</span><span class="p">()],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""Retrieves the active game shard (server) where a player is currently active.</span>

<span class="sd">    This endpoint determines which game-specific server a player is actively playing</span>
<span class="sd">    on or was last active on. It's primarily used for cross-game functionality and</span>
<span class="sd">    spectator features, allowing applications to route game-specific API calls to</span>
<span class="sd">    the correct regional shard.</span>

<span class="sd">    A "shard" represents a game-specific regional server. For example, a player with</span>
<span class="sd">    a PUUID might have:</span>
<span class="sd">    - League of Legends: Active on "na1" shard</span>
<span class="sd">    - Valorant: Active on "na" shard</span>
<span class="sd">    - Teamfight Tactics: Active on "na1" shard</span>

<span class="sd">    This endpoint uses a shorter cache TTL than account lookups since active shard</span>
<span class="sd">    data can change as players move between servers or games.</span>

<span class="sd">    HTTP Method: GET</span>
<span class="sd">    Rate Limit: Standard Riot API rate limits apply (varies by API key tier)</span>
<span class="sd">    Cache TTL: Configurable via settings.cache_ttl_account_shard (default: 5 minutes)</span>

<span class="sd">    Args:</span>
<span class="sd">        params: Path parameters containing:</span>
<span class="sd">            - game (str): The game identifier. Valid values include:</span>
<span class="sd">                * "val" - Valorant</span>
<span class="sd">                * "lor" - Legends of Runeterra</span>
<span class="sd">                * "lol" - League of Legends (less commonly used for this endpoint)</span>
<span class="sd">            - puuid (str): The player's PUUID (78-character encrypted identifier)</span>
<span class="sd">        query: Query parameters containing:</span>
<span class="sd">            - region (str): Regional routing value. Must be one of: americas, europe,</span>
<span class="sd">              asia, esports.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Active shard information containing:</span>
<span class="sd">            - puuid (str): The player's PUUID (same as input)</span>
<span class="sd">            - game (str): The game identifier (same as input)</span>
<span class="sd">            - activeShard (str): The specific game server/region where the player</span>
<span class="sd">              is currently active (e.g., "na1", "euw1", "kr")</span>

<span class="sd">    Raises:</span>
<span class="sd">        HTTPException: With status code:</span>
<span class="sd">            - 404: Player has no active shard for this game (never played or inactive)</span>
<span class="sd">            - 400: Invalid game identifier</span>
<span class="sd">            - 429: Rate limit exceeded</span>
<span class="sd">            - 500: Riot API error or internal server error</span>
<span class="sd">            - 503: Riot API service unavailable</span>

<span class="sd">    Example:</span>
<span class="sd">        Check Valorant active shard:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/riot/account/v1/active-shards/by-game/val/by-puuid/abc123.../def456...?region=americas"</span>
<span class="sd">        ```</span>

<span class="sd">        Check Legends of Runeterra active shard:</span>

<span class="sd">        ```bash</span>
<span class="sd">        curl "http://127.0.0.1:8080/riot/account/v1/active-shards/by-game/lor/by-puuid/abc123.../def456...?region=europe"</span>
<span class="sd">        ```</span>

<span class="sd">        Response:</span>

<span class="sd">        ```json</span>
<span class="sd">        {</span>
<span class="sd">            "puuid": "abc123...def456...",</span>
<span class="sd">            "game": "val",</span>
<span class="sd">            "activeShard": "na"</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">    Note:</span>
<span class="sd">        - A 404 response means the player has never played the specified game or has been</span>
<span class="sd">          inactive long enough for shard data to expire</span>
<span class="sd">        - The activeShard value is game-specific and may not match League of Legends region codes</span>
<span class="sd">        - Use this endpoint before making game-specific API calls to ensure correct routing</span>
<span class="sd">        - Cache TTL is intentionally short to handle players switching regions or servers</span>
<span class="sd">        - For League of Legends specifically, the summoner endpoint is usually preferred</span>

<span class="sd">    See Also:</span>
<span class="sd">        get_account_by_puuid: Get account information from PUUID</span>
<span class="sd">        get_account_by_riot_id: Get PUUID from Riot ID</span>
<span class="sd">        app.models.account.ActiveShardParams: Path parameter validation</span>
<span class="sd">        app.models.account.ActiveShardQuery: Query parameter validation</span>

<span class="sd">    API Reference:</span>
<span class="sd">        https://developer.riotgames.com/apis#account-v1/GET_getActiveShard</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"account:shard:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">game</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Active shard"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/riot/account/v1/active-shards/by-game/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">game</span><span class="si">}</span><span class="s2">/by-puuid/</span><span class="si">{</span><span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
            <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
            <span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_account_shard</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"game"</span><span class="p">:</span> <span class="n">params</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="clash-router">Clash Router<a class="headerlink" href="#clash-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.clash">
<code>app.routers.clash</code>
<a class="headerlink" href="#app.routers.clash" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Clash-V1 API endpoints (Clash tournament data).</p>
<p>Riot Developer Portal API Reference:
https://developer.riotgames.com/apis#clash-v1</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.clash.get_clash_player">
<code class="highlight language-python"><span class="n">get_clash_player</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.clash.get_clash_player" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves Clash player information by PUUID.</p>
<p>This endpoint fetches a list of a player's Clash tournament registrations.
Due to the dynamic nature of tournament data, it uses a short cache TTL.</p>
<p>API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getPlayersByPUUID</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the Clash player data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of player registration objects, each containing details
  like summonerId, teamId, position, and role.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/clash/v1/players/by-puuid/{puuid}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/clash.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/players/by-puuid/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_clash_player</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves Clash player information by PUUID.</span>

<span class="sd">    This endpoint fetches a list of a player's Clash tournament registrations.</span>
<span class="sd">    Due to the dynamic nature of tournament data, it uses a short cache TTL.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getPlayersByPUUID</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        region (str): The region to fetch the Clash player data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of player registration objects, each containing details</span>
<span class="sd">              like summonerId, teamId, position, and role.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/clash/v1/players/by-puuid/{puuid}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"clash:player:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Clash player"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">"/lol/clash/v1/players/by-puuid/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_clash_player</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.clash.get_clash_team">
<code class="highlight language-python"><span class="n">get_clash_team</span><span class="p">(</span><span class="n">teamId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.clash.get_clash_team" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves Clash team information by team ID.</p>
<p>This endpoint fetches detailed information about a Clash team, including
its tournament ID, name, icon, tier, and list of players.</p>
<p>API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTeamById</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>teamId</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the Clash team.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the team data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the Clash team's details.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/clash/v1/teams/{teamId}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/clash.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/teams/</span><span class="si">{teamId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_clash_team</span><span class="p">(</span>
    <span class="n">teamId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves Clash team information by team ID.</span>

<span class="sd">    This endpoint fetches detailed information about a Clash team, including</span>
<span class="sd">    its tournament ID, name, icon, tier, and list of players.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTeamById</span>

<span class="sd">    Args:</span>
<span class="sd">        teamId (str): The ID of the Clash team.</span>
<span class="sd">        region (str): The region to fetch the team data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the Clash team's details.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/clash/v1/teams/{teamId}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"clash:team:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">teamId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Clash team"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">"/lol/clash/v1/teams/</span><span class="si">{</span><span class="n">teamId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_clash_team</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"teamId"</span><span class="p">:</span> <span class="n">teamId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.clash.get_clash_tournaments">
<code class="highlight language-python"><span class="n">get_clash_tournaments</span><span class="p">(</span><span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.clash.get_clash_tournaments" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves all active and upcoming Clash tournaments.</p>
<p>This endpoint fetches a list of all current and future Clash tournaments,
including their schedules and themes.</p>
<p>API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournaments</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the tournament data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of tournament objects.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/clash/v1/tournaments?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/clash.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/tournaments"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_clash_tournaments</span><span class="p">(</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves all active and upcoming Clash tournaments.</span>

<span class="sd">    This endpoint fetches a list of all current and future Clash tournaments,</span>
<span class="sd">    including their schedules and themes.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournaments</span>

<span class="sd">    Args:</span>
<span class="sd">        region (str): The region to fetch the tournament data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tournament objects.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/clash/v1/tournaments?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"clash:tournaments:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Clash tournaments"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/lol/clash/v1/tournaments"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_clash_tournament</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.clash.get_clash_tournament">
<code class="highlight language-python"><span class="n">get_clash_tournament</span><span class="p">(</span><span class="n">tournamentId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.clash.get_clash_tournament" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves a Clash tournament by its ID.</p>
<p>This endpoint fetches detailed information about a specific Clash
tournament, including its schedule and theme.</p>
<p>API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournamentById</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>tournamentId</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the tournament.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the tournament data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the tournament's details.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/clash/v1/tournaments/{tournamentId}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/clash.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/tournaments/</span><span class="si">{tournamentId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_clash_tournament</span><span class="p">(</span>
    <span class="n">tournamentId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves a Clash tournament by its ID.</span>

<span class="sd">    This endpoint fetches detailed information about a specific Clash</span>
<span class="sd">    tournament, including its schedule and theme.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournamentById</span>

<span class="sd">    Args:</span>
<span class="sd">        tournamentId (int): The ID of the tournament.</span>
<span class="sd">        region (str): The region to fetch the tournament data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the tournament's details.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/clash/v1/tournaments/{tournamentId}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"clash:tournament:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">tournamentId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Clash tournament"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/clash/v1/tournaments/</span><span class="si">{</span><span class="n">tournamentId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_clash_tournament</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"tournamentId"</span><span class="p">:</span> <span class="n">tournamentId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.clash.get_clash_tournament_by_team">
<code class="highlight language-python"><span class="n">get_clash_tournament_by_team</span><span class="p">(</span><span class="n">teamId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.clash.get_clash_tournament_by_team" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the Clash tournament a team is registered for.</p>
<p>This endpoint fetches the tournament object for the tournament that the
specified team is a part of.</p>
<p>API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournamentByTeam</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>teamId</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the team.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the tournament data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the tournament's details.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/clash/v1/tournaments/by-team/{teamId}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/clash.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/tournaments/by-team/</span><span class="si">{teamId}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_clash_tournament_by_team</span><span class="p">(</span>
    <span class="n">teamId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the Clash tournament a team is registered for.</span>

<span class="sd">    This endpoint fetches the tournament object for the tournament that the</span>
<span class="sd">    specified team is a part of.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#clash-v1/GET_getTournamentByTeam</span>

<span class="sd">    Args:</span>
<span class="sd">        teamId (str): The ID of the team.</span>
<span class="sd">        region (str): The region to fetch the tournament data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the tournament's details.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/clash/v1/tournaments/by-team/{teamId}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"clash:tournament:team:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">teamId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Clash tournament by team"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/clash/v1/tournaments/by-team/</span><span class="si">{</span><span class="n">teamId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_clash_team</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"teamId"</span><span class="p">:</span> <span class="n">teamId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div><h3 id="challenges-router">Challenges Router<a class="headerlink" href="#challenges-router" title="Permanent link">¶</a></h3>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="app.routers.challenges">
<code>app.routers.challenges</code>
<a class="headerlink" href="#app.routers.challenges" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<p>Challenges-V1 API endpoints (Player challenges and progression).</p>
<p>Riot Developer Portal API Reference:
https://developer.riotgames.com/apis#lol-challenges-v1</p>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.challenges.get_all_challenges_config">
<code class="highlight language-python"><span class="n">get_all_challenges_config</span><span class="p">(</span><span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.challenges.get_all_challenges_config" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the configuration for all challenges.</p>
<p>This endpoint fetches a list of all available challenge configurations,
including their IDs, localized names, and thresholds. The results are
cached to optimize performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getAllChallengeConfigs</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the challenges configuration for.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of challenge configuration objects.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/config?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/challenges.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/challenges/config"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_all_challenges_config</span><span class="p">(</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the configuration for all challenges.</span>

<span class="sd">    This endpoint fetches a list of all available challenge configurations,</span>
<span class="sd">    including their IDs, localized names, and thresholds. The results are</span>
<span class="sd">    cached to optimize performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getAllChallengeConfigs</span>

<span class="sd">    Args:</span>
<span class="sd">        region (str): The region to fetch the challenges configuration for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of challenge configuration objects.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/config?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"challenges:config:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Challenges config"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/lol/challenges/v1/challenges/config"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_challenges_config</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.challenges.get_challenge_config">
<code class="highlight language-python"><span class="n">get_challenge_config</span><span class="p">(</span><span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.challenges.get_challenge_config" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the configuration for a specific challenge.</p>
<p>This endpoint fetches the configuration for a single challenge by its ID,
including details like thresholds and localized names. The results are
cached for better performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengeConfigs</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>challengeId</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the challenge to retrieve.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the challenge configuration from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the challenge configuration.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/1/config?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/challenges.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/challenges/</span><span class="si">{challengeId}</span><span class="s2">/config"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_challenge_config</span><span class="p">(</span>
    <span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the configuration for a specific challenge.</span>

<span class="sd">    This endpoint fetches the configuration for a single challenge by its ID,</span>
<span class="sd">    including details like thresholds and localized names. The results are</span>
<span class="sd">    cached for better performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengeConfigs</span>

<span class="sd">    Args:</span>
<span class="sd">        challengeId (int): The ID of the challenge to retrieve.</span>
<span class="sd">        region (str): The region to fetch the challenge configuration from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the challenge configuration.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/1/config?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"challenges:config:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Challenge config"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/challenges/v1/challenges/</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">/config"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_challenges_config</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"challengeId"</span><span class="p">:</span> <span class="n">challengeId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.challenges.get_challenge_leaderboard">
<code class="highlight language-python"><span class="n">get_challenge_leaderboard</span><span class="p">(</span><span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">),</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Limit results (optional)'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.challenges.get_challenge_leaderboard" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the leaderboard for a specific challenge and level.</p>
<p>This endpoint fetches the leaderboard for a given challenge, filtered by
a specific competitive level (e.g., MASTER, GRANDMASTER). It supports an
optional limit on the number of results and uses a short cache TTL to
keep the data fresh.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengeLeaderboards</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>challengeId</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the challenge.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>level</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The competitive level to retrieve the leaderboard for.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the leaderboard from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>limit</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The maximum number of leaderboard entries to return.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=None, <span title="fastapi.Query(ge)">ge</span>=1, <span title="fastapi.Query(description)">description</span>='Limit results (optional)')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>list</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A list of leaderboard entries, each containing player PUUIDs and their values.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://1227.0.0.1:8080/lol/challenges/v1/challenges/1/leaderboards/by-level/CHALLENGER?region=euw1&amp;limit=10"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/challenges.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/challenges/</span><span class="si">{challengeId}</span><span class="s2">/leaderboards/by-level/</span><span class="si">{level}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_challenge_leaderboard</span><span class="p">(</span>
    <span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
    <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Limit results (optional)"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the leaderboard for a specific challenge and level.</span>

<span class="sd">    This endpoint fetches the leaderboard for a given challenge, filtered by</span>
<span class="sd">    a specific competitive level (e.g., MASTER, GRANDMASTER). It supports an</span>
<span class="sd">    optional limit on the number of results and uses a short cache TTL to</span>
<span class="sd">    keep the data fresh.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengeLeaderboards</span>

<span class="sd">    Args:</span>
<span class="sd">        challengeId (int): The ID of the challenge.</span>
<span class="sd">        level (str): The competitive level to retrieve the leaderboard for.</span>
<span class="sd">        region (str): The region to fetch the leaderboard from.</span>
<span class="sd">        limit (int, optional): The maximum number of leaderboard entries to return.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of leaderboard entries, each containing player PUUIDs and their values.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://1227.0.0.1:8080/lol/challenges/v1/challenges/1/leaderboards/by-level/CHALLENGER?region=euw1&amp;limit=10"</span>
<span class="sd">    """</span>
    <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"/lol/challenges/v1/challenges/</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">/leaderboards/by-level/</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"limit"</span><span class="p">:</span> <span class="n">limit</span><span class="p">}</span> <span class="k">if</span> <span class="n">limit</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"challenges:leaderboard:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">level</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Challenge leaderboard"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_challenges_leaderboard</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"challengeId"</span><span class="p">:</span> <span class="n">challengeId</span><span class="p">,</span> <span class="s2">"level"</span><span class="p">:</span> <span class="n">level</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.challenges.get_challenge_percentiles">
<code class="highlight language-python"><span class="n">get_challenge_percentiles</span><span class="p">(</span><span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.challenges.get_challenge_percentiles" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves the percentile distribution for a challenge.</p>
<p>This endpoint fetches a map of percentile values for a specific challenge,
allowing for a detailed statistical overview. The results are cached to
optimize performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengePercentiles</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>challengeId</code>
</td>
<td>
<code><span title="int">int</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The ID of the challenge.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the percentiles from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary mapping challenge values to their corresponding percentiles.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/1/percentiles?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/challenges.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/challenges/</span><span class="si">{challengeId}</span><span class="s2">/percentiles"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_challenge_percentiles</span><span class="p">(</span>
    <span class="n">challengeId</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">),</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves the percentile distribution for a challenge.</span>

<span class="sd">    This endpoint fetches a map of percentile values for a specific challenge,</span>
<span class="sd">    allowing for a detailed statistical overview. The results are cached to</span>
<span class="sd">    optimize performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getChallengePercentiles</span>

<span class="sd">    Args:</span>
<span class="sd">        challengeId (int): The ID of the challenge.</span>
<span class="sd">        region (str): The region to fetch the percentiles from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary mapping challenge values to their corresponding percentiles.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/challenges/v1/challenges/1/percentiles?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"challenges:percentiles:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Challenge percentiles"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"/lol/challenges/v1/challenges/</span><span class="si">{</span><span class="n">challengeId</span><span class="si">}</span><span class="s2">/percentiles"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_challenges_percentiles</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"challengeId"</span><span class="p">:</span> <span class="n">challengeId</span><span class="p">,</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="app.routers.challenges.get_player_challenges">
<code class="highlight language-python"><span class="n">get_player_challenges</span><span class="p">(</span><span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">),</span> <span class="n">description</span><span class="o">=</span><span class="s1">'Region code'</span><span class="p">))</span></code>
<span class="doc doc-labels">
<small class="doc doc-label doc-label-async"><code>async</code></small>
</span>
<a class="headerlink" href="#app.routers.challenges.get_player_challenges" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Retrieves all challenge data for a player.</p>
<p>This endpoint fetches a comprehensive overview of a player's challenge
progression, including their total points, category points, and individual
challenge progress. The results are cached to optimize performance.</p>
<p>API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getPlayerData</p>
<p><span class="doc-section-title">Parameters:</span></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td>
<code>puuid</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The player's unique PUUID.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr class="doc-section-item">
<td>
<code>region</code>
</td>
<td>
<code><span title="str">str</span></code>
</td>
<td>
<div class="doc-md-description">
<p>The region to fetch the player's challenge data from.</p>
</div>
</td>
<td>
<code><span title="fastapi.Query">Query</span>(<span title="fastapi.Query(default)">default</span>=<span title="app.config.settings.riot_default_region">riot_default_region</span>, <span title="fastapi.Query(description)">description</span>='Region code')</code>
</td>
</tr>
</tbody>
</table>
<p><span class="doc-section-title">Returns:</span></p>
<table>
<thead>
<tr>
<th>Name</th> <th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="doc-section-item">
<td><code>dict</code></td> <td>
</td>
<td>
<div class="doc-md-description">
<p>A dictionary containing the player's total points, category points,
  challenge progress, and preferences.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="example" open="">
<summary>Example</summary>
<blockquote>
<blockquote>
<blockquote>
<p>curl "http://127.0.0.1:8080/lol/challenges/v1/player-data/{puuid}?region=euw1"</p>
</blockquote>
</blockquote>
</blockquote>
</details>
<details class="quote">
<summary>Source code in <code>app/routers/challenges.py</code></summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/player-data/</span><span class="si">{puuid}</span><span class="s2">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_player_challenges</span><span class="p">(</span>
    <span class="n">puuid</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">region</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">riot_default_region</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">"Region code"</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Retrieves all challenge data for a player.</span>

<span class="sd">    This endpoint fetches a comprehensive overview of a player's challenge</span>
<span class="sd">    progression, including their total points, category points, and individual</span>
<span class="sd">    challenge progress. The results are cached to optimize performance.</span>

<span class="sd">    API Reference: https://developer.riotgames.com/apis#lol-challenges-v1/GET_getPlayerData</span>

<span class="sd">    Args:</span>
<span class="sd">        puuid (str): The player's unique PUUID.</span>
<span class="sd">        region (str): The region to fetch the player's challenge data from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the player's total points, category points,</span>
<span class="sd">              challenge progress, and preferences.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; curl "http://127.0.0.1:8080/lol/challenges/v1/player-data/{puuid}?region=euw1"</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">fetch_with_cache</span><span class="p">(</span>
        <span class="n">cache_key</span><span class="o">=</span><span class="sa">f</span><span class="s2">"challenges:player:</span><span class="si">{</span><span class="n">region</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="n">resource_name</span><span class="o">=</span><span class="s2">"Player challenges"</span><span class="p">,</span>
        <span class="n">fetch_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">riot_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">"/lol/challenges/v1/player-data/</span><span class="si">{</span><span class="n">puuid</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">ttl</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">cache_ttl_challenges_player</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">"puuid"</span><span class="p">:</span> <span class="n">puuid</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span> <span class="s2">"region"</span><span class="p">:</span> <span class="n">region</span><span class="p">},</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script>
        // Enhanced Mermaid Interactivity for LOLStonks Documentation
        (function() {
            'use strict';

            console.log('Initializing Mermaid interactivity...');

            // Wait for DOM to be ready and Mermaid diagrams to render
            const waitForMermaid = () => {
                const mermaidElements = document.querySelectorAll('.mermaid');
                console.log('Found Mermaid elements:', mermaidElements.length);

                if (mermaidElements.length === 0) {
                    console.log('No Mermaid elements found, retrying in 2 seconds...');
                    setTimeout(waitForMermaid, 2000);
                    return;
                }

                mermaidElements.forEach((element, index) => {
                    const id = element.id || 'mermaid-diagram-' + index;
                    element.setAttribute('id', id);

                    // Wait for the diagram to be rendered as SVG
                    const waitForSVG = () => {
                        const svg = element.querySelector('svg');
                        if (svg) {
                            console.log('SVG found for element:', id);
                            addInteractivityToDiagram(element, id);
                        } else {
                            console.log('SVG not found yet for element:', id, 'retrying...');
                            setTimeout(waitForSVG, 500);
                        }
                    };

                    waitForSVG();
                });
            };

            const addInteractivityToDiagram = (element, id) => {
                // Add interactive controls container
                if (!element.previousSibling) {
                    const controls = createInteractiveControls(id, element);
                    element.parentNode.insertBefore(controls, element);
                }

                // Add zoom controls
                addZoomControls(element, id);

                // Add click handlers
                addClickHandlers(element);

                // Add tooltips
                addTooltips(element);

                // Make responsive
                makeResponsive(element);

                // Add pan and zoom
                addPanAndZoom(element, id);
            };

            const createInteractiveControls = (id, element) => {
                const controls = document.createElement('div');
                controls.className = 'mermaid-controls';
                controls.style.cssText = `
                    margin: 10px 0;
                    padding: 10px;
                    background: #f5f5f5;
                    border-radius: 5px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    flex-wrap: wrap;
                    gap: 10px;
                    font-size: 14px;
                    font-family: Arial, sans-serif;
                `;

                // Zoom controls
                const zoomControls = document.createElement('div');
                zoomControls.innerHTML = `
                    <span style="font-weight: bold;">🔍 Zoom:</span>
                    <button onclick="zoomDiagram('${id}', 1.2)" style="margin: 0 2px; padding: 4px 8px; background: #1976d2; color: white; border: none; border-radius: 3px; cursor: pointer;">+</button>
                    <button onclick="zoomDiagram('${id}', 0.8)" style="margin: 0 2px; padding: 4px 8px; background: #1976d2; color: white; border: none; border-radius: 3px; cursor: pointer;">−</button>
                    <button onclick="resetZoom('${id}')" style="margin: 0 2px; padding: 4px 8px; background: #666; color: white; border: none; border-radius: 3px; cursor: pointer;">Reset</button>
                `;

                // Navigation info
                const navInfo = document.createElement('div');
                navInfo.innerHTML = `<span style="color: #666;">🖱️ Click nodes for details • Scroll to zoom • Drag to pan</span>`;

                // Fullscreen button
                const fullscreenBtn = document.createElement('button');
                fullscreenBtn.textContent = '⛶ Fullscreen';
                fullscreenBtn.style.cssText = `
                    padding: 4px 12px;
                    background: #388e3c;
                    color: white;
                    border: none;
                    border-radius: 3px;
                    cursor: pointer;
                `;
                fullscreenBtn.onclick = () => toggleFullscreen(id, element);

                // Download button
                const downloadBtn = document.createElement('button');
                downloadBtn.textContent = '📥 Download';
                downloadBtn.style.cssText = `
                    padding: 4px 12px;
                    background: #ff9800;
                    color: white;
                    border: none;
                    border-radius: 3px;
                    cursor: pointer;
                `;
                downloadBtn.onclick = () => downloadDiagram(id, element);

                controls.appendChild(zoomControls);
                controls.appendChild(navInfo);
                controls.appendChild(fullscreenBtn);
                controls.appendChild(downloadBtn);

                return controls;
            };

            const addZoomControls = (element, id) => {
                element.style.transform = 'scale(1)';
                element.style.transformOrigin = 'center top';
                element.style.transition = 'transform 0.3s ease';
                element.dataset.originalTransform = 'scale(1)';
                element.dataset.currentZoom = '1';
            };

            const addPanAndZoom = (element, id) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                let isPanning = false;
                let startX = 0, startY = 0, translateX = 0, translateY = 0;

                // Mouse wheel zoom
                element.addEventListener('wheel', function(e) {
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        const delta = e.deltaY > 0 ? 0.9 : 1.1;
                        zoomDiagram(id, delta);
                    }
                });

                // Pan functionality
                svg.style.cursor = 'grab';
                svg.addEventListener('mousedown', function(e) {
                    if (e.button === 0 && !e.shiftKey) {
                        isPanning = true;
                        startX = e.clientX - translateX;
                        startY = e.clientY - translateY;
                        svg.style.cursor = 'grabbing';
                        e.preventDefault();
                    }
                });

                document.addEventListener('mousemove', function(e) {
                    if (isPanning) {
                        translateX = e.clientX - startX;
                        translateY = e.clientY - startY;
                        const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                        svg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
                    }
                });

                document.addEventListener('mouseup', function() {
                    isPanning = false;
                    svg.style.cursor = 'grab';
                });

                // Touch support for mobile
                let touchStartDistance = 0;
                let touchStartZoom = 1;

                element.addEventListener('touchstart', function(e) {
                    if (e.touches.length === 2) {
                        const dx = e.touches[0].clientX - e.touches[1].clientX;
                        const dy = e.touches[0].clientY - e.touches[1].clientY;
                        touchStartDistance = Math.sqrt(dx * dx + dy * dy);
                        touchStartZoom = parseFloat(element.dataset.currentZoom || 1);
                    }
                });

                element.addEventListener('touchmove', function(e) {
                    if (e.touches.length === 2) {
                        const dx = e.touches[0].clientX - e.touches[1].clientX;
                        const dy = e.touches[0].clientY - e.touches[1].clientY;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const scale = Math.max(0.5, Math.min(3, touchStartZoom * (distance / touchStartDistance)));
                        element.dataset.currentZoom = scale;
                        const svg = element.querySelector('svg');
                        const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                        svg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
                    }
                });
            };

            const addClickHandlers = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const clickableElements = svg.querySelectorAll('g.node, g.edgePath, .cluster');
                clickableElements.forEach(el => {
                    el.style.cursor = 'pointer';
                    el.addEventListener('click', function(e) {
                        if (!e.shiftKey && !e.ctrlKey) {
                            e.preventDefault();
                            showNodeDetails(el, element);
                        }
                    });
                });
            };

            const addTooltips = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const nodes = svg.querySelectorAll('g.node');
                nodes.forEach(node => {
                    const rect = node.querySelector('rect');
                    const text = node.querySelector('text');
                    if (rect && text) {
                        node.title = text.textContent + ' - Click for more information';

                        node.addEventListener('mouseenter', function() {
                            rect.style.filter = 'brightness(1.2)';
                            rect.style.transition = 'filter 0.2s ease';
                        });

                        node.addEventListener('mouseleave', function() {
                            rect.style.filter = 'brightness(1)';
                        });
                    }
                });
            };

            const makeResponsive = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                svg.style.maxWidth = '100%';
                svg.style.height = 'auto';
                svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

                const resizeObserver = new ResizeObserver(() => {
                    adjustDiagramSize(element);
                });
                resizeObserver.observe(element);
            };

            const adjustDiagramSize = (element) => {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const container = element.parentElement;
                const containerWidth = container.clientWidth;

                if (containerWidth < 800) {
                    const mobileZoom = Math.max(0.5, containerWidth / 800);
                    element.dataset.currentZoom = mobileZoom;
                    const translateMatch = svg.style.transform.match(/translate\(([^)]+)px/);
                    const translate = translateMatch ? translateMatch[1] : '0px, 0px';
                    svg.style.transform = `translate(${translate}) scale(${mobileZoom})`;
                }
            };

            const showNodeDetails = (nodeElement, diagramElement) => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 1000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                `;

                const content = document.createElement('div');
                content.style.cssText = `
                    background: white;
                    padding: 20px;
                    border-radius: 8px;
                    max-width: 600px;
                    max-height: 80%;
                    overflow-y: auto;
                `;

                const text = nodeElement.querySelector('text');
                const title = text ? text.textContent : 'Node Details';

                content.innerHTML = `
                    <h3>${title}</h3>
                    <p><strong>Diagram:</strong> ${diagramElement.closest('h1, h2, h3, h4, h5, h6')?.textContent || 'Architecture Diagram'}</p>
                    <p><strong>Component Type:</strong> ${getNodeInfo(nodeElement).type}</p>
                    <p>${getNodeInfo(nodeElement).description}</p>
                    <button onclick="this.closest('div[style*=fixed]').remove()" style="
                        margin-top: 15px;
                        padding: 8px 16px;
                        background: #1976d2;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                    ">Close</button>
                `;

                modal.appendChild(content);
                modal.appendChild(document.createElement('button'));
                modal.onclick = (e) => {
                    if (e.target === modal) modal.remove();
                };

                document.body.appendChild(modal);
            };

            const getNodeInfo = (nodeElement) => {
                const text = nodeElement.querySelector('text')?.textContent?.toLowerCase() || '';

                if (text.includes('api') || text.includes('gateway')) {
                    return {
                        type: 'API Component',
                        description: 'This component handles API requests, routing, and response processing in the LOLStonks Gateway.'
                    };
                } else if (text.includes('cache') || text.includes('redis')) {
                    return {
                        type: 'Cache Layer',
                        description: 'This component provides caching functionality to improve API response times and reduce external API calls.'
                    };
                } else if (text.includes('rate') || text.includes('limit')) {
                    return {
                        type: 'Rate Limiter',
                        description: 'This component enforces rate limits to prevent API abuse and ensure fair usage across all clients.'
                    };
                } else if (text.includes('auth') || text.includes('security')) {
                    return {
                        type: 'Security Component',
                        description: 'This component handles authentication, authorization, and security validation for API requests.'
                    };
                } else if (text.includes('provider') || text.includes('riot')) {
                    return {
                        type: 'External Provider',
                        description: 'This component interfaces with external APIs (like Riot Games API) to fetch game data.'
                    };
                } else {
                    return {
                        type: 'System Component',
                        description: 'This component is part of the LOLStonks API Gateway architecture. Click on different components to explore the system design.'
                    };
                }
            };

            // Global functions for button controls
            window.zoomDiagram = function(id, factor) {
                const element = document.getElementById(id);
                if (!element) return;

                const currentZoom = parseFloat(element.dataset.currentZoom || 1);
                const newZoom = Math.max(0.1, Math.min(3, currentZoom * factor));

                const svg = element.querySelector('svg');
                const currentTransform = svg.style.transform || '';
                const translateMatch = currentTransform.match(/translate\(([^)]+)px/);
                const translate = translateMatch ? translateMatch[1] : '0px, 0px';

                svg.style.transform = `translate(${translate}) scale(${newZoom})`;
                element.dataset.currentZoom = newZoom;
            };

            window.resetZoom = function(id) {
                const element = document.getElementById(id);
                if (!element) return;

                const svg = element.querySelector('svg');
                svg.style.transform = 'translate(0px, 0px) scale(1)';
                element.dataset.currentZoom = '1';
            };

            window.toggleFullscreen = function(id, element) {
                if (element.style.position === 'fixed') {
                    // Exit fullscreen
                    element.style.position = '';
                    element.style.top = '';
                    element.style.left = '';
                    element.style.width = '';
                    element.style.height = '';
                    element.style.zIndex = '';
                    element.style.backgroundColor = '';
                    element.style.padding = '';
                    element.style.overflow = '';
                    resetZoom(id);
                } else {
                    // Enter fullscreen
                    element.style.position = 'fixed';
                    element.style.top = '0';
                    element.style.left = '0';
                    element.style.width = '100vw';
                    element.style.height = '100vh';
                    element.style.zIndex = '999';
                    element.style.backgroundColor = 'white';
                    element.style.padding = '20px';
                    element.style.overflow = 'auto';
                    zoomDiagram(id, 1.5);
                }
            };

            window.downloadDiagram = function(id, element) {
                const svg = element.querySelector('svg');
                if (!svg) return;

                const svgData = new XMLSerializer().serializeToString(svg);
                const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
                const svgUrl = URL.createObjectURL(svgBlob);

                const downloadLink = document.createElement('a');
                downloadLink.href = svgUrl;
                downloadLink.download = `${id || 'diagram'}-${Date.now()}.svg`;
                downloadLink.click();

                URL.revokeObjectURL(svgUrl);
            };

            // Initialize everything
            waitForMermaid();

        })();
    </script>
</body>
</html>